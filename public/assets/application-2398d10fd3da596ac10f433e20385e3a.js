!function(t,e){function n(t){var e=t.length,n=he.type(t);return he.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t){var e=ke[t]={};return he.each(t.match(fe)||[],function(t,n){e[n]=!0}),e}function r(t,n,i,r){if(he.acceptData(t)){var s,o,a=he.expando,u=t.nodeType,c=u?he.cache:t,h=u?t[a]:t[a]&&a;if(h&&c[h]&&(r||c[h].data)||i!==e||"string"!=typeof n)return h||(h=u?t[a]=ee.pop()||he.guid++:a),c[h]||(c[h]=u?{}:{toJSON:he.noop}),("object"==typeof n||"function"==typeof n)&&(r?c[h]=he.extend(c[h],n):c[h].data=he.extend(c[h].data,n)),o=c[h],r||(o.data||(o.data={}),o=o.data),i!==e&&(o[he.camelCase(n)]=i),"string"==typeof n?(s=o[n],null==s&&(s=o[he.camelCase(n)])):s=o,s}}function s(t,e,n){if(he.acceptData(t)){var i,r,s=t.nodeType,o=s?he.cache:t,u=s?t[he.expando]:he.expando;if(o[u]){if(e&&(i=n?o[u]:o[u].data)){he.isArray(e)?e=e.concat(he.map(e,he.camelCase)):e in i?e=[e]:(e=he.camelCase(e),e=e in i?[e]:e.split(" ")),r=e.length;for(;r--;)delete i[e[r]];if(n?!a(i):!he.isEmptyObject(i))return}(n||(delete o[u].data,a(o[u])))&&(s?he.cleanData([t],!0):he.support.deleteExpando||o!=o.window?delete o[u]:o[u]=null)}}}function o(t,n,i){if(i===e&&1===t.nodeType){var r="data-"+n.replace(Te,"-$1").toLowerCase();if(i=t.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Pe.test(i)?he.parseJSON(i):i}catch(s){}he.data(t,n,i)}else i=e}return i}function a(t){var e;for(e in t)if(("data"!==e||!he.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function u(){return!0}function c(){return!1}function h(){try{return G.activeElement}catch(t){}}function l(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function f(t,e,n){if(he.isFunction(e))return he.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return he.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(qe.test(e))return he.filter(e,t,n);e=he.filter(e,t)}return he.grep(t,function(t){return he.inArray(t,e)>=0!==n})}function d(t){var e=Ve.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function p(t,e){return he.nodeName(t,"table")&&he.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function g(t){return t.type=(null!==he.find.attr(t,"type"))+"/"+t.type,t}function m(t){var e=sn.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function v(t,e){for(var n,i=0;null!=(n=t[i]);i++)he._data(n,"globalEval",!e||he._data(e[i],"globalEval"))}function _(t,e){if(1===e.nodeType&&he.hasData(t)){var n,i,r,s=he._data(t),o=he._data(e,s),a=s.events;if(a){delete o.handle,o.events={};for(n in a)for(i=0,r=a[n].length;r>i;i++)he.event.add(e,n,a[n][i])}o.data&&(o.data=he.extend({},o.data))}}function y(t,e){var n,i,r;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!he.support.noCloneEvent&&e[he.expando]){r=he._data(e);for(i in r.events)he.removeEvent(e,i,r.handle);e.removeAttribute(he.expando)}"script"===n&&e.text!==t.text?(g(e).text=t.text,m(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),he.support.html5Clone&&t.innerHTML&&!he.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&en.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function b(t,n){var i,r,s=0,o=typeof t.getElementsByTagName!==J?t.getElementsByTagName(n||"*"):typeof t.querySelectorAll!==J?t.querySelectorAll(n||"*"):e;if(!o)for(o=[],i=t.childNodes||t;null!=(r=i[s]);s++)!n||he.nodeName(r,n)?o.push(r):he.merge(o,b(r,n));return n===e||n&&he.nodeName(t,n)?he.merge([t],o):o}function w(t){en.test(t.type)&&(t.defaultChecked=t.checked)}function x(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=kn.length;r--;)if(e=kn[r]+n,e in t)return e;return i}function C(t,e){return t=e||t,"none"===he.css(t,"display")||!he.contains(t.ownerDocument,t)}function S(t,e){for(var n,i,r,s=[],o=0,a=t.length;a>o;o++)i=t[o],i.style&&(s[o]=he._data(i,"olddisplay"),n=i.style.display,e?(s[o]||"none"!==n||(i.style.display=""),""===i.style.display&&C(i)&&(s[o]=he._data(i,"olddisplay",A(i.nodeName)))):s[o]||(r=C(i),(n&&"none"!==n||!r)&&he._data(i,"olddisplay",r?n:he.css(i,"display"))));for(o=0;a>o;o++)i=t[o],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?s[o]||"":"none"));return t}function k(t,e,n){var i=_n.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function P(t,e,n,i,r){for(var s=n===(i?"border":"content")?4:"width"===e?1:0,o=0;4>s;s+=2)"margin"===n&&(o+=he.css(t,n+Sn[s],!0,r)),i?("content"===n&&(o-=he.css(t,"padding"+Sn[s],!0,r)),"margin"!==n&&(o-=he.css(t,"border"+Sn[s]+"Width",!0,r))):(o+=he.css(t,"padding"+Sn[s],!0,r),"padding"!==n&&(o+=he.css(t,"border"+Sn[s]+"Width",!0,r)));return o}function T(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,s=ln(t),o=he.support.boxSizing&&"border-box"===he.css(t,"boxSizing",!1,s);if(0>=r||null==r){if(r=fn(t,e,s),(0>r||null==r)&&(r=t.style[e]),yn.test(r))return r;i=o&&(he.support.boxSizingReliable||r===t.style[e]),r=parseFloat(r)||0}return r+P(t,e,n||(o?"border":"content"),i,s)+"px"}function A(t){var e=G,n=wn[t];return n||(n=E(t,e),"none"!==n&&n||(hn=(hn||he("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(hn[0].contentWindow||hn[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),n=E(t,e),hn.detach()),wn[t]=n),n}function E(t,e){var n=he(e.createElement(t)).appendTo(e.body),i=he.css(n[0],"display");return n.remove(),i}function M(t,e,n,i){var r;if(he.isArray(e))he.each(e,function(e,r){n||Tn.test(t)?i(t,r):M(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==he.type(e))i(t,e);else for(r in e)M(t+"["+r+"]",e[r],n,i)}function j(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,s=e.toLowerCase().match(fe)||[];if(he.isFunction(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function N(t,e,n,i){function r(a){var u;return s[a]=!0,he.each(t[a]||[],function(t,a){var c=a(e,n,i);return"string"!=typeof c||o||s[c]?o?!(u=c):void 0:(e.dataTypes.unshift(c),r(c),!1)}),u}var s={},o=t===Un;return r(e.dataTypes[0])||!s["*"]&&r("*")}function D(t,n){var i,r,s=he.ajaxSettings.flatOptions||{};for(r in n)n[r]!==e&&((s[r]?t:i||(i={}))[r]=n[r]);return i&&he.extend(!0,t,i),t}function O(t,n,i){for(var r,s,o,a,u=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),s===e&&(s=t.mimeType||n.getResponseHeader("Content-Type"));if(s)for(a in u)if(u[a]&&u[a].test(s)){c.unshift(a);break}if(c[0]in i)o=c[0];else{for(a in i){if(!c[0]||t.converters[a+" "+c[0]]){o=a;break}r||(r=a)}o=o||r}return o?(o!==c[0]&&c.unshift(o),i[o]):void 0}function L(t,e,n,i){var r,s,o,a,u,c={},h=t.dataTypes.slice();if(h[1])for(o in t.converters)c[o.toLowerCase()]=t.converters[o];for(s=h.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!u&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=s,s=h.shift())if("*"===s)s=u;else if("*"!==u&&u!==s){if(o=c[u+" "+s]||c["* "+s],!o)for(r in c)if(a=r.split(" "),a[1]===s&&(o=c[u+" "+a[0]]||c["* "+a[0]])){o===!0?o=c[r]:c[r]!==!0&&(s=a[0],h.unshift(a[1]));break}if(o!==!0)if(o&&t["throws"])e=o(e);else try{e=o(e)}catch(l){return{state:"parsererror",error:o?l:"No conversion from "+u+" to "+s}}}return{state:"success",data:e}}function I(){try{return new t.XMLHttpRequest}catch(e){}}function z(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function F(){return setTimeout(function(){Kn=e}),Kn=he.now()}function B(t,e,n){for(var i,r=(si[e]||[]).concat(si["*"]),s=0,o=r.length;o>s;s++)if(i=r[s].call(n,e,t))return i}function $(t,e,n){var i,r,s=0,o=ri.length,a=he.Deferred().always(function(){delete u.elem}),u=function(){if(r)return!1;for(var e=Kn||F(),n=Math.max(0,c.startTime+c.duration-e),i=n/c.duration||0,s=1-i,o=0,u=c.tweens.length;u>o;o++)c.tweens[o].run(s);return a.notifyWith(t,[c,s,n]),1>s&&u?n:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:he.extend({},e),opts:he.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Kn||F(),duration:n.duration,tweens:[],createTween:function(e,n){var i=he.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)c.tweens[n].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),h=c.props;for(R(h,c.opts.specialEasing);o>s;s++)if(i=ri[s].call(c,t,h,c.opts))return i;return he.map(h,B,c),he.isFunction(c.opts.start)&&c.opts.start.call(t,c),he.fx.timer(he.extend(u,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function R(t,e){var n,i,r,s,o;for(n in t)if(i=he.camelCase(n),r=e[i],s=t[n],he.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),o=he.cssHooks[i],o&&"expand"in o){s=o.expand(s),delete t[i];for(n in s)n in t||(t[n]=s[n],e[n]=r)}else e[i]=r}function q(t,e,n){var i,r,s,o,a,u,c=this,h={},l=t.style,f=t.nodeType&&C(t),d=he._data(t,"fxshow");n.queue||(a=he._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,he.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[l.overflow,l.overflowX,l.overflowY],"inline"===he.css(t,"display")&&"none"===he.css(t,"float")&&(he.support.inlineBlockNeedsLayout&&"inline"!==A(t.nodeName)?l.zoom=1:l.display="inline-block")),n.overflow&&(l.overflow="hidden",he.support.shrinkWrapBlocks||c.always(function(){l.overflow=n.overflow[0],l.overflowX=n.overflow[1],l.overflowY=n.overflow[2]}));for(i in e)if(r=e[i],ei.exec(r)){if(delete e[i],s=s||"toggle"===r,r===(f?"hide":"show"))continue;h[i]=d&&d[i]||he.style(t,i)}if(!he.isEmptyObject(h)){d?"hidden"in d&&(f=d.hidden):d=he._data(t,"fxshow",{}),s&&(d.hidden=!f),f?he(t).show():c.done(function(){he(t).hide()}),c.done(function(){var e;he._removeData(t,"fxshow");for(e in h)he.style(t,e,h[e])});for(i in h)o=B(f?d[i]:0,i,c),i in d||(d[i]=o.start,f&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}}function H(t,e,n,i,r){return new H.prototype.init(t,e,n,i,r)}function U(t,e){var n,i={height:t},r=0;for(e=e?1:0;4>r;r+=2-e)n=Sn[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function W(t){return he.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var V,X,J=typeof e,Z=t.location,G=t.document,Y=G.documentElement,Q=t.jQuery,K=t.$,te={},ee=[],ne="1.10.1",ie=ee.concat,re=ee.push,se=ee.slice,oe=ee.indexOf,ae=te.toString,ue=te.hasOwnProperty,ce=ne.trim,he=function(t,e){return new he.fn.init(t,e,X)},le=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,fe=/\S+/g,de=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,pe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ge=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,me=/^[\],:{}\s]*$/,ve=/(?:^|:|,)(?:\s*\[)+/g,_e=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ye=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,be=/^-ms-/,we=/-([\da-z])/gi,xe=function(t,e){return e.toUpperCase()},Ce=function(t){(G.addEventListener||"load"===t.type||"complete"===G.readyState)&&(Se(),he.ready())},Se=function(){G.addEventListener?(G.removeEventListener("DOMContentLoaded",Ce,!1),t.removeEventListener("load",Ce,!1)):(G.detachEvent("onreadystatechange",Ce),t.detachEvent("onload",Ce))};he.fn=he.prototype={jquery:ne,constructor:he,init:function(t,n,i){var r,s;if(!t)return this;if("string"==typeof t){if(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:pe.exec(t),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(t):this.constructor(n).find(t);if(r[1]){if(n=n instanceof he?n[0]:n,he.merge(this,he.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:G,!0)),ge.test(r[1])&&he.isPlainObject(n))for(r in n)he.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}if(s=G.getElementById(r[2]),s&&s.parentNode){if(s.id!==r[2])return i.find(t);this.length=1,this[0]=s}return this.context=G,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):he.isFunction(t)?i.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),he.makeArray(t,this))},selector:"",length:0,toArray:function(){return se.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=he.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return he.each(this,t,e)},ready:function(t){return he.ready.promise().done(t),this},slice:function(){return this.pushStack(se.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(he.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:re,sort:[].sort,splice:[].splice},he.fn.init.prototype=he.fn,he.extend=he.fn.extend=function(){var t,n,i,r,s,o,a=arguments[0]||{},u=1,c=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[1]||{},u=2),"object"==typeof a||he.isFunction(a)||(a={}),c===u&&(a=this,--u);c>u;u++)if(null!=(s=arguments[u]))for(r in s)t=a[r],i=s[r],a!==i&&(h&&i&&(he.isPlainObject(i)||(n=he.isArray(i)))?(n?(n=!1,o=t&&he.isArray(t)?t:[]):o=t&&he.isPlainObject(t)?t:{},a[r]=he.extend(h,o,i)):i!==e&&(a[r]=i));return a},he.extend({expando:"jQuery"+(ne+Math.random()).replace(/\D/g,""),noConflict:function(e){return t.$===he&&(t.$=K),e&&t.jQuery===he&&(t.jQuery=Q),he},isReady:!1,readyWait:1,holdReady:function(t){t?he.readyWait++:he.ready(!0)},ready:function(t){if(t===!0?!--he.readyWait:!he.isReady){if(!G.body)return setTimeout(he.ready);he.isReady=!0,t!==!0&&--he.readyWait>0||(V.resolveWith(G,[he]),he.fn.trigger&&he(G).trigger("ready").off("ready"))}},isFunction:function(t){return"function"===he.type(t)},isArray:Array.isArray||function(t){return"array"===he.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?te[ae.call(t)]||"object":typeof t},isPlainObject:function(t){var n;if(!t||"object"!==he.type(t)||t.nodeType||he.isWindow(t))return!1;try{if(t.constructor&&!ue.call(t,"constructor")&&!ue.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(he.support.ownLast)for(n in t)return ue.call(t,n);for(n in t);return n===e||ue.call(t,n)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw new Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||G;var i=ge.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=he.buildFragment([t],e,r),r&&he(r).remove(),he.merge([],i.childNodes))},parseJSON:function(e){return t.JSON&&t.JSON.parse?t.JSON.parse(e):null===e?e:"string"==typeof e&&(e=he.trim(e),e&&me.test(e.replace(_e,"@").replace(ye,"]").replace(ve,"")))?new Function("return "+e)():(he.error("Invalid JSON: "+e),void 0)},parseXML:function(n){var i,r;if(!n||"string"!=typeof n)return null;try{t.DOMParser?(r=new DOMParser,i=r.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(s){i=e}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||he.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(e){e&&he.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(be,"ms-").replace(we,xe)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var r,s=0,o=t.length,a=n(t);if(i){if(a)for(;o>s&&(r=e.apply(t[s],i),r!==!1);s++);else for(s in t)if(r=e.apply(t[s],i),r===!1)break}else if(a)for(;o>s&&(r=e.call(t[s],s,t[s]),r!==!1);s++);else for(s in t)if(r=e.call(t[s],s,t[s]),r===!1)break;return t},trim:ce&&!ce.call("﻿ ")?function(t){return null==t?"":ce.call(t)}:function(t){return null==t?"":(t+"").replace(de,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?he.merge(i,"string"==typeof t?[t]:t):re.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(oe)return oe.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,n){var i=n.length,r=t.length,s=0;if("number"==typeof i)for(;i>s;s++)t[r++]=n[s];else for(;n[s]!==e;)t[r++]=n[s++];return t.length=r,t},grep:function(t,e,n){var i,r=[],s=0,o=t.length;for(n=!!n;o>s;s++)i=!!e(t[s],s),n!==i&&r.push(t[s]);return r},map:function(t,e,i){var r,s=0,o=t.length,a=n(t),u=[];if(a)for(;o>s;s++)r=e(t[s],s,i),null!=r&&(u[u.length]=r);else for(s in t)r=e(t[s],s,i),null!=r&&(u[u.length]=r);return ie.apply([],u)},guid:1,proxy:function(t,n){var i,r,s;return"string"==typeof n&&(s=t[n],n=t,t=s),he.isFunction(t)?(i=se.call(arguments,2),r=function(){return t.apply(n||this,i.concat(se.call(arguments)))},r.guid=t.guid=t.guid||he.guid++,r):e},access:function(t,n,i,r,s,o,a){var u=0,c=t.length,h=null==i;if("object"===he.type(i)){s=!0;for(u in i)he.access(t,n,u,i[u],!0,o,a)}else if(r!==e&&(s=!0,he.isFunction(r)||(a=!0),h&&(a?(n.call(t,r),n=null):(h=n,n=function(t,e,n){return h.call(he(t),n)})),n))for(;c>u;u++)n(t[u],i,a?r:r.call(t[u],u,n(t[u],i)));return s?t:h?n.call(t):c?n(t[0],i):o},now:function(){return(new Date).getTime()},swap:function(t,e,n,i){var r,s,o={};for(s in e)o[s]=t.style[s],t.style[s]=e[s];r=n.apply(t,i||[]);for(s in e)t.style[s]=o[s];return r}}),he.ready.promise=function(e){if(!V)if(V=he.Deferred(),"complete"===G.readyState)setTimeout(he.ready);else if(G.addEventListener)G.addEventListener("DOMContentLoaded",Ce,!1),t.addEventListener("load",Ce,!1);else{G.attachEvent("onreadystatechange",Ce),t.attachEvent("onload",Ce);var n=!1;try{n=null==t.frameElement&&G.documentElement}catch(i){}n&&n.doScroll&&function r(){if(!he.isReady){try{n.doScroll("left")}catch(t){return setTimeout(r,50)}Se(),he.ready()}}()}return V.promise(e)},he.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){te["[object "+e+"]"]=e.toLowerCase()}),X=he(G),function(t,e){function n(t,e,n,i){var r,s,o,a,u,c,h,l,f,d;if((e?e.ownerDocument||e:U)!==I&&L(e),e=e||I,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(F&&!i){if(r=Ce.exec(t))if(o=r[1]){if(9===a){if(s=e.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(o))&&q(e,s)&&s.id===o)return n.push(s),n}else{if(r[2])return re.apply(n,e.getElementsByTagName(t)),n;if((o=r[3])&&T.getElementsByClassName&&e.getElementsByClassName)return re.apply(n,e.getElementsByClassName(o)),n}if(T.qsa&&(!B||!B.test(t))){if(l=h=H,f=e,d=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=g(t),(h=e.getAttribute("id"))?l=h.replace(Pe,"\\$&"):e.setAttribute("id",l),l="[id='"+l+"'] ",u=c.length;u--;)c[u]=l+m(c[u]);f=ve.test(t)&&e.parentNode||e,d=c.join(",")}if(d)try{return re.apply(n,f.querySelectorAll(d)),n}catch(p){}finally{h||e.removeAttribute("id")}}}return S(t.replace(pe,"$1"),e,n,i)}function i(t){return xe.test(t+"")}function r(){function t(n,i){return e.push(n+=" ")>E.cacheLength&&delete t[e.shift()],t[n]=i}var e=[];return t}function s(t){return t[H]=!0,t}function o(t){var e=I.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function a(t,e,n){t=t.split("|");for(var i,r=t.length,s=n?null:e;r--;)(i=E.attrHandle[t[r]])&&i!==e||(E.attrHandle[t[r]]=s)}function u(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:t[e]===!0?e.toLowerCase():null}function c(t,e){return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}function h(t){return"input"===t.nodeName.toLowerCase()?t.defaultValue:void 0}function l(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||K)-(~t.sourceIndex||K);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function f(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function d(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function p(t){return s(function(e){return e=+e,s(function(n,i){for(var r,s=t([],n.length,e),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))})})}function g(t,e){var i,r,s,o,a,u,c,h=J[t+" "];if(h)return e?0:h.slice(0);for(a=t,u=[],c=E.preFilter;a;){(!i||(r=ge.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),u.push(s=[])),i=!1,(r=me.exec(a))&&(i=r.shift(),s.push({value:i,type:r[0].replace(pe," ")}),a=a.slice(i.length));for(o in E.filter)!(r=we[o].exec(a))||c[o]&&!(r=c[o](r))||(i=r.shift(),s.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return e?a.length:a?n.error(t):J(t,u).slice(0)}function m(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function v(t,e,n){var i=e.dir,r=n&&"parentNode"===i,s=V++;return e.first?function(e,n,s){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,s)}:function(e,n,o){var a,u,c,h=W+" "+s;if(o){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,o))return!0}else for(;e=e[i];)if(1===e.nodeType||r)if(c=e[H]||(e[H]={}),(u=c[i])&&u[0]===h){if((a=u[1])===!0||a===A)return a===!0}else if(u=c[i]=[h],u[1]=t(e,n,o)||A,u[1]===!0)return!0}}function _(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function y(t,e,n,i,r){for(var s,o=[],a=0,u=t.length,c=null!=e;u>a;a++)(s=t[a])&&(!n||n(s,i,r))&&(o.push(s),c&&e.push(a));return o}function b(t,e,n,i,r,o){return i&&!i[H]&&(i=b(i)),r&&!r[H]&&(r=b(r,o)),s(function(s,o,a,u){var c,h,l,f=[],d=[],p=o.length,g=s||C(e||"*",a.nodeType?[a]:a,[]),m=!t||!s&&e?g:y(g,f,t,a,u),v=n?r||(s?t:p||i)?[]:o:m;if(n&&n(m,v,a,u),i)for(c=y(v,d),i(c,[],a,u),h=c.length;h--;)(l=c[h])&&(v[d[h]]=!(m[d[h]]=l));if(s){if(r||t){if(r){for(c=[],h=v.length;h--;)(l=v[h])&&c.push(m[h]=l);r(null,v=[],c,u)}for(h=v.length;h--;)(l=v[h])&&(c=r?oe.call(s,l):f[h])>-1&&(s[c]=!(o[c]=l))}}else v=y(v===o?v.splice(p,v.length):v),r?r(null,o,v,u):re.apply(o,v)})}function w(t){for(var e,n,i,r=t.length,s=E.relative[t[0].type],o=s||E.relative[" "],a=s?1:0,u=v(function(t){return t===e},o,!0),c=v(function(t){return oe.call(e,t)>-1},o,!0),h=[function(t,n,i){return!s&&(i||n!==D)||((e=n).nodeType?u(t,n,i):c(t,n,i))}];r>a;a++)if(n=E.relative[t[a].type])h=[v(_(h),n)];else{if(n=E.filter[t[a].type].apply(null,t[a].matches),n[H]){for(i=++a;r>i&&!E.relative[t[i].type];i++);return b(a>1&&_(h),a>1&&m(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(pe,"$1"),n,i>a&&w(t.slice(a,i)),r>i&&w(t=t.slice(i)),r>i&&m(t))}h.push(n)}return _(h)}function x(t,e){var i=0,r=e.length>0,o=t.length>0,a=function(s,a,u,c,h){var l,f,d,p=[],g=0,m="0",v=s&&[],_=null!=h,b=D,w=s||o&&E.find.TAG("*",h&&a.parentNode||a),x=W+=null==b?1:Math.random()||.1;for(_&&(D=a!==I&&a,A=i);null!=(l=w[m]);m++){if(o&&l){for(f=0;d=t[f++];)if(d(l,a,u)){c.push(l);break}_&&(W=x,A=++i)}r&&((l=!d&&l)&&g--,s&&v.push(l))}if(g+=m,r&&m!==g){for(f=0;d=e[f++];)d(v,p,a,u);if(s){if(g>0)for(;m--;)v[m]||p[m]||(p[m]=ne.call(c));p=y(p)}re.apply(c,p),_&&!s&&p.length>0&&g+e.length>1&&n.uniqueSort(c)}return _&&(W=x,D=b),v};return r?s(a):a}function C(t,e,i){for(var r=0,s=e.length;s>r;r++)n(t,e[r],i);return i}function S(t,e,n,i){var r,s,o,a,u,c=g(t);if(!i&&1===c.length){if(s=c[0]=c[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&T.getById&&9===e.nodeType&&F&&E.relative[s[1].type]){if(e=(E.find.ID(o.matches[0].replace(Te,Ae),e)||[])[0],!e)return n;t=t.slice(s.shift().value.length)}for(r=we.needsContext.test(t)?0:s.length;r--&&(o=s[r],!E.relative[a=o.type]);)if((u=E.find[a])&&(i=u(o.matches[0].replace(Te,Ae),ve.test(s[0].type)&&e.parentNode||e))){if(s.splice(r,1),t=i.length&&m(s),!t)return re.apply(n,i),n;break}}return N(t,c)(i,e,!F,n,ve.test(t)),n}function k(){}var P,T,A,E,M,j,N,D,O,L,I,z,F,B,$,R,q,H="sizzle"+-new Date,U=t.document,W=0,V=0,X=r(),J=r(),Z=r(),G=!1,Y=function(){return 0},Q=typeof e,K=1<<31,te={}.hasOwnProperty,ee=[],ne=ee.pop,ie=ee.push,re=ee.push,se=ee.slice,oe=ee.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ae="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ue="[\\x20\\t\\r\\n\\f]",ce="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",le=ce.replace("w","w#"),fe="\\["+ue+"*("+ce+")"+ue+"*(?:([*^$|!~]?=)"+ue+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+le+")|)|)"+ue+"*\\]",de=":("+ce+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+fe.replace(3,8)+")*)|.*)\\)|)",pe=new RegExp("^"+ue+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ue+"+$","g"),ge=new RegExp("^"+ue+"*,"+ue+"*"),me=new RegExp("^"+ue+"*([>+~]|"+ue+")"+ue+"*"),ve=new RegExp(ue+"*[+~]"),_e=new RegExp("="+ue+"*([^\\]'\"]*)"+ue+"*\\]","g"),ye=new RegExp(de),be=new RegExp("^"+le+"$"),we={ID:new RegExp("^#("+ce+")"),CLASS:new RegExp("^\\.("+ce+")"),TAG:new RegExp("^("+ce.replace("w","w*")+")"),ATTR:new RegExp("^"+fe),PSEUDO:new RegExp("^"+de),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ue+"*(even|odd|(([+-]|)(\\d*)n|)"+ue+"*(?:([+-]|)"+ue+"*(\\d+)|))"+ue+"*\\)|)","i"),bool:new RegExp("^(?:"+ae+")$","i"),needsContext:new RegExp("^"+ue+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ue+"*((?:-\\d)?\\d*)"+ue+"*\\)|)(?=[^-]|$)","i")},xe=/^[^{]+\{\s*\[native \w/,Ce=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Se=/^(?:input|select|textarea|button)$/i,ke=/^h\d$/i,Pe=/'|\\/g,Te=new RegExp("\\\\([\\da-f]{1,6}"+ue+"?|("+ue+")|.)","ig"),Ae=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(55296|i>>10,56320|1023&i)};try{re.apply(ee=se.call(U.childNodes),U.childNodes),ee[U.childNodes.length].nodeType}catch(Ee){re={apply:ee.length?function(t,e){ie.apply(t,se.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}j=n.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},T=n.support={},L=n.setDocument=function(t){var e=t?t.ownerDocument||t:U,n=e.parentWindow;return e!==I&&9===e.nodeType&&e.documentElement?(I=e,z=e.documentElement,F=!j(e),n&&n.frameElement&&n.attachEvent("onbeforeunload",function(){L()}),T.attributes=o(function(t){return t.innerHTML="<a href='#'></a>",a("type|href|height|width",c,"#"===t.firstChild.getAttribute("href")),a(ae,u,null==t.getAttribute("disabled")),t.className="i",!t.getAttribute("className")}),T.input=o(function(t){return t.innerHTML="<input>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}),a("value",h,T.attributes&&T.input),T.getElementsByTagName=o(function(t){return t.appendChild(e.createComment("")),!t.getElementsByTagName("*").length}),T.getElementsByClassName=o(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),T.getById=o(function(t){return z.appendChild(t).id=H,!e.getElementsByName||!e.getElementsByName(H).length}),T.getById?(E.find.ID=function(t,e){if(typeof e.getElementById!==Q&&F){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},E.filter.ID=function(t){var e=t.replace(Te,Ae);return function(t){return t.getAttribute("id")===e}}):(delete E.find.ID,E.filter.ID=function(t){var e=t.replace(Te,Ae);return function(t){var n=typeof t.getAttributeNode!==Q&&t.getAttributeNode("id");return n&&n.value===e}}),E.find.TAG=T.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==Q?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},E.find.CLASS=T.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==Q&&F?e.getElementsByClassName(t):void 0},$=[],B=[],(T.qsa=i(e.querySelectorAll))&&(o(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||B.push("\\["+ue+"*(?:value|"+ae+")"),t.querySelectorAll(":checked").length||B.push(":checked")}),o(function(t){var n=e.createElement("input");n.setAttribute("type","hidden"),t.appendChild(n).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&B.push("[*^$]="+ue+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||B.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),B.push(",.*:")})),(T.matchesSelector=i(R=z.webkitMatchesSelector||z.mozMatchesSelector||z.oMatchesSelector||z.msMatchesSelector))&&o(function(t){T.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),$.push("!=",de)}),B=B.length&&new RegExp(B.join("|")),$=$.length&&new RegExp($.join("|")),q=i(z.contains)||z.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},T.sortDetached=o(function(t){return 1&t.compareDocumentPosition(e.createElement("div"))}),Y=z.compareDocumentPosition?function(t,n){if(t===n)return G=!0,0;var i=n.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(n);return i?1&i||!T.sortDetached&&n.compareDocumentPosition(t)===i?t===e||q(U,t)?-1:n===e||q(U,n)?1:O?oe.call(O,t)-oe.call(O,n):0:4&i?-1:1:t.compareDocumentPosition?-1:1}:function(t,n){var i,r=0,s=t.parentNode,o=n.parentNode,a=[t],u=[n];if(t===n)return G=!0,0;if(!s||!o)return t===e?-1:n===e?1:s?-1:o?1:O?oe.call(O,t)-oe.call(O,n):0;if(s===o)return l(t,n);for(i=t;i=i.parentNode;)a.unshift(i);for(i=n;i=i.parentNode;)u.unshift(i);for(;a[r]===u[r];)r++;return r?l(a[r],u[r]):a[r]===U?-1:u[r]===U?1:0},e):I},n.matches=function(t,e){return n(t,null,null,e)},n.matchesSelector=function(t,e){if((t.ownerDocument||t)!==I&&L(t),e=e.replace(_e,"='$1']"),!(!T.matchesSelector||!F||$&&$.test(e)||B&&B.test(e)))try{var i=R.call(t,e);if(i||T.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(r){}return n(e,I,null,[t]).length>0},n.contains=function(t,e){return(t.ownerDocument||t)!==I&&L(t),q(t,e)},n.attr=function(t,n){(t.ownerDocument||t)!==I&&L(t);var i=E.attrHandle[n.toLowerCase()],r=i&&te.call(E.attrHandle,n.toLowerCase())?i(t,n,!F):e;return r===e?T.attributes||!F?t.getAttribute(n):(r=t.getAttributeNode(n))&&r.specified?r.value:null:r},n.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},n.uniqueSort=function(t){var e,n=[],i=0,r=0;if(G=!T.detectDuplicates,O=!T.sortStable&&t.slice(0),t.sort(Y),G){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return t},M=n.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=M(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i];i++)n+=M(e);return n},E=n.selectors={cacheLength:50,createPseudo:s,match:we,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Te,Ae),t[3]=(t[4]||t[5]||"").replace(Te,Ae),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||n.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&n.error(t[0]),t},PSEUDO:function(t){var n,i=!t[5]&&t[2];return we.CHILD.test(t[0])?null:(t[3]&&t[4]!==e?t[2]=t[4]:i&&ye.test(i)&&(n=g(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(t[0]=t[0].slice(0,n),t[2]=i.slice(0,n)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Te,Ae).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=X[t+" "];return e||(e=new RegExp("(^|"+ue+")"+t+"("+ue+"|$)"))&&X(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==Q&&t.getAttribute("class")||"")})},ATTR:function(t,e,i){return function(r){var s=n.attr(r,t);return null==s?"!="===e:e?(s+="","="===e?s===i:"!="===e?s!==i:"^="===e?i&&0===s.indexOf(i):"*="===e?i&&s.indexOf(i)>-1:"$="===e?i&&s.slice(-i.length)===i:"~="===e?(" "+s+" ").indexOf(i)>-1:"|="===e?s===i||s.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,r){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,u){var c,h,l,f,d,p,g=s!==o?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),_=!u&&!a;
if(m){if(s){for(;g;){for(l=e;l=l[g];)if(a?l.nodeName.toLowerCase()===v:1===l.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[o?m.firstChild:m.lastChild],o&&_){for(h=m[H]||(m[H]={}),c=h[t]||[],d=c[0]===W&&c[1],f=c[0]===W&&c[2],l=d&&m.childNodes[d];l=++d&&l&&l[g]||(f=d=0)||p.pop();)if(1===l.nodeType&&++f&&l===e){h[t]=[W,d,f];break}}else if(_&&(c=(e[H]||(e[H]={}))[t])&&c[0]===W)f=c[1];else for(;(l=++d&&l&&l[g]||(f=d=0)||p.pop())&&((a?l.nodeName.toLowerCase()!==v:1!==l.nodeType)||!++f||(_&&((l[H]||(l[H]={}))[t]=[W,f]),l!==e)););return f-=r,f===i||0===f%i&&f/i>=0}}},PSEUDO:function(t,e){var i,r=E.pseudos[t]||E.setFilters[t.toLowerCase()]||n.error("unsupported pseudo: "+t);return r[H]?r(e):r.length>1?(i=[t,t,"",e],E.setFilters.hasOwnProperty(t.toLowerCase())?s(function(t,n){for(var i,s=r(t,e),o=s.length;o--;)i=oe.call(t,s[o]),t[i]=!(n[i]=s[o])}):function(t){return r(t,0,i)}):r}},pseudos:{not:s(function(t){var e=[],n=[],i=N(t.replace(pe,"$1"));return i[H]?s(function(t,e,n,r){for(var s,o=i(t,null,r,[]),a=t.length;a--;)(s=o[a])&&(t[a]=!(e[a]=s))}):function(t,r,s){return e[0]=t,i(e,null,s,n),!n.pop()}}),has:s(function(t){return function(e){return n(t,e).length>0}}),contains:s(function(t){return function(e){return(e.textContent||e.innerText||M(e)).indexOf(t)>-1}}),lang:s(function(t){return be.test(t||"")||n.error("unsupported lang: "+t),t=t.replace(Te,Ae).toLowerCase(),function(e){var n;do if(n=F?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===z},focus:function(t){return t===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!E.pseudos.empty(t)},header:function(t){return ke.test(t.nodeName)},input:function(t){return Se.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:p(function(){return[0]}),last:p(function(t,e){return[e-1]}),eq:p(function(t,e,n){return[0>n?n+e:n]}),even:p(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:p(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:p(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:p(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}};for(P in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[P]=f(P);for(P in{submit:!0,reset:!0})E.pseudos[P]=d(P);N=n.compile=function(t,e){var n,i=[],r=[],s=Z[t+" "];if(!s){for(e||(e=g(t)),n=e.length;n--;)s=w(e[n]),s[H]?i.push(s):r.push(s);s=Z(t,x(r,i))}return s},E.pseudos.nth=E.pseudos.eq,k.prototype=E.filters=E.pseudos,E.setFilters=new k,T.sortStable=H.split("").sort(Y).join("")===H,L(),[0,0].sort(Y),T.detectDuplicates=G,he.find=n,he.expr=n.selectors,he.expr[":"]=he.expr.pseudos,he.unique=n.uniqueSort,he.text=n.getText,he.isXMLDoc=n.isXML,he.contains=n.contains}(t);var ke={};he.Callbacks=function(t){t="string"==typeof t?ke[t]||i(t):he.extend({},t);var n,r,s,o,a,u,c=[],h=!t.once&&[],l=function(e){for(r=t.memory&&e,s=!0,a=u||0,u=0,o=c.length,n=!0;c&&o>a;a++)if(c[a].apply(e[0],e[1])===!1&&t.stopOnFalse){r=!1;break}n=!1,c&&(h?h.length&&l(h.shift()):r?c=[]:f.disable())},f={add:function(){if(c){var e=c.length;!function i(e){he.each(e,function(e,n){var r=he.type(n);"function"===r?t.unique&&f.has(n)||c.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),n?o=c.length:r&&(u=e,l(r))}return this},remove:function(){return c&&he.each(arguments,function(t,e){for(var i;(i=he.inArray(e,c,i))>-1;)c.splice(i,1),n&&(o>=i&&o--,a>=i&&a--)}),this},has:function(t){return t?he.inArray(t,c)>-1:!(!c||!c.length)},empty:function(){return c=[],o=0,this},disable:function(){return c=h=r=e,this},disabled:function(){return!c},lock:function(){return h=e,r||f.disable(),this},locked:function(){return!h},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],!c||s&&!h||(n?h.push(e):l(e)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!s}};return f},he.extend({Deferred:function(t){var e=[["resolve","done",he.Callbacks("once memory"),"resolved"],["reject","fail",he.Callbacks("once memory"),"rejected"],["notify","progress",he.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return he.Deferred(function(n){he.each(e,function(e,s){var o=s[0],a=he.isFunction(t[e])&&t[e];r[s[1]](function(){var t=a&&a.apply(this,arguments);t&&he.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?he.extend(t,i):i}},r={};return i.pipe=i.then,he.each(e,function(t,s){var o=s[2],a=s[3];i[s[1]]=o.add,a&&o.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?i:this,arguments),this},r[s[0]+"With"]=o.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,s=se.call(arguments),o=s.length,a=1!==o||t&&he.isFunction(t.promise)?o:0,u=1===a?t:he.Deferred(),c=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?se.call(arguments):r,i===e?u.notifyWith(n,i):--a||u.resolveWith(n,i)}};if(o>1)for(e=new Array(o),n=new Array(o),i=new Array(o);o>r;r++)s[r]&&he.isFunction(s[r].promise)?s[r].promise().done(c(r,i,s)).fail(u.reject).progress(c(r,n,e)):--a;return a||u.resolveWith(i,s),u.promise()}}),he.support=function(e){var n,i,r,s,o,a,u,c,h,l=G.createElement("div");if(l.setAttribute("className","t"),l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=l.getElementsByTagName("*")||[],i=l.getElementsByTagName("a")[0],!i||!i.style||!n.length)return e;s=G.createElement("select"),a=s.appendChild(G.createElement("option")),r=l.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",e.getSetAttribute="t"!==l.className,e.leadingWhitespace=3===l.firstChild.nodeType,e.tbody=!l.getElementsByTagName("tbody").length,e.htmlSerialize=!!l.getElementsByTagName("link").length,e.style=/top/.test(i.getAttribute("style")),e.hrefNormalized="/a"===i.getAttribute("href"),e.opacity=/^0.5/.test(i.style.opacity),e.cssFloat=!!i.style.cssFloat,e.checkOn=!!r.value,e.optSelected=a.selected,e.enctype=!!G.createElement("form").enctype,e.html5Clone="<:nav></:nav>"!==G.createElement("nav").cloneNode(!0).outerHTML,e.inlineBlockNeedsLayout=!1,e.shrinkWrapBlocks=!1,e.pixelPosition=!1,e.deleteExpando=!0,e.noCloneEvent=!0,e.reliableMarginRight=!0,e.boxSizingReliable=!0,r.checked=!0,e.noCloneChecked=r.cloneNode(!0).checked,s.disabled=!0,e.optDisabled=!a.disabled;try{delete l.test}catch(f){e.deleteExpando=!1}r=G.createElement("input"),r.setAttribute("value",""),e.input=""===r.getAttribute("value"),r.value="t",r.setAttribute("type","radio"),e.radioValue="t"===r.value,r.setAttribute("checked","t"),r.setAttribute("name","t"),o=G.createDocumentFragment(),o.appendChild(r),e.appendChecked=r.checked,e.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,l.attachEvent&&(l.attachEvent("onclick",function(){e.noCloneEvent=!1}),l.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})l.setAttribute(u="on"+h,"t"),e[h+"Bubbles"]=u in t||l.attributes[u].expando===!1;l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===l.style.backgroundClip;for(h in he(e))break;return e.ownLast="0"!==h,he(function(){var n,i,r,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",o=G.getElementsByTagName("body")[0];o&&(n=G.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",o.appendChild(n).appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=l.getElementsByTagName("td"),r[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",e.reliableHiddenOffsets=c&&0===r[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",he.swap(o,null!=o.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===l.offsetWidth}),t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(l,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(l,null)||{width:"4px"}).width,i=l.appendChild(G.createElement("div")),i.style.cssText=l.style.cssText=s,i.style.marginRight=i.style.width="0",l.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(i,null)||{}).marginRight)),typeof l.style.zoom!==J&&(l.innerHTML="",l.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",e.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.innerHTML="<div></div>",l.firstChild.style.width="5px",e.shrinkWrapBlocks=3!==l.offsetWidth,e.inlineBlockNeedsLayout&&(o.style.zoom=1)),o.removeChild(n),n=l=r=i=null)}),n=s=o=a=i=r=null,e}({});var Pe=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Te=/([A-Z])/g;he.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?he.cache[t[he.expando]]:t[he.expando],!!t&&!a(t)},data:function(t,e,n){return r(t,e,n)},removeData:function(t,e){return s(t,e)},_data:function(t,e,n){return r(t,e,n,!0)},_removeData:function(t,e){return s(t,e,!0)},acceptData:function(t){if(t.nodeType&&1!==t.nodeType&&9!==t.nodeType)return!1;var e=t.nodeName&&he.noData[t.nodeName.toLowerCase()];return!e||e!==!0&&t.getAttribute("classid")===e}}),he.fn.extend({data:function(t,n){var i,r,s=null,a=0,u=this[0];if(t===e){if(this.length&&(s=he.data(u),1===u.nodeType&&!he._data(u,"parsedAttrs"))){for(i=u.attributes;a<i.length;a++)r=i[a].name,0===r.indexOf("data-")&&(r=he.camelCase(r.slice(5)),o(u,r,s[r]));he._data(u,"parsedAttrs",!0)}return s}return"object"==typeof t?this.each(function(){he.data(this,t)}):arguments.length>1?this.each(function(){he.data(this,t,n)}):u?o(u,t,he.data(u,t)):null},removeData:function(t){return this.each(function(){he.removeData(this,t)})}}),he.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=he._data(t,e),n&&(!i||he.isArray(n)?i=he._data(t,e,he.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=he.queue(t,e),i=n.length,r=n.shift(),s=he._queueHooks(t,e),o=function(){he.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,o,s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return he._data(t,n)||he._data(t,n,{empty:he.Callbacks("once memory").add(function(){he._removeData(t,e+"queue"),he._removeData(t,n)})})}}),he.fn.extend({queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),arguments.length<i?he.queue(this[0],t):n===e?this:this.each(function(){var e=he.queue(this,t,n);he._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&he.dequeue(this,t)})},dequeue:function(t){return this.each(function(){he.dequeue(this,t)})},delay:function(t,e){return t=he.fx?he.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,r=1,s=he.Deferred(),o=this,a=this.length,u=function(){--r||s.resolveWith(o,[o])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";a--;)i=he._data(o[a],t+"queueHooks"),i&&i.empty&&(r++,i.empty.add(u));return u(),s.promise(n)}});var Ae,Ee,Me=/[\t\r\n\f]/g,je=/\r/g,Ne=/^(?:input|select|textarea|button|object)$/i,De=/^(?:a|area)$/i,Oe=/^(?:checked|selected)$/i,Le=he.support.getSetAttribute,Ie=he.support.input;he.fn.extend({attr:function(t,e){return he.access(this,he.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){he.removeAttr(this,t)})},prop:function(t,e){return he.access(this,he.prop,t,e,arguments.length>1)},removeProp:function(t){return t=he.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(n){}})},addClass:function(t){var e,n,i,r,s,o=0,a=this.length,u="string"==typeof t&&t;if(he.isFunction(t))return this.each(function(e){he(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(fe)||[];a>o;o++)if(n=this[o],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Me," "):" ")){for(s=0;r=e[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");n.className=he.trim(i)}return this},removeClass:function(t){var e,n,i,r,s,o=0,a=this.length,u=0===arguments.length||"string"==typeof t&&t;if(he.isFunction(t))return this.each(function(e){he(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(fe)||[];a>o;o++)if(n=this[o],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Me," "):"")){for(s=0;r=e[s++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=t?he.trim(i):""}return this},toggleClass:function(t,e){var n=typeof t,i="boolean"==typeof e;return he.isFunction(t)?this.each(function(n){he(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var r,s=0,o=he(this),a=e,u=t.match(fe)||[];r=u[s++];)a=i?a:!o.hasClass(r),o[a?"addClass":"removeClass"](r);else(n===J||"boolean"===n)&&(this.className&&he._data(this,"__className__",this.className),this.className=this.className||t===!1?"":he._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Me," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,i,r,s=this[0];{if(arguments.length)return r=he.isFunction(t),this.each(function(n){var s;1===this.nodeType&&(s=r?t.call(this,n,he(this).val()):t,null==s?s="":"number"==typeof s?s+="":he.isArray(s)&&(s=he.map(s,function(t){return null==t?"":t+""})),i=he.valHooks[this.type]||he.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,s,"value")!==e||(this.value=s))});if(s)return i=he.valHooks[s.type]||he.valHooks[s.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(s,"value"))!==e?n:(n=s.value,"string"==typeof n?n.replace(je,""):null==n?"":n)}}}),he.extend({valHooks:{option:{get:function(t){var e=he.find.attr(t,"value");return null!=e?e:t.text}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,s="select-one"===t.type||0>r,o=s?null:[],a=s?r+1:i.length,u=0>r?a:s?r:0;a>u;u++)if(n=i[u],!(!n.selected&&u!==r||(he.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&he.nodeName(n.parentNode,"optgroup"))){if(e=he(n).val(),s)return e;o.push(e)}return o},set:function(t,e){for(var n,i,r=t.options,s=he.makeArray(e),o=r.length;o--;)i=r[o],(i.selected=he.inArray(he(i).val(),s)>=0)&&(n=!0);return n||(t.selectedIndex=-1),s}}},attr:function(t,n,i){var r,s,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===J?he.prop(t,n,i):(1===o&&he.isXMLDoc(t)||(n=n.toLowerCase(),r=he.attrHooks[n]||(he.expr.match.bool.test(n)?Ee:Ae)),i===e?r&&"get"in r&&null!==(s=r.get(t,n))?s:(s=he.find.attr(t,n),null==s?e:s):null!==i?r&&"set"in r&&(s=r.set(t,i,n))!==e?s:(t.setAttribute(n,i+""),i):(he.removeAttr(t,n),void 0))},removeAttr:function(t,e){var n,i,r=0,s=e&&e.match(fe);if(s&&1===t.nodeType)for(;n=s[r++];)i=he.propFix[n]||n,he.expr.match.bool.test(n)?Ie&&Le||!Oe.test(n)?t[i]=!1:t[he.camelCase("default-"+n)]=t[i]=!1:he.attr(t,n,""),t.removeAttribute(Le?n:i)},attrHooks:{type:{set:function(t,e){if(!he.support.radioValue&&"radio"===e&&he.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(t,n,i){var r,s,o,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return o=1!==a||!he.isXMLDoc(t),o&&(n=he.propFix[n]||n,s=he.propHooks[n]),i!==e?s&&"set"in s&&(r=s.set(t,i,n))!==e?r:t[n]=i:s&&"get"in s&&null!==(r=s.get(t,n))?r:t[n]},propHooks:{tabIndex:{get:function(t){var e=he.find.attr(t,"tabindex");return e?parseInt(e,10):Ne.test(t.nodeName)||De.test(t.nodeName)&&t.href?0:-1}}}}),Ee={set:function(t,e,n){return e===!1?he.removeAttr(t,n):Ie&&Le||!Oe.test(n)?t.setAttribute(!Le&&he.propFix[n]||n,n):t[he.camelCase("default-"+n)]=t[n]=!0,n}},he.each(he.expr.match.bool.source.match(/\w+/g),function(t,n){var i=he.expr.attrHandle[n]||he.find.attr;he.expr.attrHandle[n]=Ie&&Le||!Oe.test(n)?function(t,n,r){var s=he.expr.attrHandle[n],o=r?e:(he.expr.attrHandle[n]=e)!=i(t,n,r)?n.toLowerCase():null;return he.expr.attrHandle[n]=s,o}:function(t,n,i){return i?e:t[he.camelCase("default-"+n)]?n.toLowerCase():null}}),Ie&&Le||(he.attrHooks.value={set:function(t,e,n){return he.nodeName(t,"input")?(t.defaultValue=e,void 0):Ae&&Ae.set(t,e,n)}}),Le||(Ae={set:function(t,n,i){var r=t.getAttributeNode(i);return r||t.setAttributeNode(r=t.ownerDocument.createAttribute(i)),r.value=n+="","value"===i||n===t.getAttribute(i)?n:e}},he.expr.attrHandle.id=he.expr.attrHandle.name=he.expr.attrHandle.coords=function(t,n,i){var r;return i?e:(r=t.getAttributeNode(n))&&""!==r.value?r.value:null},he.valHooks.button={get:function(t,n){var i=t.getAttributeNode(n);return i&&i.specified?i.value:e},set:Ae.set},he.attrHooks.contenteditable={set:function(t,e,n){Ae.set(t,""===e?!1:e,n)}},he.each(["width","height"],function(t,e){he.attrHooks[e]={set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}}})),he.support.hrefNormalized||he.each(["href","src"],function(t,e){he.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),he.support.style||(he.attrHooks.style={get:function(t){return t.style.cssText||e},set:function(t,e){return t.style.cssText=e+""}}),he.support.optSelected||(he.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),he.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){he.propFix[this.toLowerCase()]=this}),he.support.enctype||(he.propFix.enctype="encoding"),he.each(["radio","checkbox"],function(){he.valHooks[this]={set:function(t,e){return he.isArray(e)?t.checked=he.inArray(he(t).val(),e)>=0:void 0}},he.support.checkOn||(he.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ze=/^(?:input|select|textarea)$/i,Fe=/^key/,Be=/^(?:mouse|contextmenu)|click/,$e=/^(?:focusinfocus|focusoutblur)$/,Re=/^([^.]*)(?:\.(.+)|)$/;he.event={global:{},add:function(t,n,i,r,s){var o,a,u,c,h,l,f,d,p,g,m,v=he._data(t);if(v){for(i.handler&&(c=i,i=c.handler,s=c.selector),i.guid||(i.guid=he.guid++),(a=v.events)||(a=v.events={}),(l=v.handle)||(l=v.handle=function(t){return typeof he===J||t&&he.event.triggered===t.type?e:he.event.dispatch.apply(l.elem,arguments)},l.elem=t),n=(n||"").match(fe)||[""],u=n.length;u--;)o=Re.exec(n[u])||[],p=m=o[1],g=(o[2]||"").split(".").sort(),p&&(h=he.event.special[p]||{},p=(s?h.delegateType:h.bindType)||p,h=he.event.special[p]||{},f=he.extend({type:p,origType:m,data:r,handler:i,guid:i.guid,selector:s,needsContext:s&&he.expr.match.needsContext.test(s),namespace:g.join(".")},c),(d=a[p])||(d=a[p]=[],d.delegateCount=0,h.setup&&h.setup.call(t,r,g,l)!==!1||(t.addEventListener?t.addEventListener(p,l,!1):t.attachEvent&&t.attachEvent("on"+p,l))),h.add&&(h.add.call(t,f),f.handler.guid||(f.handler.guid=i.guid)),s?d.splice(d.delegateCount++,0,f):d.push(f),he.event.global[p]=!0);t=null}},remove:function(t,e,n,i,r){var s,o,a,u,c,h,l,f,d,p,g,m=he.hasData(t)&&he._data(t);if(m&&(h=m.events)){for(e=(e||"").match(fe)||[""],c=e.length;c--;)if(a=Re.exec(e[c])||[],d=g=a[1],p=(a[2]||"").split(".").sort(),d){for(l=he.event.special[d]||{},d=(i?l.delegateType:l.bindType)||d,f=h[d]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=s=f.length;s--;)o=f[s],!r&&g!==o.origType||n&&n.guid!==o.guid||a&&!a.test(o.namespace)||i&&i!==o.selector&&("**"!==i||!o.selector)||(f.splice(s,1),o.selector&&f.delegateCount--,l.remove&&l.remove.call(t,o));u&&!f.length&&(l.teardown&&l.teardown.call(t,p,m.handle)!==!1||he.removeEvent(t,d,m.handle),delete h[d])}else for(d in h)he.event.remove(t,d+e[c],n,i,!0);he.isEmptyObject(h)&&(delete m.handle,he._removeData(t,"events"))}},trigger:function(n,i,r,s){var o,a,u,c,h,l,f,d=[r||G],p=ue.call(n,"type")?n.type:n,g=ue.call(n,"namespace")?n.namespace.split("."):[];if(u=l=r=r||G,3!==r.nodeType&&8!==r.nodeType&&!$e.test(p+he.event.triggered)&&(p.indexOf(".")>=0&&(g=p.split("."),p=g.shift(),g.sort()),a=p.indexOf(":")<0&&"on"+p,n=n[he.expando]?n:new he.Event(p,"object"==typeof n&&n),n.isTrigger=s?2:3,n.namespace=g.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=e,n.target||(n.target=r),i=null==i?[n]:he.makeArray(i,[n]),h=he.event.special[p]||{},s||!h.trigger||h.trigger.apply(r,i)!==!1)){if(!s&&!h.noBubble&&!he.isWindow(r)){for(c=h.delegateType||p,$e.test(c+p)||(u=u.parentNode);u;u=u.parentNode)d.push(u),l=u;l===(r.ownerDocument||G)&&d.push(l.defaultView||l.parentWindow||t)}for(f=0;(u=d[f++])&&!n.isPropagationStopped();)n.type=f>1?c:h.bindType||p,o=(he._data(u,"events")||{})[n.type]&&he._data(u,"handle"),o&&o.apply(u,i),o=a&&u[a],o&&he.acceptData(u)&&o.apply&&o.apply(u,i)===!1&&n.preventDefault();if(n.type=p,!s&&!n.isDefaultPrevented()&&(!h._default||h._default.apply(d.pop(),i)===!1)&&he.acceptData(r)&&a&&r[p]&&!he.isWindow(r)){l=r[a],l&&(r[a]=null),he.event.triggered=p;try{r[p]()}catch(m){}he.event.triggered=e,l&&(r[a]=l)}return n.result}},dispatch:function(t){t=he.event.fix(t);var n,i,r,s,o,a=[],u=se.call(arguments),c=(he._data(this,"events")||{})[t.type]||[],h=he.event.special[t.type]||{};if(u[0]=t,t.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,t)!==!1){for(a=he.event.handlers.call(this,t,c),n=0;(s=a[n++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,o=0;(r=s.handlers[o++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(r.namespace))&&(t.handleObj=r,t.data=r.data,i=((he.event.special[r.origType]||{}).handle||r.handler).apply(s.elem,u),i!==e&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,t),t.result}},handlers:function(t,n){var i,r,s,o,a=[],u=n.delegateCount,c=t.target;if(u&&c.nodeType&&(!t.button||"click"!==t.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==t.type)){for(s=[],o=0;u>o;o++)r=n[o],i=r.selector+" ",s[i]===e&&(s[i]=r.needsContext?he(i,this).index(c)>=0:he.find(i,this,null,[c]).length),s[i]&&s.push(r);s.length&&a.push({elem:c,handlers:s})}return u<n.length&&a.push({elem:this,handlers:n.slice(u)}),a},fix:function(t){if(t[he.expando])return t;var e,n,i,r=t.type,s=t,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=Be.test(r)?this.mouseHooks:Fe.test(r)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,t=new he.Event(s),e=i.length;e--;)n=i[e],t[n]=s[n];return t.target||(t.target=s.srcElement||G),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,o.filter?o.filter(t,s):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var i,r,s,o=n.button,a=n.fromElement;return null==t.pageX&&null!=n.clientX&&(r=t.target.ownerDocument||G,s=r.documentElement,i=r.body,t.pageX=n.clientX+(s&&s.scrollLeft||i&&i.scrollLeft||0)-(s&&s.clientLeft||i&&i.clientLeft||0),t.pageY=n.clientY+(s&&s.scrollTop||i&&i.scrollTop||0)-(s&&s.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?n.toElement:a),t.which||o===e||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return he.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return he.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=he.extend(new he.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?he.event.trigger(r,null,e):he.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},he.removeEvent=G.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===J&&(t[i]=null),t.detachEvent(i,n))},he.Event=function(t,e){return this instanceof he.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault()?u:c):this.type=t,e&&he.extend(this,e),this.timeStamp=t&&t.timeStamp||he.now(),this[he.expando]=!0,void 0):new he.Event(t,e)},he.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=u,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=u,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=u,this.stopPropagation()}},he.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){he.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,s=t.handleObj;return(!r||r!==i&&!he.contains(i,r))&&(t.type=s.origType,n=s.handler.apply(this,arguments),t.type=e),n}}}),he.support.submitBubbles||(he.event.special.submit={setup:function(){return he.nodeName(this,"form")?!1:(he.event.add(this,"click._submit keypress._submit",function(t){var n=t.target,i=he.nodeName(n,"input")||he.nodeName(n,"button")?n.form:e;i&&!he._data(i,"submitBubbles")&&(he.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),he._data(i,"submitBubbles",!0))}),void 0)},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&he.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return he.nodeName(this,"form")?!1:(he.event.remove(this,"._submit"),void 0)}}),he.support.changeBubbles||(he.event.special.change={setup:function(){return ze.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(he.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),he.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),he.event.simulate("change",this,t,!0)})),!1):(he.event.add(this,"beforeactivate._change",function(t){var e=t.target;ze.test(e.nodeName)&&!he._data(e,"changeBubbles")&&(he.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||he.event.simulate("change",this.parentNode,t,!0)}),he._data(e,"changeBubbles",!0))}),void 0)},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return he.event.remove(this,"._change"),!ze.test(this.nodeName)}}),he.support.focusinBubbles||he.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){he.event.simulate(e,t.target,he.event.fix(t),!0)};he.event.special[e]={setup:function(){0===n++&&G.addEventListener(t,i,!0)},teardown:function(){0===--n&&G.removeEventListener(t,i,!0)}}}),he.fn.extend({on:function(t,n,i,r,s){var o,a;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=e);for(o in t)this.on(o,n,i,t[o],s);return this}if(null==i&&null==r?(r=n,i=n=e):null==r&&("string"==typeof n?(r=i,i=e):(r=i,i=n,n=e)),r===!1)r=c;else if(!r)return this;return 1===s&&(a=r,r=function(t){return he().off(t),a.apply(this,arguments)},r.guid=a.guid||(a.guid=he.guid++)),this.each(function(){he.event.add(this,t,r,i,n)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,n,i){var r,s;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,he(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(s in t)this.off(s,n,t[s]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=e),i===!1&&(i=c),this.each(function(){he.event.remove(this,t,i,n)})},trigger:function(t,e){return this.each(function(){he.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?he.event.trigger(t,e,n,!0):void 0}});var qe=/^.[^:#\[\.,]*$/,He=/^(?:parents|prev(?:Until|All))/,Ue=he.expr.match.needsContext,We={children:!0,contents:!0,next:!0,prev:!0};he.fn.extend({find:function(t){var e,n=[],i=this,r=i.length;if("string"!=typeof t)return this.pushStack(he(t).filter(function(){for(e=0;r>e;e++)if(he.contains(i[e],this))return!0}));for(e=0;r>e;e++)he.find(t,i[e],n);return n=this.pushStack(r>1?he.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},has:function(t){var e,n=he(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(he.contains(this,n[e]))return!0})},not:function(t){return this.pushStack(f(this,t||[],!0))},filter:function(t){return this.pushStack(f(this,t||[],!1))},is:function(t){return!!f(this,"string"==typeof t&&Ue.test(t)?he(t):t||[],!1).length},closest:function(t,e){for(var n,i=0,r=this.length,s=[],o=Ue.test(t)||"string"!=typeof t?he(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&he.find.matchesSelector(n,t))){n=s.push(n);break}return this.pushStack(s.length>1?he.unique(s):s)},index:function(t){return t?"string"==typeof t?he.inArray(this[0],he(t)):he.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?he(t,e):he.makeArray(t&&t.nodeType?[t]:t),i=he.merge(this.get(),n);return this.pushStack(he.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),he.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return he.dir(t,"parentNode")},parentsUntil:function(t,e,n){return he.dir(t,"parentNode",n)},next:function(t){return l(t,"nextSibling")},prev:function(t){return l(t,"previousSibling")},nextAll:function(t){return he.dir(t,"nextSibling")},prevAll:function(t){return he.dir(t,"previousSibling")},nextUntil:function(t,e,n){return he.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return he.dir(t,"previousSibling",n)},siblings:function(t){return he.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return he.sibling(t.firstChild)},contents:function(t){return he.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:he.merge([],t.childNodes)}},function(t,e){he.fn[t]=function(n,i){var r=he.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=he.filter(i,r)),this.length>1&&(We[t]||(r=he.unique(r)),He.test(t)&&(r=r.reverse())),this.pushStack(r)}}),he.extend({filter:function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?he.find.matchesSelector(i,t)?[i]:[]:he.find.matches(t,he.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,n,i){for(var r=[],s=t[n];s&&9!==s.nodeType&&(i===e||1!==s.nodeType||!he(s).is(i));)1===s.nodeType&&r.push(s),s=s[n];return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var Ve="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Xe=/ jQuery\d+="(?:null|\d+)"/g,Je=new RegExp("<(?:"+Ve+")[\\s/>]","i"),Ze=/^\s+/,Ge=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ye=/<([\w:]+)/,Qe=/<tbody/i,Ke=/<|&#?\w+;/,tn=/<(?:script|style|link)/i,en=/^(?:checkbox|radio)$/i,nn=/checked\s*(?:[^=]|=\s*.checked.)/i,rn=/^$|\/(?:java|ecma)script/i,sn=/^true\/(.*)/,on=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,an={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:he.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},un=d(G),cn=un.appendChild(G.createElement("div"));
an.optgroup=an.option,an.tbody=an.tfoot=an.colgroup=an.caption=an.thead,an.th=an.td,he.fn.extend({text:function(t){return he.access(this,function(t){return t===e?he.text(this):this.empty().append((this[0]&&this[0].ownerDocument||G).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?he.filter(t,this):this,r=0;null!=(n=i[r]);r++)e||1!==n.nodeType||he.cleanData(b(n)),n.parentNode&&(e&&he.contains(n.ownerDocument,n)&&v(b(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&he.cleanData(b(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&he.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return he.clone(this,t,e)})},html:function(t){return he.access(this,function(t){var n=this[0]||{},i=0,r=this.length;if(t===e)return 1===n.nodeType?n.innerHTML.replace(Xe,""):e;if(!("string"!=typeof t||tn.test(t)||!he.support.htmlSerialize&&Je.test(t)||!he.support.leadingWhitespace&&Ze.test(t)||an[(Ye.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(Ge,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(he.cleanData(b(n,!1)),n.innerHTML=t);n=0}catch(s){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=he.map(this,function(t){return[t.nextSibling,t.parentNode]}),e=0;return this.domManip(arguments,function(n){var i=t[e++],r=t[e++];r&&(i&&i.parentNode!==r&&(i=this.nextSibling),he(this).remove(),r.insertBefore(n,i))},!0),e?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e,n){t=ie.apply([],t);var i,r,s,o,a,u,c=0,h=this.length,l=this,f=h-1,d=t[0],p=he.isFunction(d);if(p||!(1>=h||"string"!=typeof d||he.support.checkClone)&&nn.test(d))return this.each(function(i){var r=l.eq(i);p&&(t[0]=d.call(this,i,r.html())),r.domManip(t,e,n)});if(h&&(u=he.buildFragment(t,this[0].ownerDocument,!1,!n&&this),i=u.firstChild,1===u.childNodes.length&&(u=i),i)){for(o=he.map(b(u,"script"),g),s=o.length;h>c;c++)r=u,c!==f&&(r=he.clone(r,!0,!0),s&&he.merge(o,b(r,"script"))),e.call(this[c],r,c);if(s)for(a=o[o.length-1].ownerDocument,he.map(o,m),c=0;s>c;c++)r=o[c],rn.test(r.type||"")&&!he._data(r,"globalEval")&&he.contains(a,r)&&(r.src?he._evalUrl(r.src):he.globalEval((r.text||r.textContent||r.innerHTML||"").replace(on,"")));u=i=null}return this}}),he.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){he.fn[t]=function(t){for(var n,i=0,r=[],s=he(t),o=s.length-1;o>=i;i++)n=i===o?this:this.clone(!0),he(s[i])[e](n),re.apply(r,n.get());return this.pushStack(r)}}),he.extend({clone:function(t,e,n){var i,r,s,o,a,u=he.contains(t.ownerDocument,t);if(he.support.html5Clone||he.isXMLDoc(t)||!Je.test("<"+t.nodeName+">")?s=t.cloneNode(!0):(cn.innerHTML=t.outerHTML,cn.removeChild(s=cn.firstChild)),!(he.support.noCloneEvent&&he.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||he.isXMLDoc(t)))for(i=b(s),a=b(t),o=0;null!=(r=a[o]);++o)i[o]&&y(r,i[o]);if(e)if(n)for(a=a||b(t),i=i||b(s),o=0;null!=(r=a[o]);o++)_(r,i[o]);else _(t,s);return i=b(s,"script"),i.length>0&&v(i,!u&&b(t,"script")),i=a=r=null,s},buildFragment:function(t,e,n,i){for(var r,s,o,a,u,c,h,l=t.length,f=d(e),p=[],g=0;l>g;g++)if(s=t[g],s||0===s)if("object"===he.type(s))he.merge(p,s.nodeType?[s]:s);else if(Ke.test(s)){for(a=a||f.appendChild(e.createElement("div")),u=(Ye.exec(s)||["",""])[1].toLowerCase(),h=an[u]||an._default,a.innerHTML=h[1]+s.replace(Ge,"<$1></$2>")+h[2],r=h[0];r--;)a=a.lastChild;if(!he.support.leadingWhitespace&&Ze.test(s)&&p.push(e.createTextNode(Ze.exec(s)[0])),!he.support.tbody)for(s="table"!==u||Qe.test(s)?"<table>"!==h[1]||Qe.test(s)?0:a:a.firstChild,r=s&&s.childNodes.length;r--;)he.nodeName(c=s.childNodes[r],"tbody")&&!c.childNodes.length&&s.removeChild(c);for(he.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=f.lastChild}else p.push(e.createTextNode(s));for(a&&f.removeChild(a),he.support.appendChecked||he.grep(b(p,"input"),w),g=0;s=p[g++];)if((!i||-1===he.inArray(s,i))&&(o=he.contains(s.ownerDocument,s),a=b(f.appendChild(s),"script"),o&&v(a),n))for(r=0;s=a[r++];)rn.test(s.type||"")&&n.push(s);return a=null,f},cleanData:function(t,e){for(var n,i,r,s,o=0,a=he.expando,u=he.cache,c=he.support.deleteExpando,h=he.event.special;null!=(n=t[o]);o++)if((e||he.acceptData(n))&&(r=n[a],s=r&&u[r])){if(s.events)for(i in s.events)h[i]?he.event.remove(n,i):he.removeEvent(n,i,s.handle);u[r]&&(delete u[r],c?delete n[a]:typeof n.removeAttribute!==J?n.removeAttribute(a):n[a]=null,ee.push(r))}},_evalUrl:function(t){return he.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),he.fn.extend({wrapAll:function(t){if(he.isFunction(t))return this.each(function(e){he(this).wrapAll(t.call(this,e))});if(this[0]){var e=he(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return he.isFunction(t)?this.each(function(e){he(this).wrapInner(t.call(this,e))}):this.each(function(){var e=he(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=he.isFunction(t);return this.each(function(n){he(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){he.nodeName(this,"body")||he(this).replaceWith(this.childNodes)}).end()}});var hn,ln,fn,dn=/alpha\([^)]*\)/i,pn=/opacity\s*=\s*([^)]*)/,gn=/^(top|right|bottom|left)$/,mn=/^(none|table(?!-c[ea]).+)/,vn=/^margin/,_n=new RegExp("^("+le+")(.*)$","i"),yn=new RegExp("^("+le+")(?!px)[a-z%]+$","i"),bn=new RegExp("^([+-])=("+le+")","i"),wn={BODY:"block"},xn={position:"absolute",visibility:"hidden",display:"block"},Cn={letterSpacing:0,fontWeight:400},Sn=["Top","Right","Bottom","Left"],kn=["Webkit","O","Moz","ms"];he.fn.extend({css:function(t,n){return he.access(this,function(t,n,i){var r,s,o={},a=0;if(he.isArray(n)){for(s=ln(t),r=n.length;r>a;a++)o[n[a]]=he.css(t,n[a],!1,s);return o}return i!==e?he.style(t,n,i):he.css(t,n)},t,n,arguments.length>1)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(t){var e="boolean"==typeof t;return this.each(function(){(e?t:C(this))?he(this).show():he(this).hide()})}}),he.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=fn(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":he.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,n,i,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,o,a,u=he.camelCase(n),c=t.style;if(n=he.cssProps[u]||(he.cssProps[u]=x(c,u)),a=he.cssHooks[n]||he.cssHooks[u],i===e)return a&&"get"in a&&(s=a.get(t,!1,r))!==e?s:c[n];if(o=typeof i,"string"===o&&(s=bn.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(he.css(t,n)),o="number"),!(null==i||"number"===o&&isNaN(i)||("number"!==o||he.cssNumber[u]||(i+="px"),he.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(c[n]="inherit"),a&&"set"in a&&(i=a.set(t,i,r))===e)))try{c[n]=i}catch(h){}}},css:function(t,n,i,r){var s,o,a,u=he.camelCase(n);return n=he.cssProps[u]||(he.cssProps[u]=x(t.style,u)),a=he.cssHooks[n]||he.cssHooks[u],a&&"get"in a&&(o=a.get(t,!0,i)),o===e&&(o=fn(t,n,r)),"normal"===o&&n in Cn&&(o=Cn[n]),""===i||i?(s=parseFloat(o),i===!0||he.isNumeric(s)?s||0:o):o}}),t.getComputedStyle?(ln=function(e){return t.getComputedStyle(e,null)},fn=function(t,n,i){var r,s,o,a=i||ln(t),u=a?a.getPropertyValue(n)||a[n]:e,c=t.style;return a&&(""!==u||he.contains(t.ownerDocument,t)||(u=he.style(t,n)),yn.test(u)&&vn.test(n)&&(r=c.width,s=c.minWidth,o=c.maxWidth,c.minWidth=c.maxWidth=c.width=u,u=a.width,c.width=r,c.minWidth=s,c.maxWidth=o)),u}):G.documentElement.currentStyle&&(ln=function(t){return t.currentStyle},fn=function(t,n,i){var r,s,o,a=i||ln(t),u=a?a[n]:e,c=t.style;return null==u&&c&&c[n]&&(u=c[n]),yn.test(u)&&!gn.test(n)&&(r=c.left,s=t.runtimeStyle,o=s&&s.left,o&&(s.left=t.currentStyle.left),c.left="fontSize"===n?"1em":u,u=c.pixelLeft+"px",c.left=r,o&&(s.left=o)),""===u?"auto":u}),he.each(["height","width"],function(t,e){he.cssHooks[e]={get:function(t,n,i){return n?0===t.offsetWidth&&mn.test(he.css(t,"display"))?he.swap(t,xn,function(){return T(t,e,i)}):T(t,e,i):void 0},set:function(t,n,i){var r=i&&ln(t);return k(t,n,i?P(t,e,i,he.support.boxSizing&&"border-box"===he.css(t,"boxSizing",!1,r),r):0)}}}),he.support.opacity||(he.cssHooks.opacity={get:function(t,e){return pn.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,r=he.isNumeric(e)?"alpha(opacity="+100*e+")":"",s=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===he.trim(s.replace(dn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=dn.test(s)?s.replace(dn,r):s+" "+r)}}),he(function(){he.support.reliableMarginRight||(he.cssHooks.marginRight={get:function(t,e){return e?he.swap(t,{display:"inline-block"},fn,[t,"marginRight"]):void 0}}),!he.support.pixelPosition&&he.fn.position&&he.each(["top","left"],function(t,e){he.cssHooks[e]={get:function(t,n){return n?(n=fn(t,e),yn.test(n)?he(t).position()[e]+"px":n):void 0}}})}),he.expr&&he.expr.filters&&(he.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!he.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||he.css(t,"display"))},he.expr.filters.visible=function(t){return!he.expr.filters.hidden(t)}),he.each({margin:"",padding:"",border:"Width"},function(t,e){he.cssHooks[t+e]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+Sn[i]+e]=s[i]||s[i-2]||s[0];return r}},vn.test(t)||(he.cssHooks[t+e].set=k)});var Pn=/%20/g,Tn=/\[\]$/,An=/\r?\n/g,En=/^(?:submit|button|image|reset|file)$/i,Mn=/^(?:input|select|textarea|keygen)/i;he.fn.extend({serialize:function(){return he.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=he.prop(this,"elements");return t?he.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!he(this).is(":disabled")&&Mn.test(this.nodeName)&&!En.test(t)&&(this.checked||!en.test(t))}).map(function(t,e){var n=he(this).val();return null==n?null:he.isArray(n)?he.map(n,function(t){return{name:e.name,value:t.replace(An,"\r\n")}}):{name:e.name,value:n.replace(An,"\r\n")}}).get()}}),he.param=function(t,n){var i,r=[],s=function(t,e){e=he.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=he.ajaxSettings&&he.ajaxSettings.traditional),he.isArray(t)||t.jquery&&!he.isPlainObject(t))he.each(t,function(){s(this.name,this.value)});else for(i in t)M(i,t[i],n,s);return r.join("&").replace(Pn,"+")},he.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){he.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),he.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var jn,Nn,Dn=he.now(),On=/\?/,Ln=/#.*$/,In=/([?&])_=[^&]*/,zn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Fn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Bn=/^(?:GET|HEAD)$/,$n=/^\/\//,Rn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,qn=he.fn.load,Hn={},Un={},Wn="*/".concat("*");try{Nn=Z.href}catch(Vn){Nn=G.createElement("a"),Nn.href="",Nn=Nn.href}jn=Rn.exec(Nn.toLowerCase())||[],he.fn.load=function(t,n,i){if("string"!=typeof t&&qn)return qn.apply(this,arguments);var r,s,o,a=this,u=t.indexOf(" ");return u>=0&&(r=t.slice(u,t.length),t=t.slice(0,u)),he.isFunction(n)?(i=n,n=e):n&&"object"==typeof n&&(o="POST"),a.length>0&&he.ajax({url:t,type:o,dataType:"html",data:n}).done(function(t){s=arguments,a.html(r?he("<div>").append(he.parseHTML(t)).find(r):t)}).complete(i&&function(t,e){a.each(i,s||[t.responseText,e,t])}),this},he.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){he.fn[e]=function(t){return this.on(e,t)}}),he.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Nn,type:"GET",isLocal:Fn.test(jn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":he.parseJSON,"text xml":he.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?D(D(t,he.ajaxSettings),e):D(he.ajaxSettings,t)},ajaxPrefilter:j(Hn),ajaxTransport:j(Un),ajax:function(t,n){function i(t,n,i,r){var s,l,_,y,w,C=n;2!==b&&(b=2,u&&clearTimeout(u),h=e,a=r||"",x.readyState=t>0?4:0,s=t>=200&&300>t||304===t,i&&(y=O(f,x,i)),y=L(f,y,x,s),s?(f.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(he.lastModified[o]=w),w=x.getResponseHeader("etag"),w&&(he.etag[o]=w)),204===t||"HEAD"===f.type?C="nocontent":304===t?C="notmodified":(C=y.state,l=y.data,_=y.error,s=!_)):(_=C,(t||!C)&&(C="error",0>t&&(t=0))),x.status=t,x.statusText=(n||C)+"",s?g.resolveWith(d,[l,C,x]):g.rejectWith(d,[x,C,_]),x.statusCode(v),v=e,c&&p.trigger(s?"ajaxSuccess":"ajaxError",[x,f,s?l:_]),m.fireWith(d,[x,C]),c&&(p.trigger("ajaxComplete",[x,f]),--he.active||he.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=e),n=n||{};var r,s,o,a,u,c,h,l,f=he.ajaxSetup({},n),d=f.context||f,p=f.context&&(d.nodeType||d.jquery)?he(d):he.event,g=he.Deferred(),m=he.Callbacks("once memory"),v=f.statusCode||{},_={},y={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!l)for(l={};e=zn.exec(a);)l[e[1].toLowerCase()]=e[2];e=l[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=y[n]=y[n]||t,_[t]=e),this},overrideMimeType:function(t){return b||(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)v[e]=[v[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return h&&h.abort(e),i(0,e),this}};if(g.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,f.url=((t||f.url||Nn)+"").replace(Ln,"").replace($n,jn[1]+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=he.trim(f.dataType||"*").toLowerCase().match(fe)||[""],null==f.crossDomain&&(r=Rn.exec(f.url.toLowerCase()),f.crossDomain=!(!r||r[1]===jn[1]&&r[2]===jn[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(jn[3]||("http:"===jn[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=he.param(f.data,f.traditional)),N(Hn,f,n,x),2===b)return x;c=f.global,c&&0===he.active++&&he.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Bn.test(f.type),o=f.url,f.hasContent||(f.data&&(o=f.url+=(On.test(o)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=In.test(o)?o.replace(In,"$1_="+Dn++):o+(On.test(o)?"&":"?")+"_="+Dn++)),f.ifModified&&(he.lastModified[o]&&x.setRequestHeader("If-Modified-Since",he.lastModified[o]),he.etag[o]&&x.setRequestHeader("If-None-Match",he.etag[o])),(f.data&&f.hasContent&&f.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",f.contentType),x.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Wn+"; q=0.01":""):f.accepts["*"]);for(s in f.headers)x.setRequestHeader(s,f.headers[s]);if(f.beforeSend&&(f.beforeSend.call(d,x,f)===!1||2===b))return x.abort();w="abort";for(s in{success:1,error:1,complete:1})x[s](f[s]);if(h=N(Un,f,n,x)){x.readyState=1,c&&p.trigger("ajaxSend",[x,f]),f.async&&f.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},f.timeout));try{b=1,h.send(_,i)}catch(C){if(!(2>b))throw C;i(-1,C)}}else i(-1,"No Transport");return x},getJSON:function(t,e,n){return he.get(t,e,n,"json")},getScript:function(t,n){return he.get(t,e,n,"script")}}),he.each(["get","post"],function(t,n){he[n]=function(t,i,r,s){return he.isFunction(i)&&(s=s||r,r=i,i=e),he.ajax({url:t,type:n,dataType:s,data:i,success:r})}}),he.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return he.globalEval(t),t}}}),he.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),he.ajaxTransport("script",function(t){if(t.crossDomain){var n,i=G.head||he("head")[0]||G.documentElement;return{send:function(e,r){n=G.createElement("script"),n.async=!0,t.scriptCharset&&(n.charset=t.scriptCharset),n.src=t.url,n.onload=n.onreadystatechange=function(t,e){(e||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,e||r(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(e,!0)}}}});var Xn=[],Jn=/(=)\?(?=&|$)|\?\?/;he.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Xn.pop()||he.expando+"_"+Dn++;return this[t]=!0,t}}),he.ajaxPrefilter("json jsonp",function(n,i,r){var s,o,a,u=n.jsonp!==!1&&(Jn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jn.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(s=n.jsonpCallback=he.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Jn,"$1"+s):n.jsonp!==!1&&(n.url+=(On.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return a||he.error(s+" was not called"),a[0]},n.dataTypes[0]="json",o=t[s],t[s]=function(){a=arguments},r.always(function(){t[s]=o,n[s]&&(n.jsonpCallback=i.jsonpCallback,Xn.push(s)),a&&he.isFunction(o)&&o(a[0]),a=o=e}),"script"):void 0});var Zn,Gn,Yn=0,Qn=t.ActiveXObject&&function(){var t;for(t in Zn)Zn[t](e,!0)};he.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&I()||z()}:I,Gn=he.ajaxSettings.xhr(),he.support.cors=!!Gn&&"withCredentials"in Gn,Gn=he.support.ajax=!!Gn,Gn&&he.ajaxTransport(function(n){if(!n.crossDomain||he.support.cors){var i;return{send:function(r,s){var o,a,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(a in n.xhrFields)u[a]=n.xhrFields[a];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");try{for(a in r)u.setRequestHeader(a,r[a])}catch(c){}u.send(n.hasContent&&n.data||null),i=function(t,r){var a,c,h,l;try{if(i&&(r||4===u.readyState))if(i=e,o&&(u.onreadystatechange=he.noop,Qn&&delete Zn[o]),r)4!==u.readyState&&u.abort();else{l={},a=u.status,c=u.getAllResponseHeaders(),"string"==typeof u.responseText&&(l.text=u.responseText);try{h=u.statusText}catch(f){h=""}a||!n.isLocal||n.crossDomain?1223===a&&(a=204):a=l.text?200:404}}catch(d){r||s(-1,d)}l&&s(a,h,l,c)},n.async?4===u.readyState?setTimeout(i):(o=++Yn,Qn&&(Zn||(Zn={},he(t).unload(Qn)),Zn[o]=i),u.onreadystatechange=i):i()},abort:function(){i&&i(e,!0)}}}});var Kn,ti,ei=/^(?:toggle|show|hide)$/,ni=new RegExp("^(?:([+-])=|)("+le+")([a-z%]*)$","i"),ii=/queueHooks$/,ri=[q],si={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),r=ni.exec(e),s=r&&r[3]||(he.cssNumber[t]?"":"px"),o=(he.cssNumber[t]||"px"!==s&&+i)&&ni.exec(he.css(n.elem,t)),a=1,u=20;if(o&&o[3]!==s){s=s||o[3],r=r||[],o=+i||1;do a=a||".5",o/=a,he.style(n.elem,t,o+s);while(a!==(a=n.cur()/i)&&1!==a&&--u)}return r&&(o=n.start=+o||+i||0,n.unit=s,n.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),n}]};he.Animation=he.extend($,{tweener:function(t,e){he.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;r>i;i++)n=t[i],si[n]=si[n]||[],si[n].unshift(e)},prefilter:function(t,e){e?ri.unshift(t):ri.push(t)}}),he.Tween=H,H.prototype={constructor:H,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(he.cssNumber[n]?"":"px")},cur:function(){var t=H.propHooks[this.prop];return t&&t.get?t.get(this):H.propHooks._default.get(this)},run:function(t){var e,n=H.propHooks[this.prop];return this.pos=e=this.options.duration?he.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=he.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){he.fx.step[t.prop]?he.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[he.cssProps[t.prop]]||he.cssHooks[t.prop])?he.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},he.each(["toggle","show","hide"],function(t,e){var n=he.fn[e];he.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(U(e,!0),t,i,r)}}),he.fn.extend({fadeTo:function(t,e,n,i){return this.filter(C).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=he.isEmptyObject(t),s=he.speed(e,n,i),o=function(){var e=$(this,he.extend({},t),s);(r||he._data(this,"finish"))&&e.stop(!0)};return o.finish=o,r||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(t,n,i){var r=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",s=he.timers,o=he._data(this);if(n)o[n]&&o[n].stop&&r(o[n]);else for(n in o)o[n]&&o[n].stop&&ii.test(n)&&r(o[n]);for(n=s.length;n--;)s[n].elem!==this||null!=t&&s[n].queue!==t||(s[n].anim.stop(i),e=!1,s.splice(n,1));(e||!i)&&he.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=he._data(this),i=n[t+"queue"],r=n[t+"queueHooks"],s=he.timers,o=i?i.length:0;for(n.finish=!0,he.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;o>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),he.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){he.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),he.speed=function(t,e,n){var i=t&&"object"==typeof t?he.extend({},t):{complete:n||!n&&e||he.isFunction(t)&&t,duration:t,easing:n&&e||e&&!he.isFunction(e)&&e};return i.duration=he.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in he.fx.speeds?he.fx.speeds[i.duration]:he.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){he.isFunction(i.old)&&i.old.call(this),i.queue&&he.dequeue(this,i.queue)},i},he.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},he.timers=[],he.fx=H.prototype.init,he.fx.tick=function(){var t,n=he.timers,i=0;for(Kn=he.now();i<n.length;i++)t=n[i],t()||n[i]!==t||n.splice(i--,1);n.length||he.fx.stop(),Kn=e},he.fx.timer=function(t){t()&&he.timers.push(t)&&he.fx.start()},he.fx.interval=13,he.fx.start=function(){ti||(ti=setInterval(he.fx.tick,he.fx.interval))},he.fx.stop=function(){clearInterval(ti),ti=null},he.fx.speeds={slow:600,fast:200,_default:400},he.fx.step={},he.expr&&he.expr.filters&&(he.expr.filters.animated=function(t){return he.grep(he.timers,function(e){return t===e.elem}).length}),he.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){he.offset.setOffset(this,t,e)});var n,i,r={top:0,left:0},s=this[0],o=s&&s.ownerDocument;if(o)return n=o.documentElement,he.contains(n,s)?(typeof s.getBoundingClientRect!==J&&(r=s.getBoundingClientRect()),i=W(o),{top:r.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0),left:r.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):r},he.offset={setOffset:function(t,e,n){var i=he.css(t,"position");"static"===i&&(t.style.position="relative");var r,s,o=he(t),a=o.offset(),u=he.css(t,"top"),c=he.css(t,"left"),h=("absolute"===i||"fixed"===i)&&he.inArray("auto",[u,c])>-1,l={},f={};h?(f=o.position(),r=f.top,s=f.left):(r=parseFloat(u)||0,s=parseFloat(c)||0),he.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(l.top=e.top-a.top+r),null!=e.left&&(l.left=e.left-a.left+s),"using"in e?e.using.call(t,l):o.css(l)}},he.fn.extend({position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===he.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),he.nodeName(t[0],"html")||(n=t.offset()),n.top+=he.css(t[0],"borderTopWidth",!0),n.left+=he.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-he.css(i,"marginTop",!0),left:e.left-n.left-he.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Y;t&&!he.nodeName(t,"html")&&"static"===he.css(t,"position");)t=t.offsetParent;return t||Y})}}),he.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i=/Y/.test(n);he.fn[t]=function(r){return he.access(this,function(t,r,s){var o=W(t);return s===e?o?n in o?o[n]:o.document.documentElement[r]:t[r]:(o?o.scrollTo(i?he(o).scrollLeft():s,i?s:he(o).scrollTop()):t[r]=s,void 0)},t,r,arguments.length,null)}}),he.each({Height:"height",Width:"width"},function(t,n){he.each({padding:"inner"+t,content:n,"":"outer"+t},function(i,r){he.fn[r]=function(r,s){var o=arguments.length&&(i||"boolean"!=typeof r),a=i||(r===!0||s===!0?"margin":"border");return he.access(this,function(n,i,r){var s;return he.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+t],s["scroll"+t],n.body["offset"+t],s["offset"+t],s["client"+t])):r===e?he.css(n,i,a):he.style(n,i,r,a)},n,o?r:e,o,null)}})}),he.fn.size=function(){return this.length},he.fn.andSelf=he.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=he:(t.jQuery=t.$=he,"function"==typeof define&&define.amd&&define("jquery",[],function(){return he}))}(window),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n,i=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)},fire:function(e,n,i){var r=t.Event(n);return e.trigger(r,i),r.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(i){var r,s,o,a,u,c,h,l;if(n.fire(i,"ajax:before")){if(a=i.data("cross-domain"),u=a===e?null:a,c=i.data("with-credentials")||null,h=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){r=i.attr("method"),s=i.attr("action"),o=i.serializeArray();var f=i.data("ujs:submit-button");f&&(o.push(f),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(r=i.data("method"),s=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(r=i.data("method")||"get",s=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):(r=i.data("method"),s=n.href(i),o=i.data("params")||null);l={type:r||"GET",data:o,dataType:h,beforeSend:function(t,r){return r.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(i,"ajax:beforeSend",[t,r])},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:u},c&&(l.xhrFields={withCredentials:c}),s&&(l.url=s);var d=n.ajax(l);return i.trigger("ajax:send",d),d}return!1},handleMethod:function(i){var r=n.href(i),s=i.data("method"),o=i.attr("target"),a=t("meta[name=csrf-token]").attr("content"),u=t("meta[name=csrf-param]").attr("content"),c=t('<form method="post" action="'+r+'"></form>'),h='<input name="_method" value="'+s+'" type="hidden" />';u!==e&&a!==e&&(h+='<input name="'+u+'" value="'+a+'" type="hidden" />'),o&&c.attr("target",o),c.hide().append(h).appendTo("body"),c.submit()},disableFormElements:function(e){e.find(n.disableSelector).each(function(){var e=t(this),n=e.is("button")?"html":"val";e.data("ujs:enable-with",e[n]()),e[n](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(n.enableSelector).each(function(){var e=t(this),n=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[n](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,i=t.data("confirm"),r=!1;return i?(n.fire(t,"confirm")&&(r=n.confirm(i),e=n.fire(t,"confirm:complete",[r])),r&&e):!0},blankInputs:function(e,n,i){var r,s,o=t(),a=n||"input,textarea",u=e.find(a);return u.each(function(){if(r=t(this),s=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!s==!i){if(r.is("input[type=radio]")&&u.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;o=o.add(r)}}),o.length?o:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var r=t(this),s=r.data("method"),o=r.data("params");if(!n.allowAction(r))return n.stopEverything(i);if(r.is(n.linkDisableSelector)&&n.disableElement(r),r.data("remote")!==e){if(!(!i.metaKey&&!i.ctrlKey||s&&"GET"!==s||o))return!0;var a=n.handleRemote(r);return a===!1?n.enableElement(r):a.error(function(){n.enableElement(r)}),!1}return r.data("method")?(n.handleMethod(r),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var r=t(this),s=r.data("remote")!==e,o=n.blankInputs(r,n.requiredInputSelector),a=n.nonBlankInputs(r,n.fileInputSelector);if(!n.allowAction(r))return n.stopEverything(i);if(o&&r.attr("novalidate")==e&&n.fire(r,"ajax:aborted:required",[o]))return n.stopEverything(i);
if(s){if(a){setTimeout(function(){n.disableFormElements(r)},13);var u=n.fire(r,"ajax:aborted:file",[a]);return u||setTimeout(function(){n.enableFormElements(r)},13),u}return n.handleRemote(r),!1}setTimeout(function(){n.disableFormElements(r)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var r=i.attr("name"),s=r?{name:r,value:i.val()}:null;i.closest("form").data("ujs:submit-button",s)}),i.delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){var e=t("meta[name=csrf-token]").attr("content"),n=t("meta[name=csrf-param]").attr("content");t('form input[name="'+n+'"]').val(e)}))}(jQuery),!function(t){"use strict";t(function(){t.support.transition=function(){var t=function(){var t,e=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in n)if(void 0!==e.style[t])return n[t]}();return t&&{end:t}}()})}(window.jQuery),!function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype.close=function(e){function n(){i.trigger("closed").remove()}var i,r=t(this),s=r.attr("data-target");s||(s=r.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),i=t(s),e&&e.preventDefault(),i.length||(i=r.hasClass("alert")?r:r.parent()),i.trigger(e=t.Event("close")),e.isDefaultPrevented()||(i.removeClass("in"),t.support.transition&&i.hasClass("fade")?i.on(t.support.transition.end,n):n())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),r=i.data("alert");r||i.data("alert",r=new n(this)),"string"==typeof e&&r[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.alert.data-api",e,n.prototype.close)}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.options=n,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,n=t.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),n&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),n?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault(),e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,n=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(n),e.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e):e()):e&&e()}};var n=t.fn.modal;t.fn.modal=function(n){return this.each(function(){var i=t(this),r=i.data("modal"),s=t.extend({},t.fn.modal.defaults,i.data(),"object"==typeof n&&n);r||i.data("modal",r=new e(this,s)),"string"==typeof n?r[n]():s.show&&r.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),r=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},r.data(),n.data());e.preventDefault(),r.modal(s).one("hide",function(){n.focus()})})}(window.jQuery),!function(t){"use strict";function e(){t(i).each(function(){n(t(this)).removeClass("open")})}function n(e){var n,i=e.attr("data-target");return i||(i=e.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),n=i&&t(i),n&&n.length||(n=e.parent()),n}var i="[data-toggle=dropdown]",r=function(e){var n=t(e).on("click.dropdown.data-api",this.toggle);t("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};r.prototype={constructor:r,toggle:function(){var i,r,s=t(this);if(!s.is(".disabled, :disabled"))return i=n(s),r=i.hasClass("open"),e(),r||i.toggleClass("open"),s.focus(),!1},keydown:function(e){var r,s,o,a,u;if(/(38|40|27)/.test(e.keyCode)&&(r=t(this),e.preventDefault(),e.stopPropagation(),!r.is(".disabled, :disabled"))){if(o=n(r),a=o.hasClass("open"),!a||a&&27==e.keyCode)return 27==e.which&&o.find(i).focus(),r.click();s=t("[role=menu] li:not(.divider):visible a",o),s.length&&(u=s.index(s.filter(":focus")),38==e.keyCode&&u>0&&u--,40==e.keyCode&&u<s.length-1&&u++,~u||(u=0),s.eq(u).focus())}}};var s=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("dropdown");i||n.data("dropdown",i=new r(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.dropdown.data-api",e).on("click.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.dropdown-menu",function(t){t.stopPropagation()}).on("click.dropdown.data-api",i,r.prototype.toggle).on("keydown.dropdown.data-api",i+", [role=menu]",r.prototype.keydown)}(window.jQuery),!function(t){"use strict";function e(e,n){var i,r=t.proxy(this.process,this),s=t(e).is("body")?t(window):t(e);this.options=t.extend({},t.fn.scrollspy.defaults,n),this.$scrollElement=s.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(i=t(e).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=t("body"),this.refresh(),this.process()}e.prototype={constructor:e,refresh:function(){var e,n=this;this.offsets=t([]),this.targets=t([]),e=this.$body.find(this.selector).map(function(){var e=t(this),i=e.data("target")||e.attr("href"),r=/^#\w/.test(i)&&t(i);return r&&r.length&&[[r.position().top+(!t.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),i]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},process:function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),r=this.offsets,s=this.targets,o=this.activeTarget;if(e>=i)return o!=(t=s.last()[0])&&this.activate(t);for(t=r.length;t--;)o!=s[t]&&e>=r[t]&&(!r[t+1]||e<=r[t+1])&&this.activate(s[t])},activate:function(e){var n,i;this.activeTarget=e,t(this.selector).parent(".active").removeClass("active"),i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}};var n=t.fn.scrollspy;t.fn.scrollspy=function(n){return this.each(function(){var i=t(this),r=i.data("scrollspy"),s="object"==typeof n&&n;r||i.data("scrollspy",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.defaults={offset:10},t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(window.jQuery),!function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype={constructor:e,show:function(){var e,n,i,r=this.element,s=r.closest("ul:not(.dropdown-menu)"),o=r.attr("data-target");o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),r.parent("li").hasClass("active")||(e=s.find(".active:last a")[0],i=t.Event("show",{relatedTarget:e}),r.trigger(i),i.isDefaultPrevented()||(n=t(o),this.activate(r.parent("li"),s),this.activate(n,n.parent(),function(){r.trigger({type:"shown",relatedTarget:e})})))},activate:function(e,n,i){function r(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),o?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var s=n.find("> .active"),o=i&&t.support.transition&&s.hasClass("fade");o?s.one(t.support.transition.end,r):r(),s.removeClass("in")}};var n=t.fn.tab;t.fn.tab=function(n){return this.each(function(){var i=t(this),r=i.data("tab");r||i.data("tab",r=new e(this)),"string"==typeof n&&r[n]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(window.jQuery),!function(t){"use strict";var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,n,i){var r,s,o,a,u;for(this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.enabled=!0,o=this.options.trigger.split(" "),u=o.length;u--;)a=o[u],"click"==a?this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this)):"manual"!=a&&(r="hover"==a?"mouseenter":"focus",s="hover"==a?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.leave,this)));this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return e=t.extend({},t.fn[this.type].defaults,this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},enter:function(e){var n,i=t.fn[this.type].defaults,r={};return this._options&&t.each(this._options,function(t,e){i[t]!=e&&(r[t]=e)},this),n=t(e.currentTarget)[this.type](r).data(this.type),n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},leave:function(e){var n=t(e.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?(n.hoverState="out",this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},show:function(){var e,n,i,r,s,o,a=t.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),s="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,e.detach().css({top:0,left:0,display:"block"}),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element),n=this.getPosition(),i=e[0].offsetWidth,r=e[0].offsetHeight,s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"top":o={top:n.top-r,left:n.left+n.width/2-i/2};break;case"left":o={top:n.top+n.height/2-r/2,left:n.left-i};break;case"right":o={top:n.top+n.height/2-r/2,left:n.left+n.width}}this.applyPlacement(o,s),this.$element.trigger("shown")}},applyPlacement:function(t,e){var n,i,r,s,o=this.tip(),a=o[0].offsetWidth,u=o[0].offsetHeight;o.offset(t).addClass(e).addClass("in"),n=o[0].offsetWidth,i=o[0].offsetHeight,"top"==e&&i!=u&&(t.top=t.top+u-i,s=!0),"bottom"==e||"top"==e?(r=0,t.left<0&&(r=-2*t.left,t.left=0,o.offset(t),n=o[0].offsetWidth,i=o[0].offsetHeight),this.replaceArrow(r-a+n,n,"left")):this.replaceArrow(i-u,i,"top"),s&&o.offset(t)},replaceArrow:function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){function e(){var e=setTimeout(function(){n.off(t.support.transition.end).detach()},500);n.one(t.support.transition.end,function(){clearTimeout(e),n.detach()})}var n=this.tip(),i=t.Event("hide");return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?e():n.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},getTitle:function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},tip:function(){return this.$tip=this.$tip||t(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var n=e?t(e.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),r=i.data("tooltip"),s="object"==typeof n&&n;r||i.data("tooltip",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(window.jQuery),!function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype,{constructor:e,setContent:function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t,e=this.$element,n=this.options;return t=("function"==typeof n.content?n.content.call(e[0]):n.content)||e.attr("data-content")},tip:function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var i=t(this),r=i.data("popover"),s="object"==typeof n&&n;r||i.data("popover",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.popover.Constructor=e,t.fn.popover.defaults=t.extend({},t.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.button.defaults,n)};e.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.data(),r=n.is("input")?"val":"html";t+="Text",i.resetText||n.data("resetText",n[r]()),n[r](i[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var i=t(this),r=i.data("button"),s="object"==typeof n&&n;r||i.data("button",r=new e(this,s)),"toggle"==n?r.toggle():n&&r.setState(n)})},t.fn.button.defaults={loadingText:"loading..."},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.collapse.defaults,n),this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.prototype={constructor:e,dimension:function(){var t=this.$element.hasClass("width");return t?"width":"height"},show:function(){var e,n,i,r;if(!this.transitioning&&!this.$element.hasClass("in")){if(e=this.dimension(),n=t.camelCase(["scroll",e].join("-")),i=this.$parent&&this.$parent.find("> .accordion-group > .in"),i&&i.length){if(r=i.data("collapse"),r&&r.transitioning)return;i.collapse("hide"),r||i.data("collapse",null)}this.$element[e](0),this.transition("addClass",t.Event("show"),"shown"),t.support.transition&&this.$element[e](this.$element[0][n])}},hide:function(){var e;!this.transitioning&&this.$element.hasClass("in")&&(e=this.dimension(),this.reset(this.$element[e]()),this.transition("removeClass",t.Event("hide"),"hidden"),this.$element[e](0))},reset:function(t){var e=this.dimension();return this.$element.removeClass("collapse")[e](t||"auto")[0].offsetWidth,this.$element[null!==t?"addClass":"removeClass"]("collapse"),this},transition:function(e,n,i){var r=this,s=function(){"show"==n.type&&r.reset(),r.transitioning=0,r.$element.trigger(i)};this.$element.trigger(n),n.isDefaultPrevented()||(this.transitioning=1,this.$element[e]("in"),t.support.transition&&this.$element.hasClass("collapse")?this.$element.one(t.support.transition.end,s):s())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=t.fn.collapse;t.fn.collapse=function(n){return this.each(function(){var i=t(this),r=i.data("collapse"),s=t.extend({},t.fn.collapse.defaults,i.data(),"object"==typeof n&&n);r||i.data("collapse",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.collapse.defaults={toggle:!0},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var n,i=t(this),r=i.attr("data-target")||e.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=t(r).data("collapse")?"toggle":i.data();i[t(r).hasClass("in")?"addClass":"removeClass"]("collapsed"),t(r).collapse(s)})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.prototype={cycle:function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(e){var n=this.getActiveIndex(),i=this;if(!(e>this.$items.length-1||0>e))return this.sliding?this.$element.one("slid",function(){i.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",t(this.$items[e]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition.end&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(e,n){var i,r=this.$element.find(".item.active"),s=n||r[e](),o=this.interval,a="next"==e?"left":"right",u="next"==e?"first":"last",c=this;if(this.sliding=!0,o&&this.pause(),s=s.length?s:this.$element.find(".item")[u](),i=t.Event("slide",{relatedTarget:s[0],direction:a}),!s.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var e=t(c.$indicators.children()[c.getActiveIndex()]);e&&e.addClass("active")})),t.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(i),i.isDefaultPrevented())return;s.addClass(e),s[0].offsetWidth,r.addClass(a),s.addClass(a),this.$element.one(t.support.transition.end,function(){s.removeClass([e,a].join(" ")).addClass("active"),r.removeClass(["active",a].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger("slid")},0)})}else{if(this.$element.trigger(i),i.isDefaultPrevented())return;r.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return o&&this.cycle(),this}}};var n=t.fn.carousel;t.fn.carousel=function(n){return this.each(function(){var i=t(this),r=i.data("carousel"),s=t.extend({},t.fn.carousel.defaults,"object"==typeof n&&n),o="string"==typeof n?n:s.slide;r||i.data("carousel",r=new e(this,s)),"number"==typeof n?r.to(n):o?r[o]():s.interval&&r.pause().cycle()})},t.fn.carousel.defaults={interval:5e3,pause:"hover"},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var n,i,r=t(this),s=t(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),o=t.extend({},s.data(),r.data());s.carousel(o),(i=r.attr("data-slide-to"))&&s.data("carousel").pause().to(i).cycle(),e.preventDefault()})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=t(this.options.menu),this.shown=!1,this.listen()};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:e.top+e.height,left:e.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source,e?this.process(e):this)},process:function(e){var n=this;return e=t.grep(e,function(t){return n.matcher(t)}),e=this.sorter(e),e.length?this.render(e.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,n=[],i=[],r=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?i.push(e):r.push(e):n.push(e);return n.concat(i,r)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var n=this;return e=t(e).map(function(e,i){return e=t(n.options.item).attr("data-value",i),e.find("a").html(n.highlighter(i)),e[0]}),e.first().addClass("active"),this.$menu.html(e),this},next:function(){var e=this.$menu.find(".active").removeClass("active"),n=e.next();n.length||(n=t(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),e=t.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=t.fn.typeahead;t.fn.typeahead=function(n){return this.each(function(){var i=t(this),r=i.data("typeahead"),s="object"==typeof n&&n;r||i.data("typeahead",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=n,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var e=t(this);e.data("typeahead")||e.typeahead(e.data())})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.options=t.extend({},t.fn.affix.defaults,n),this.$window=t(window).on("scroll.affix.data-api",t.proxy(this.checkPosition,this)).on("click.affix.data-api",t.proxy(function(){setTimeout(t.proxy(this.checkPosition,this),1)},this)),this.$element=t(e),this.checkPosition()};e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e,n=t(document).height(),i=this.$window.scrollTop(),r=this.$element.offset(),s=this.options.offset,o=s.bottom,a=s.top,u="affix affix-top affix-bottom";"object"!=typeof s&&(o=a=s),"function"==typeof a&&(a=s.top()),"function"==typeof o&&(o=s.bottom()),e=null!=this.unpin&&i+this.unpin<=r.top?!1:null!=o&&r.top+this.$element.height()>=n-o?"bottom":null!=a&&a>=i?"top":!1,this.affixed!==e&&(this.affixed=e,this.unpin="bottom"==e?r.top-i:null,this.$element.removeClass(u).addClass("affix"+(e?"-"+e:"")))}};var n=t.fn.affix;t.fn.affix=function(n){return this.each(function(){var i=t(this),r=i.data("affix"),s="object"==typeof n&&n;r||i.data("affix",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.affix.Constructor=e,t.fn.affix.defaults={offset:0},t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),n=e.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.affix(n)})})}(window.jQuery),function(){var t,e,n,i,r,s,o,a,u,c,h,l,f,d,p,g,m,v,_,y,b,w,x,C,S,k,P,T,A,E,M,j,N,D,O,L,I,z,F,B,$,R,q,H,U,W={}.hasOwnProperty,V=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};o=10,l=null,M=null,w=null,k={},c=null,z=(null!=(U=document.cookie.match(/request_method=(\w+)/))?U[1].toUpperCase():void 0)||"",H=null,m=function(t){var e;return R("page:fetch"),e=L(t),null!=H&&H.abort(),H=new XMLHttpRequest,H.open("GET",e,!0),H.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),H.setRequestHeader("X-XHR-Referer",M),H.onload=function(){var e;return R("page:receive"),(e=A())?(j(t),a.apply(null,p(e)),N(),document.location.hash?document.location.href=document.location.href:B(),R("page:load")):document.location.href=t},H.onloadend=function(){return H=null},H.onabort=function(){return O()},H.onerror=function(){return document.location.href=t},H.send()},g=function(t){var e;return s(),e=k[t],null!=H&&H.abort(),a(e.title,e.body),E(e),R("page:restore")},s=function(){return k[l.position]={url:document.location.href,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset},u(o)},T=function(t){return null==t&&(t=o),/^[\d]+$/.test(t)?o=parseInt(t):void 0},u=function(t){var e,n;for(e in k)W.call(k,e)&&(n=k[e],e<=l.position-t&&(k[e]=null))},a=function(e,n,i,r){return document.title=e,document.documentElement.replaceChild(n,document.body),null!=i&&t.update(i),I(),r&&f(),l=window.history.state,R("page:change")},f=function(){var t,e,n,i,r,s,o,a,u,c,h,l;for(s=Array.prototype.slice.call(document.body.querySelectorAll('script:not([data-turbolinks-eval="false"])')),o=0,u=s.length;u>o;o++)if(r=s[o],""===(h=r.type)||"text/javascript"===h){for(e=document.createElement("script"),l=r.attributes,a=0,c=l.length;c>a;a++)t=l[a],e.setAttribute(t.name,t.value);e.appendChild(document.createTextNode(r.innerHTML)),i=r.parentNode,n=r.nextSibling,i.removeChild(r),i.insertBefore(e,n)}},I=function(){var t,e,n,i;for(e=Array.prototype.slice.call(document.body.getElementsByTagName("noscript")),n=0,i=e.length;i>n;n++)t=e[n],t.parentNode.removeChild(t)},j=function(t){return t!==M?window.history.pushState({turbolinks:!0,position:l.position+1},"",t):void 0},N=function(){var t,e;return(t=H.getResponseHeader("X-XHR-Redirected-To"))?(e=L(t)===t?document.location.hash:"",window.history.replaceState(l,"",t+e)):void 0},O=function(){return window.history.replaceState({turbolinks:!0,position:Date.now()},"",document.location.href)},D=function(){return l=window.history.state},E=function(t){return window.scrollTo(t.positionX,t.positionY)},B=function(){return window.scrollTo(0,0)},L=function(t){var e;return e=t,null==t.href&&(e=document.createElement("A"),e.href=t),e.href.replace(e.hash,"")},R=function(t){var e;return e=document.createEvent("Events"),e.initEvent(t,!0,!0),document.dispatchEvent(e)},P=function(){return!R("page:before-change")},A=function(){var t,e,n,i,r,s;return e=function(){var t;return 400<=(t=H.status)&&600>t},s=function(){return H.getResponseHeader("Content-Type").match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/)},i=function(t){var e,n,i,r,s;for(r=t.head.childNodes,s=[],n=0,i=r.length;i>n;n++)e=r[n],null!=("function"==typeof e.getAttribute?e.getAttribute("data-turbolinks-track"):void 0)&&s.push(e.src||e.href);return s},t=function(t){var e;return w||(w=i(document)),e=i(t),e.length!==w.length||r(e,w).length!==w.length},r=function(t,e){var n,i,r,s,o;for(t.length>e.length&&(s=[e,t],t=s[0],e=s[1]),o=[],i=0,r=t.length;r>i;i++)n=t[i],V.call(e,n)>=0&&o.push(n);return o},!e()&&s()&&(n=c(H.responseText),n&&!t(n))?n:void 0
},p=function(e){var n;return n=e.querySelector("title"),[null!=n?n.textContent:void 0,e.body,t.get(e).token,"runScripts"]},t={get:function(t){var e;return null==t&&(t=document),{node:e=t.querySelector('meta[name="csrf-token"]'),token:null!=e?"function"==typeof e.getAttribute?e.getAttribute("content"):void 0:void 0}},update:function(t){var e;return e=this.get(),null!=e.token&&null!=t&&e.token!==t?e.node.setAttribute("content",t):void 0}},n=function(){var t,e,n,i,r,s;e=function(t){return(new DOMParser).parseFromString(t,"text/html")},t=function(t){var e;return e=document.implementation.createHTMLDocument(""),e.documentElement.innerHTML=t,e},n=function(t){var e;return e=document.implementation.createHTMLDocument(""),e.open("replace"),e.write(t),e.close(),e};try{if(window.DOMParser)return r=e("<html><body><p>test"),e}catch(o){return i=o,r=t("<html><body><p>test"),t}finally{if(1!==(null!=r?null!=(s=r.body)?s.childNodes.length:void 0:void 0))return n}},b=function(t){return t.defaultPrevented?void 0:(document.removeEventListener("click",v,!1),document.addEventListener("click",v,!1))},v=function(t){var e;return t.defaultPrevented||(e=d(t),"A"!==e.nodeName||_(t,e))?void 0:(P()||q(e.href),t.preventDefault())},d=function(t){var e;for(e=t.target;e.parentNode&&"A"!==e.nodeName;)e=e.parentNode;return e},h=function(t){return location.protocol!==t.protocol||location.host!==t.host},e=function(t){return(t.hash&&L(t))===L(location)||t.href===location.href+"#"},C=function(t){var e;return e=L(t),e.match(/\.[a-z]+(\?.*)?$/g)&&!e.match(/\.html?(\?.*)?$/g)},x=function(t){for(var e;!e&&t!==document;)e=null!=t.getAttribute("data-no-turbolink"),t=t.parentNode;return e},$=function(t){return 0!==t.target.length},S=function(t){return t.which>1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey},_=function(t,n){return h(n)||e(n)||C(n)||x(n)||$(n)||S(t)},y=function(){return O(),D(),c=n(),document.addEventListener("click",b,!0),window.addEventListener("popstate",function(t){var e;return e=t.state,(null!=e?e.turbolinks:void 0)?k[e.position]?g(e.position):q(t.target.location.href):void 0},!1)},r=window.history&&window.history.pushState&&window.history.replaceState&&void 0!==window.history.state,i=!navigator.userAgent.match(/CriOS\//),F="GET"===z||""===z,r&&i&&F?(q=function(t){return M=document.location.href,s(),m(t)},y()):q=function(t){return document.location.href=t},this.Turbolinks={visit:q,pagesCached:T}}.call(this),function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,s=Function.prototype,o=i.push,a=i.slice,u=i.concat,c=r.toString,h=r.hasOwnProperty,l=i.forEach,f=i.map,d=i.reduce,p=i.reduceRight,g=i.filter,m=i.every,v=i.some,_=i.indexOf,y=i.lastIndexOf,b=Array.isArray,w=Object.keys,x=s.bind,C=function(t){return t instanceof C?t:this instanceof C?(this._wrapped=t,void 0):new C(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):t._=C,C.VERSION="1.5.1";var S=C.each=C.forEach=function(t,e,i){if(null!=t)if(l&&t.forEach===l)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,s=t.length;s>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var o in t)if(C.has(t,o)&&e.call(i,t[o],o,t)===n)return};C.map=C.collect=function(t,e,n){var i=[];return null==t?i:f&&t.map===f?t.map(e,n):(S(t,function(t,r,s){i.push(e.call(n,t,r,s))}),i)};var k="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),d&&t.reduce===d)return i&&(e=C.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(S(t,function(t,s,o){r?n=e.call(i,n,t,s,o):(n=t,r=!0)}),!r)throw new TypeError(k);return n},C.reduceRight=C.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return i&&(e=C.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var s=t.length;if(s!==+s){var o=C.keys(t);s=o.length}if(S(t,function(a,u,c){u=o?o[--s]:--s,r?n=e.call(i,n,t[u],u,c):(n=t[u],r=!0)}),!r)throw new TypeError(k);return n},C.find=C.detect=function(t,e,n){var i;return P(t,function(t,r,s){return e.call(n,t,r,s)?(i=t,!0):void 0}),i},C.filter=C.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(S(t,function(t,r,s){e.call(n,t,r,s)&&i.push(t)}),i)},C.reject=function(t,e,n){return C.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},C.every=C.all=function(t,e,i){e||(e=C.identity);var r=!0;return null==t?r:m&&t.every===m?t.every(e,i):(S(t,function(t,s,o){return(r=r&&e.call(i,t,s,o))?void 0:n}),!!r)};var P=C.some=C.any=function(t,e,i){e||(e=C.identity);var r=!1;return null==t?r:v&&t.some===v?t.some(e,i):(S(t,function(t,s,o){return r||(r=e.call(i,t,s,o))?n:void 0}),!!r)};C.contains=C.include=function(t,e){return null==t?!1:_&&t.indexOf===_?-1!=t.indexOf(e):P(t,function(t){return t===e})},C.invoke=function(t,e){var n=a.call(arguments,2),i=C.isFunction(e);return C.map(t,function(t){return(i?e:t[e]).apply(t,n)})},C.pluck=function(t,e){return C.map(t,function(t){return t[e]})},C.where=function(t,e,n){return C.isEmpty(e)?n?void 0:[]:C[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},C.findWhere=function(t,e){return C.where(t,e,!0)},C.max=function(t,e,n){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&C.isEmpty(t))return-1/0;var i={computed:-1/0,value:-1/0};return S(t,function(t,r,s){var o=e?e.call(n,t,r,s):t;o>i.computed&&(i={value:t,computed:o})}),i.value},C.min=function(t,e,n){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&C.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return S(t,function(t,r,s){var o=e?e.call(n,t,r,s):t;o<i.computed&&(i={value:t,computed:o})}),i.value},C.shuffle=function(t){var e,n=0,i=[];return S(t,function(t){e=C.random(n++),i[n-1]=i[e],i[e]=t}),i};var T=function(t){return C.isFunction(t)?t:function(e){return e[t]}};C.sortBy=function(t,e,n){var i=T(e);return C.pluck(C.map(t,function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index<e.index?-1:1}),"value")};var A=function(t,e,n,i){var r={},s=T(null==e?C.identity:e);return S(t,function(e,o){var a=s.call(n,e,o,t);i(r,a,e)}),r};C.groupBy=function(t,e,n){return A(t,e,n,function(t,e,n){(C.has(t,e)?t[e]:t[e]=[]).push(n)})},C.countBy=function(t,e,n){return A(t,e,n,function(t,e){C.has(t,e)||(t[e]=0),t[e]++})},C.sortedIndex=function(t,e,n,i){n=null==n?C.identity:T(n);for(var r=n.call(i,e),s=0,o=t.length;o>s;){var a=s+o>>>1;n.call(i,t[a])<r?s=a+1:o=a}return s},C.toArray=function(t){return t?C.isArray(t)?a.call(t):t.length===+t.length?C.map(t,C.identity):C.values(t):[]},C.size=function(t){return null==t?0:t.length===+t.length?t.length:C.keys(t).length},C.first=C.head=C.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:a.call(t,0,e)},C.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},C.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},C.rest=C.tail=C.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},C.compact=function(t){return C.filter(t,C.identity)};var E=function(t,e,n){return e&&C.every(t,C.isArray)?u.apply(n,t):(S(t,function(t){C.isArray(t)||C.isArguments(t)?e?o.apply(n,t):E(t,e,n):n.push(t)}),n)};C.flatten=function(t,e){return E(t,e,[])},C.without=function(t){return C.difference(t,a.call(arguments,1))},C.uniq=C.unique=function(t,e,n,i){C.isFunction(e)&&(i=n,n=e,e=!1);var r=n?C.map(t,n,i):t,s=[],o=[];return S(r,function(n,i){(e?i&&o[o.length-1]===n:C.contains(o,n))||(o.push(n),s.push(t[i]))}),s},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(t){var e=a.call(arguments,1);return C.filter(C.uniq(t),function(t){return C.every(e,function(e){return C.indexOf(e,t)>=0})})},C.difference=function(t){var e=u.apply(i,a.call(arguments,1));return C.filter(t,function(t){return!C.contains(e,t)})},C.zip=function(){for(var t=C.max(C.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=C.pluck(arguments,""+n);return e},C.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},C.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=C.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(_&&t.indexOf===_)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},C.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(y&&t.lastIndexOf===y)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},C.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,s=new Array(i);i>r;)s[r++]=t,t+=n;return s};var M=function(){};C.bind=function(t,e){var n,i;if(x&&t.bind===x)return x.apply(t,a.call(arguments,1));if(!C.isFunction(t))throw new TypeError;return n=a.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(a.call(arguments)));M.prototype=t.prototype;var r=new M;M.prototype=null;var s=t.apply(r,n.concat(a.call(arguments)));return Object(s)===s?s:r}},C.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},C.bindAll=function(t){var e=a.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return S(e,function(e){t[e]=C.bind(t[e],t)}),t},C.memoize=function(t,e){var n={};return e||(e=C.identity),function(){var i=e.apply(this,arguments);return C.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},C.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},C.defer=function(t){return C.delay.apply(C,[t,1].concat(a.call(arguments,1)))},C.throttle=function(t,e,n){var i,r,s,o=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:new Date,o=null,s=t.apply(i,r)};return function(){var c=new Date;a||n.leading!==!1||(a=c);var h=e-(c-a);return i=this,r=arguments,0>=h?(clearTimeout(o),o=null,a=c,s=t.apply(i,r)):o||n.trailing===!1||(o=setTimeout(u,h)),s}},C.debounce=function(t,e,n){var i,r=null;return function(){var s=this,o=arguments,a=function(){r=null,n||(i=t.apply(s,o))},u=n&&!r;return clearTimeout(r),r=setTimeout(a,e),u&&(i=t.apply(s,o)),i}},C.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},C.wrap=function(t,e){return function(){var n=[t];return o.apply(n,arguments),e.apply(this,n)}},C.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},C.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},C.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)C.has(t,n)&&e.push(n);return e},C.values=function(t){var e=[];for(var n in t)C.has(t,n)&&e.push(t[n]);return e},C.pairs=function(t){var e=[];for(var n in t)C.has(t,n)&&e.push([n,t[n]]);return e},C.invert=function(t){var e={};for(var n in t)C.has(t,n)&&(e[t[n]]=n);return e},C.functions=C.methods=function(t){var e=[];for(var n in t)C.isFunction(t[n])&&e.push(n);return e.sort()},C.extend=function(t){return S(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},C.pick=function(t){var e={},n=u.apply(i,a.call(arguments,1));return S(n,function(n){n in t&&(e[n]=t[n])}),e},C.omit=function(t){var e={},n=u.apply(i,a.call(arguments,1));for(var r in t)C.contains(n,r)||(e[r]=t[r]);return e},C.defaults=function(t){return S(a.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},C.clone=function(t){return C.isObject(t)?C.isArray(t)?t.slice():C.extend({},t):t},C.tap=function(t,e){return e(t),t};var j=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof C&&(t=t._wrapped),e instanceof C&&(e=e._wrapped);var r=c.call(t);if(r!=c.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=n.length;s--;)if(n[s]==t)return i[s]==e;var o=t.constructor,a=e.constructor;if(o!==a&&!(C.isFunction(o)&&o instanceof o&&C.isFunction(a)&&a instanceof a))return!1;n.push(t),i.push(e);var u=0,h=!0;if("[object Array]"==r){if(u=t.length,h=u==e.length)for(;u--&&(h=j(t[u],e[u],n,i)););}else{for(var l in t)if(C.has(t,l)&&(u++,!(h=C.has(e,l)&&j(t[l],e[l],n,i))))break;if(h){for(l in e)if(C.has(e,l)&&!u--)break;h=!u}}return n.pop(),i.pop(),h};C.isEqual=function(t,e){return j(t,e,[],[])},C.isEmpty=function(t){if(null==t)return!0;if(C.isArray(t)||C.isString(t))return 0===t.length;for(var e in t)if(C.has(t,e))return!1;return!0},C.isElement=function(t){return!(!t||1!==t.nodeType)},C.isArray=b||function(t){return"[object Array]"==c.call(t)},C.isObject=function(t){return t===Object(t)},S(["Arguments","Function","String","Number","Date","RegExp"],function(t){C["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),C.isArguments(arguments)||(C.isArguments=function(t){return!(!t||!C.has(t,"callee"))}),"function"!=typeof/./&&(C.isFunction=function(t){return"function"==typeof t}),C.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},C.isNaN=function(t){return C.isNumber(t)&&t!=+t},C.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},C.isNull=function(t){return null===t},C.isUndefined=function(t){return void 0===t},C.has=function(t,e){return h.call(t,e)},C.noConflict=function(){return t._=e,this},C.identity=function(t){return t},C.times=function(t,e,n){for(var i=Array(Math.max(0,t)),r=0;t>r;r++)i[r]=e.call(n,r);return i},C.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};N.unescape=C.invert(N.escape);var D={escape:new RegExp("["+C.keys(N.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(N.unescape).join("|")+")","g")};C.each(["escape","unescape"],function(t){C[t]=function(e){return null==e?"":(""+e).replace(D[t],function(e){return N[t][e]})}}),C.result=function(t,e){if(null==t)return void 0;var n=t[e];return C.isFunction(n)?n.call(t):n},C.mixin=function(t){S(C.functions(t),function(e){var n=C[e]=t[e];C.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),F.call(this,n.apply(C,t))}})};var O=0;C.uniqueId=function(t){var e=++O+"";return t?t+e:e},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(t,e,n){var i;n=C.defaults({},n,C.templateSettings);var r=new RegExp([(n.escape||L).source,(n.interpolate||L).source,(n.evaluate||L).source].join("|")+"|$","g"),s=0,o="__p+='";t.replace(r,function(e,n,i,r,a){return o+=t.slice(s,a).replace(z,function(t){return"\\"+I[t]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(o+="';\n"+r+"\n__p+='"),s=a+e.length,e}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=new Function(n.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(e)return i(e,C);var u=function(t){return i.call(this,t,C)};return u.source="function("+(n.variable||"obj")+"){\n"+o+"}",u},C.chain=function(t){return C(t).chain()};var F=function(t){return this._chain?C(t).chain():t};C.mixin(C),S(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];C.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],F.call(this,n)}}),S(["concat","join","slice"],function(t){var e=i[t];C.prototype[t]=function(){return F.call(this,e.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this);var paper=new function(){var t=new function(){function e(t,e,n,i,s,o){function u(i,r,o,u){var r=r||(r=f(e,i))&&(r.get?r:r.value);"string"==typeof r&&"#"===r[0]&&(r=t[r.substring(1)]||r);var h,l="function"==typeof r,d=r,g=s||l?r&&r.get?i in t:t[i]:null;!(o||void 0!==r&&e.hasOwnProperty(i))||s&&g||(l&&g&&(r.base=g),l&&c&&0===r.length&&(h=i.match(/^(get|is)(([A-Z])(.*))$/))&&c.push([h[3].toLowerCase()+h[4],h[2]]),d&&!l&&d.get||(d={value:d,writable:!0}),(f(t,i)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=n),p(t,i,d)),!u||!l||s&&u[i]||(u[i]=function(e){return e&&t[i].apply(e,a.call(arguments,1))})}var c;if(e){c=[];for(var h in e)e.hasOwnProperty(h)&&!r.test(h)&&u(h,null,!0,o);u("toString"),u("valueOf");for(var l=0,d=c&&c.length;d>l;l++)try{var g=c[l],m=g[1];u(g[0],{get:t["get"+m]||t["is"+m],set:t["set"+m]},!0)}catch(v){}}return t}function n(e,n,i,r){try{e&&(r||"undefined"==typeof r&&h(e)?u:c).call(e,n,i=i||e)}catch(s){if(s!==t.stop)throw s}return i}function i(t){return n(t,function(t,e){this[e]=t},new t.constructor)}var r=/^(statics|generics|preserve|enumerable|prototype|toString|valueOf)$/,s=Object.prototype.toString,o=Array.prototype,a=o.slice,u=o.forEach||function(t,e){for(var n=0,i=this.length;i>n;n++)t.call(e,this[n],n,this)},c=function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)},h=Array.isArray=Array.isArray||function(t){return"[object Array]"===s.call(t)},l=Object.create||function(t){return{__proto__:t}},f=Object.getOwnPropertyDescriptor||function(t,e){var n=t.__lookupGetter__&&t.__lookupGetter__(e);return n?{get:n,set:t.__lookupSetter__(e),enumerable:!0,configurable:!0}:t.hasOwnProperty(e)?{value:t[e],enumerable:!0,configurable:!0,writable:!0}:null},d=Object.defineProperty||function(t,e,n){return(n.get||n.set)&&t.__defineGetter__?(n.get&&t.__defineGetter__(e,n.get),n.set&&t.__defineSetter__(e,n.set)):t[e]=n.value,t},p=function(t,e,n){return delete t[e],d(t,e,n)};return e(function(){},{inject:function(t){if(t){var n=this.prototype,i=Object.getPrototypeOf(n).constructor,r=t.statics===!0?t:t.statics;r!=t&&e(n,t,t.enumerable,i&&i.prototype,t.preserve,t.generics&&this),e(this,r,!0,i,t.preserve)}for(var s=1,o=arguments.length;o>s;s++)this.inject(arguments[s]);return this},extend:function(){for(var t,n=this,i=0,r=arguments.length;r>i&&!(t=arguments[i].initialize);i++);return t=t||function(){n.apply(this,arguments)},t.prototype=l(this.prototype),p(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),e(t,this,!0),arguments.length?this.inject.apply(t,arguments):t}},!0).inject({inject:function(){for(var t=0,n=arguments.length;n>t;t++)e(this,arguments[t],arguments[t].enumerable);return this},extend:function(){var t=l(this);return t.inject.apply(t,arguments)},each:function(t,e){return n(this,t,e)},clone:function(){return i(this)},statics:{each:n,clone:i,define:p,describe:f,create:function(t){return l(t.prototype)},isPlainObject:function(e){var n=null!=e&&e.constructor;return n&&(n===Object||n===t||"Object"===n.name)},check:function(t){return!(!t&&0!==t)},pick:function(){for(var t=0,e=arguments.length;e>t;t++)if(void 0!==arguments[t])return arguments[t];return null},stop:{}}})};"undefined"!=typeof module&&(module.exports=t),t.inject({generics:!0,clone:function(){return new this.constructor(this)},toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+t.each(this,function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?s.instance.number(t):"string"===n?"'"+t+"'":t))}},[]).join(", ")+" }"},exportJSON:function(e){return t.exportJSON(this,e)},toJSON:function(){return t.serialize(this)},_set:function(e,n){if(e&&t.isPlainObject(e)){for(var i in e)!(e.hasOwnProperty(i)&&i in this)||n&&n[i]||(this[i]=e[i]);return!0}},statics:{exports:{},extend:function ee(){var e=ee.base.apply(this,arguments),n=e.prototype._class;return n&&!t.exports[n]&&(t.exports[n]=e),e},equals:function(e,n){function i(t,e){for(var n in t)if(t.hasOwnProperty(n)&&"undefined"==typeof e[n])return!1;return!0}if(e===n)return!0;if(e&&e.equals)return e.equals(n);if(n&&n.equals)return n.equals(e);if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;for(var r=0,s=e.length;s>r;r++)if(!t.equals(e[r],n[r]))return!1;return!0}if(e&&"object"==typeof e&&n&&"object"==typeof n){if(!i(e,n)||!i(n,e))return!1;for(var r in e)if(e.hasOwnProperty(r)&&!t.equals(e[r],n[r]))return!1;return!0}return!1},read:function(e,n,i,r){if(this===t){var s=this.peek(e,n);return e._index++,e.__read=1,s}var o=this.prototype,a=o._readIndex,u=n||a&&e._index||0;i||(i=e.length-u);var c=e[u];return c instanceof this||r&&r.readNull&&null==c&&1>=i?(a&&(e._index=u+1),c&&r&&r.clone?c.clone():c):(c=t.create(this),a&&(c.__read=!0),r&&(c.__options=r),c=c.initialize.apply(c,u>0||i<e.length?Array.prototype.slice.call(e,u,u+i):e)||c,a&&(e._index=u+c.__read,e.__read=c.__read,delete c.__read,r&&delete c.__options),c)},peek:function(t,e){return t[t._index=e||t._index||0]},readAll:function(t,e,n){for(var i,r=[],s=e||0,o=t.length;o>s;s++)r.push(Array.isArray(i=t[s])?this.read(i,0,0,n):this.read(t,s,1,n));return r},readNamed:function(t,e,n,i,r){var s=this.getNamed(t,e);return this.read(null!=s?[s]:t,n,i,r)},getNamed:function(e,n){var i=e[0];return void 0===e._hasObject&&(e._hasObject=1===e.length&&t.isPlainObject(i)),e._hasObject?n?i[n]:i:void 0},hasNamed:function(t,e){return!!this.getNamed(t,e)},isPlainValue:function(t){return this.isPlainObject(t)||Array.isArray(t)},serialize:function(e,n,i,r){n=n||{};var o,a=!r;if(a&&(n.formatter=new s(n.precision),r={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,i=this.references[n];if(!i){this.length++;var r=e.call(t),s=t._class;s&&r[0]!==s&&r.unshift(s),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),e&&e._serialize){o=e._serialize(n,r);var u=e._class;!u||i||o._compact||o[0]===u||o.unshift(u)}else if(Array.isArray(e)){o=[];for(var c=0,h=e.length;h>c;c++)o[c]=t.serialize(e[c],n,i,r);i&&(o._compact=!0)}else if(t.isPlainObject(e)){o={};for(var c in e)e.hasOwnProperty(c)&&(o[c]=t.serialize(e[c],n,i,r))}else o="number"==typeof e?n.formatter.number(e,n.precision):e;return a&&r.length>0?[["dictionary",r.definitions],o]:o},deserialize:function(e,n){var i=e;if(n=n||{},Array.isArray(e)){var r=e[0],s="dictionary"===r;if(!s){if(n.dictionary&&1==e.length&&/^#/.test(r))return n.dictionary[r];r=t.exports[r]}i=[];for(var o=r?1:0,a=e.length;a>o;o++)i.push(t.deserialize(e[o],n));if(s)n.dictionary=i[0];else if(r){var u=i;i=t.create(r),r.apply(i,u)}}else if(t.isPlainObject(e)){i={};for(var c in e)i[c]=t.deserialize(e[c],n)}return i},exportJSON:function(e,n){return JSON.stringify(t.serialize(e,n))},importJSON:function(e){return t.deserialize("string"==typeof e?JSON.parse(e):e)},splice:function(t,e,n,i){var r=e&&e.length,s=void 0===n;n=s?t.length:n,n>t.length&&(n=t.length);for(var o=0;r>o;o++)e[o]._index=n+o;if(s)return t.push.apply(t,e),[];var a=[n,i];e&&a.push.apply(a,e);for(var u=t.splice.apply(t,a),o=0,c=u.length;c>o;o++)delete u[o]._index;for(var o=n+r,c=t.length;c>o;o++)t[o]._index=o;return u},merge:function(){return t.each(arguments,function(e){t.each(e,function(t,e){this[e]=t},this)},new t,!0)},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var e={attach:function(e,n){if("string"!=typeof e)return t.each(e,function(t,e){this.attach(e,t)},this),void 0;var i=this._eventTypes[e];if(i){var r=this._handlers=this._handlers||{};r=r[e]=r[e]||[],-1==r.indexOf(n)&&(r.push(n),i.install&&1==r.length&&i.install.call(this,e))}},detach:function(e,n){if("string"!=typeof e)return t.each(e,function(t,e){this.detach(e,t)},this),void 0;var i,r=this._eventTypes[e],s=this._handlers&&this._handlers[e];r&&s&&(!n||-1!=(i=s.indexOf(n))&&1==s.length?(r.uninstall&&r.uninstall.call(this,e),delete this._handlers[e]):-1!=i&&s.splice(i,1))},once:function(t,e){this.attach(t,function(){e.apply(this,arguments),this.detach(t,e)})},fire:function(e,n){var i=this._handlers&&this._handlers[e];if(!i)return!1;var r=[].slice.call(arguments,1);return t.each(i,function(t){t.apply(this,r)===!1&&n&&n.stop&&n.stop()},this),!0},responds:function(t){return!(!this._handlers||!this._handlers[t])},on:"#attach",off:"#detach",trigger:"#fire",statics:{inject:function ne(){for(var e=0,n=arguments.length;n>e;e++){var i=arguments[e],r=i._events;if(r){var s={};t.each(r,function(e,n){var r="string"==typeof e,o=r?e:n,a=t.capitalize(o),u=o.substring(2).toLowerCase();s[u]=r?{}:e,o="_"+o,i["get"+a]=function(){return this[o]},i["set"+a]=function(t){t?this.attach(u,t):this[o]&&this.detach(u,this[o]),this[o]=t}}),i._eventTypes=s}ne.base.call(this,i)}return this}}},n=t.extend({_class:"PaperScope",initialize:function ie(t){if(paper=this,this.project=null,this.projects=[],this.tools=[],this.palettes=[],this._id=t&&(t.getAttribute("id")||t.src)||"paperscope-"+ie._id++,t&&t.setAttribute("id",this._id),ie._scopes[this._id]=this,!this.support){var e=Y.getContext(1,1);ie.prototype.support={nativeDash:"setLineDash"in e||"mozDash"in e,nativeBlendModes:Q.nativeModes},Y.release(e)}},version:"0.9.9",getView:function(){return this.project&&this.project.view},getTool:function(){return this._tool||(this._tool=new G),this._tool},evaluate:function(t){var e=paper.PaperScript.evaluate(t,this);return q.updateFocus(),e},install:function(e){var n=this;t.each(["project","view","tool"],function(i){t.define(e,i,{configurable:!0,get:function(){return n[i]}})});for(var i in this)/^(version|_id)/.test(i)||i in e||(e[i]=this[i])},setup:function(t){return paper=this,this.project=new m(t),this},activate:function(){paper=this},clear:function(){for(var t=this.projects.length-1;t>=0;t--)this.projects[t].remove();for(var t=this.tools.length-1;t>=0;t--)this.tools[t].remove();for(var t=this.palettes.length-1;t>=0;t--)this.palettes[t].remove()},remove:function(){this.clear(),delete n._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return"object"==typeof t&&(t=t.getAttribute("id")),this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),r=t.extend(e,{initialize:function(t){this._scope=paper,this._index=this._scope[this._list].push(this)-1,(t||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!=this&&t.fire("deactivate"),this._scope[this._reference]=this,this.fire("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null==this._index?!1:(t.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)}}),s=t.extend({initialize:function(t){this.precision=t||5,this.multiplier=Math.pow(10,this.precision)},number:function(t){return Math.round(t*this.multiplier)/this.multiplier},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});s.instance=new s(5);var o=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,i=Math.sqrt,r=Math.pow,s=Math.cos,a=Math.PI;return{TOLERANCE:1e-5,EPSILON:1e-11,KAPPA:4*(i(2)-1)/3,isZero:function(t){return n(t)<=this.EPSILON},integrate:function(n,i,r,s){for(var o=t[s-2],a=e[s-2],u=.5*(r-i),c=u+i,h=0,l=s+1>>1,f=1&s?a[h++]*n(c):0;l>h;){var d=u*o[h];f+=a[h++]*(n(c+d)+n(c-d))}return u*f},findRoot:function(t,e,i,r,s,o,a){for(var u=0;o>u;u++){var c=t(i),h=c/e(i);if(n(h)<a)return i;var l=i-h;c>0?(s=i,i=r>=l?.5*(r+s):l):(r=i,i=l>=s?.5*(r+s):l)}},solveQuadratic:function(t,e,r,s){var o=this.EPSILON;if(n(t)<o)return n(e)>=o?(s[0]=-r/e,1):n(r)<o?-1:0;var a=e*e-4*t*r;if(0>a)return 0;a=i(a),t*=2;var u=0;return s[u++]=(-e-a)/t,a>0&&(s[u++]=(-e+a)/t),u},solveCubic:function(t,e,u,c,h){var l=this.EPSILON;if(n(t)<l)return o.solveQuadratic(e,u,c,h);e/=t,u/=t,c/=t;var f=e*e,d=(f-3*u)/9,p=(2*f*e-9*e*u+27*c)/54,g=d*d*d,m=p*p-g;if(e/=3,n(m)<l){if(n(p)<l)return h[0]=-e,1;var v=i(d),_=p>0?1:-1;return h[0]=2*-_*v-e,h[1]=_*v-e,2}if(0>m){var v=i(d),y=Math.acos(p/(v*v*v))/3,b=-2*v,w=2*a/3;return h[0]=b*s(y)-e,h[1]=b*s(y+w)-e,h[2]=b*s(y-w)-e,3}var x=(p>0?-1:1)*r(n(p)+i(m),1/3);return h[0]=x+d/x-e,1}}},a=t.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t;if("number"===n){var i="number"==typeof e;this.x=t,this.y=i?e:t,this.__read&&(this.__read=i?2:1)}else"undefined"===n||null===t?(this.x=this.y=0,this.__read&&(this.__read=null===t?1:0)):(Array.isArray(t)?(this.x=t[0],this.y=t.length>1?t[1]:t[0]):null!=t.x?(this.x=t.x,this.y=t.y):null!=t.width?(this.x=t.width,this.y=t.height):null!=t.angle?(this.x=t.length,this.y=0,this.setAngle(t.angle)):(this.x=this.y=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1))},set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return t===this||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new a(this.x,this.y)},toString:function(){var t=s.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},add:function(t){return t=a.read(arguments),new a(this.x+t.x,this.y+t.y)},subtract:function(t){return t=a.read(arguments),new a(this.x-t.x,this.y-t.y)},multiply:function(t){return t=a.read(arguments),new a(this.x*t.x,this.y*t.y)},divide:function(t){return t=a.read(arguments),new a(this.x/t.x,this.y/t.y)},modulo:function(t){return t=a.read(arguments),new a(this.x%t.x,this.y%t.y)},negate:function(){return new a(-this.x,-this.y)
},transform:function(t){return t?t._transformPoint(this):this},getDistance:function(t,e){t=a.read(arguments);var n=t.x-this.x,i=t.y-this.y,r=n*n+i*i;return e?r:Math.sqrt(r)},getLength:function(){var t=this.x*this.x+this.y*this.y;return arguments.length&&arguments[0]?t:Math.sqrt(t)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this.set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();o.isZero(n)&&this.getAngle(),this.set(this.x*n,this.y*n)}return this},normalize:function(t){void 0===t&&(t=1);var e=this.getLength(),n=0!==e?t/e:0,i=new a(this.x*n,this.y*n);return i._angle=this._angle,i},getAngle:function(){return 180*this.getAngleInRadians(arguments[0])/Math.PI},setAngle:function(t){if(t=this._angle=t*Math.PI/180,!this.isZero()){var e=this.getLength();this.set(Math.cos(t)*e,Math.sin(t)*e)}return this},getAngleInRadians:function(){if(void 0===arguments[0])return null==this._angle&&(this._angle=Math.atan2(this.y,this.x)),this._angle;var t=a.read(arguments),e=this.getLength()*t.getLength();return o.isZero(e)?0/0:Math.acos(this.dot(t)/e)},getAngleInDegrees:function(){return this.getAngle(arguments[0])},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3},getDirectedAngle:function(t){return t=a.read(arguments),180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t),r=Math.cos(t);return n=new a(n.x*r-n.y*i,n.y*r+n.x*i),e?n.add(e):n},isInside:function(t){return t.contains(this)},isClose:function(t,e){return this.getDistance(t)<e},isColinear:function(t){return this.cross(t)<1e-5},isOrthogonal:function(t){return this.dot(t)<1e-5},isZero:function(){return o.isZero(this.x)&&o.isZero(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},dot:function(t){return t=a.read(arguments),this.x*t.x+this.y*t.y},cross:function(t){return t=a.read(arguments),this.x*t.y-this.y*t.x},project:function(t){if(t=a.read(arguments),t.isZero())return new a(0,0);var e=this.dot(t)/t.dot(t);return new a(t.x*e,t.y*e)},statics:{min:function(){var t=a.read(arguments);return point2=a.read(arguments),new a(Math.min(t.x,point2.x),Math.min(t.y,point2.y))},max:function(){var t=a.read(arguments);return point2=a.read(arguments),new a(Math.max(t.x,point2.x),Math.max(t.y,point2.y))},random:function(){return new a(Math.random(),Math.random())}}},t.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new a(e(this.x),e(this.y))}},{})),u=a.extend({initialize:function(t,e,n,i){this._x=t,this._y=e,this._owner=n,this._setter=i},set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)}}),c=t.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t;if("number"===n){var i="number"==typeof e;this.width=t,this.height=i?e:t,this.__read&&(this.__read=i?2:1)}else"undefined"===n||null===t?(this.width=this.height=0,this.__read&&(this.__read=null===t?1:0)):(Array.isArray(t)?(this.width=t[0],this.height=t.length>1?t[1]:t[0]):null!=t.width?(this.width=t.width,this.height=t.height):null!=t.x?(this.width=t.x,this.height=t.y):(this.width=this.height=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1))},set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new c(this.width,this.height)},toString:function(){var t=s.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(t){return t=c.read(arguments),new c(this.width+t.width,this.height+t.height)},subtract:function(t){return t=c.read(arguments),new c(this.width-t.width,this.height-t.height)},multiply:function(t){return t=c.read(arguments),new c(this.width*t.width,this.height*t.height)},divide:function(t){return t=c.read(arguments),new c(this.width/t.width,this.height/t.height)},modulo:function(t){return t=c.read(arguments),new c(this.width%t.width,this.height%t.height)},negate:function(){return new c(-this.width,-this.height)},isZero:function(){return o.isZero(this.width)&&o.isZero(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new c(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new c(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new c(Math.random(),Math.random())}}},t.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new c(e(this.width),e(this.height))}},{})),h=c.extend({initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i},set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),f=t.extend({_class:"Rectangle",_readIndex:!0,initialize:function(e,n,i,r){var s=typeof e,o=0;if("number"===s?(this.x=e,this.y=n,this.width=i,this.height=r,o=4):"undefined"===s||null===e?(this.x=this.y=this.width=this.height=0,o=null===e?1:0):1===arguments.length&&(Array.isArray(e)?(this.x=e[0],this.y=e[1],this.width=e[2],this.height=e[3],o=1):void 0!==e.x||void 0!==e.width?(this.x=e.x||0,this.y=e.y||0,this.width=e.width||0,this.height=e.height||0,o=1):void 0===e.from&&void 0===e.to&&(this.x=this.y=this.width=this.height=0,this._set(e),o=1)),!o){var u=a.readNamed(arguments,"from"),h=t.peek(arguments);if(this.x=u.x,this.y=u.y,h&&void 0!==h.x||t.hasNamed(arguments,"to")){var l=a.readNamed(arguments,"to");this.width=l.x-u.x,this.height=l.y-u.y,this.width<0&&(this.x=l.x,this.width=-this.width),this.height<0&&(this.y=l.y,this.height=-this.height)}else{var f=c.read(arguments);this.width=f.width,this.height=f.height}o=arguments._index}this.__read&&(this.__read=o)},set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return new f(this.x,this.y,this.width,this.height)},equals:function(e){return t.isPlainValue(e)&&(e=f.read(arguments)),e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=s.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(){return new(arguments[0]?a:u)(this.x,this.y,this,"setPoint")},setPoint:function(t){t=a.read(arguments),this.x=t.x,this.y=t.y},getSize:function(){return new(arguments[0]?c:h)(this.width,this.height,this,"setSize")},setSize:function(t){t=c.read(arguments),this._fixX&&(this.x+=(this.width-t.width)*this._fixX),this._fixY&&(this.y+=(this.height-t.height)*this._fixY),this.width=t.width,this.height=t.height,this._fixW=1,this._fixH=1},getLeft:function(){return this.x},setLeft:function(t){this._fixW||(this.width-=t-this.x),this.x=t,this._fixX=0},getTop:function(){return this.y},setTop:function(t){this._fixH||(this.height-=t-this.y),this.y=t,this._fixY=0},getRight:function(){return this.x+this.width},setRight:function(t){void 0!==this._fixX&&1!==this._fixX&&(this._fixW=0),this._fixW?this.x=t-this.width:this.width=t-this.x,this._fixX=1},getBottom:function(){return this.y+this.height},setBottom:function(t){void 0!==this._fixY&&1!==this._fixY&&(this._fixH=0),this._fixH?this.y=t-this.height:this.height=t-this.y,this._fixY=1},getCenterX:function(){return this.x+.5*this.width},setCenterX:function(t){this.x=t-.5*this.width,this._fixX=.5},getCenterY:function(){return this.y+.5*this.height},setCenterY:function(t){this.y=t-.5*this.height,this._fixY=.5},getCenter:function(){return new(arguments[0]?a:u)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(t){return t=a.read(arguments),this.setCenterX(t.x),this.setCenterY(t.y),this},isEmpty:function(){return 0==this.width||0==this.height},contains:function(t){return t&&void 0!==t.width||4==(Array.isArray(t)?t:arguments).length?this._containsRectangle(f.read(arguments)):this._containsPoint(a.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(t){return t=f.read(arguments),t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x+this.width&&t.y<this.y+this.height},touches:function(t){return t=f.read(arguments),t.x+t.width>=this.x&&t.y+t.height>=this.y&&t.x<=this.x+this.width&&t.y<=this.y+this.height},intersect:function(t){t=f.read(arguments);var e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),i=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height);return new f(e,n,i-e,r-n)},unite:function(t){t=f.read(arguments);var e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return new f(e,n,i-e,r-n)},include:function(t){t=a.read(arguments);var e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);return new f(e,n,i-e,r-n)},expand:function(t,e){return void 0===e&&(e=t),new f(this.x-t/2,this.y-e/2,this.width+t,this.height+e)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(void 0===e?t:e)-this.height)}},new function(){return t.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var n=t.join(""),i=/^[RL]/.test(n);e>=4&&(t[1]+=i?"Y":"X");var r=t[i?0:1],s=t[i?1:0],o="get"+r,c="get"+s,h="set"+r,l="set"+s,f="get"+n,d="set"+n;this[f]=function(){return new(arguments[0]?a:u)(this[o](),this[c](),this,d)},this[d]=function(t){t=a.read(arguments),this[h](t.x),this[l](t.y)}},{})}),d=f.extend({initialize:function(t,e,n,i,r,s){this.set(t,e,n,i,!0),this._owner=r,this._setter=s},set:function(t,e,n,i,r){return this._x=t,this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var e=f.prototype;return t.each(["x","y","width","height"],function(e){var n=t.capitalize(e),i="_"+e;this["get"+n]=function(){return this[i]},this["set"+n]=function(t){this[i]=t,this._dontNotify||this._owner[this._setter](this)}},t.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var n="set"+t;this[n]=function(){this._dontNotify=!0,e[n].apply(this,arguments),delete this._dontNotify,this._owner[this._setter](this)}},{isSelected:function(){return this._owner._boundsSelected},setSelected:function(t){var e=this._owner;e.setSelected&&(e._boundsSelected=t,e.setSelected(t||e._selectedSegmentState>0))}}))}),p=t.extend({_class:"Matrix",initialize:function re(t){var e=arguments.length,n=!0;if(6==e?this.set.apply(this,arguments):1==e?t instanceof re?this.set(t._a,t._c,t._b,t._d,t._tx,t._ty):Array.isArray(t)?this.set.apply(this,t):n=!1:0==e?this.reset():n=!1,!n)throw new Error("Unsupported matrix parameters")},set:function(t,e,n,i,r,s){return this._a=t,this._c=e,this._b=n,this._d=i,this._tx=r,this._ty=s,this},_serialize:function(e){return t.serialize(this.getValues(),e)},clone:function(){return new p(this._a,this._c,this._b,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a==t._a&&this._b==t._b&&this._c==t._c&&this._d==t._d&&this._tx==t._tx&&this._ty==t._ty||!1},toString:function(){var t=s.instance;return"[["+[t.number(this._a),t.number(this._b),t.number(this._tx)].join(", ")+"], ["+[t.number(this._c),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(){return this._a=this._d=1,this._c=this._b=this._tx=this._ty=0,this},scale:function(){var t=a.read(arguments),e=a.read(arguments,0,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._c*=t.x,this._b*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this},translate:function(t){t=a.read(arguments);var e=t.x,n=t.y;return this._tx+=e*this._a+n*this._b,this._ty+=e*this._c+n*this._d,this},rotate:function(t,e){e=a.read(arguments,1),t=t*Math.PI/180;var n=e.x,i=e.y,r=Math.cos(t),s=Math.sin(t),o=n-n*r+i*s,u=i-n*s-i*r,c=this._a,h=this._b,l=this._c,f=this._d;return this._a=r*c+s*h,this._b=-s*c+r*h,this._c=r*l+s*f,this._d=-s*l+r*f,this._tx+=o*c+u*h,this._ty+=o*l+u*f,this},shear:function(){var t=a.read(arguments),e=a.read(arguments,0,0,{readNull:!0});e&&this.translate(e);var n=this._a,i=this._c;return this._a+=t.y*this._b,this._c+=t.y*this._d,this._b+=t.x*n,this._d+=t.x*i,e&&this.translate(e.negate()),this},isIdentity:function(){return 1==this._a&&0==this._c&&0==this._b&&1==this._d&&0==this._tx&&0==this._ty},isInvertible:function(){return!!this._getDeterminant()},isSingular:function(){return!this._getDeterminant()},concatenate:function(t){var e=this._a,n=this._b,i=this._c,r=this._d;return this._a=t._a*e+t._c*n,this._b=t._b*e+t._d*n,this._c=t._a*i+t._c*r,this._d=t._b*i+t._d*r,this._tx+=t._tx*e+t._ty*n,this._ty+=t._tx*i+t._ty*r,this},preConcatenate:function(t){var e=this._a,n=this._b,i=this._c,r=this._d,s=this._tx,o=this._ty;return this._a=t._a*e+t._b*i,this._b=t._a*n+t._b*r,this._c=t._c*e+t._d*i,this._d=t._c*n+t._d*r,this._tx=t._a*s+t._b*o+t._tx,this._ty=t._c*s+t._d*o+t._ty,this},transform:function(t,e,n,i,r){return arguments.length<5?this._transformPoint(a.read(arguments)):this._transformCoordinates(t,e,n,i,r)},_transformPoint:function(t,e,n){var i=t.x,r=t.y;return e||(e=new a),e.set(i*this._a+r*this._b+this._tx,i*this._c+r*this._d+this._ty,n)},_transformCoordinates:function(t,e,n,i,r){for(var s=e,o=i,a=e+2*r;a>s;){var u=t[s++],c=t[s++];n[o++]=u*this._a+c*this._b+this._tx,n[o++]=u*this._c+c*this._d+this._ty}return n},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,s=[e,n,i,n,i,r,e,r];return this._transformCoordinates(s,0,s,0,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),s=i.slice(),o=2;8>o;o++){var a=i[o],u=1&o;a<r[u]?r[u]=a:a>s[u]&&(s[u]=a)}return e||(e=new f),e.set(r[0],r[1],s[0]-r[0],s[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(a.read(arguments))},_getDeterminant:function(){var t=this._a*this._d-this._b*this._c;return isFinite(t)&&!o.isZero(t)&&isFinite(this._tx)&&isFinite(this._ty)?t:null},_inverseTransform:function(t,e,n){var i=this._getDeterminant();if(!i)return null;var r=t.x-this._tx,s=t.y-this._ty;return e||(e=new a),e.set((r*this._d-s*this._b)/i,(s*this._a-r*this._c)/i,n)},decompose:function(){var t=this._a,e=this._b,n=this._c,i=this._d;if(o.isZero(t*i-e*n))return null;var r=Math.sqrt(t*t+e*e);t/=r,e/=r;var s=t*n+e*i;n-=t*s,i-=e*s;var u=Math.sqrt(n*n+i*i);return n/=u,i/=u,s/=u,e*n>t*i&&(t=-t,e=-e,s=-s,r=-r),{translation:this.getTranslation(),scaling:new a(r,u),rotation:180*-Math.atan2(e,t)/Math.PI,shearing:s}},getValues:function(){return[this._a,this._c,this._b,this._d,this._tx,this._ty]},getTranslation:function(){return new a(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},inverted:function(){var t=this._getDeterminant();return t&&new p(this._d/t,-this._c/t,-this._b/t,this._a/t,(this._b*this._ty-this._d*this._tx)/t,(this._c*this._tx-this._a*this._ty)/t)},shiftless:function(){return new p(this._a,this._c,this._b,this._d,0,0)},applyToContext:function(t){t.transform(this._a,this._c,this._b,this._d,this._tx,this._ty)}},new function(){return t.each({scaleX:"_a",scaleY:"_d",translateX:"_tx",translateY:"_ty",shearX:"_b",shearY:"_c"},function(e,n){n=t.capitalize(n),this["get"+n]=function(){return this[e]},this["set"+n]=function(t){this[e]=t}},{})}),g=t.extend({_class:"Line",initialize:function(t,e,n,i,r){var s=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=i,s=r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,s=n),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new a(this._px,this._py)},getVector:function(){return new a(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return g.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t){return g.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},getDistance:function(t){return Math.abs(g.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0))},statics:{intersect:function(t,e,n,i,r,s,u,c,h,l){h||(n-=t,i-=e,u-=r,c-=s);var f=c*n-u*i;if(!o.isZero(f)){var d=t-r,p=e-s,g=(u*p-c*d)/f,m=(n*p-i*d)/f;if((l||g>=0&&1>=g)&&(l||m>=0&&1>=m))return new a(t+g*n,e+g*i)}},getSide:function(t,e,n,i,r,s,o){o||(n-=t,i-=e);var a=r-t,u=s-e,c=a*i-u*n;return 0===c&&(c=a*n+u*i,c>0&&(a-=n,u-=i,c=a*n+u*i,0>c&&(c=0))),0>c?-1:c>0?1:0},getSignedDistance:function(t,e,n,i,r,s,o){o||(n-=t,i-=e);var a=i/n,u=e-a*t;return(s-a*r-u)/Math.sqrt(a*a+1)}}}),m=r.extend({_class:"Project",_list:"projects",_reference:"project",initialize:function(t){r.call(this,!0),this.layers=[],this.symbols=[],this._currentStyle=new B,this.activeLayer=new b,t&&(this.view=t instanceof q?t:q.create(t)),this._selectedItems={},this._selectedItemCount=0,this._drawCount=0,this.options={}},_serialize:function(e,n){return t.serialize(this.layers,e,!0,n)},clear:function(){for(var t=this.layers.length-1;t>=0;t--)this.layers[t].remove();this.symbols=[]},remove:function se(){return se.base.call(this)?(this.view&&this.view.remove(),!0):!1},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.initialize(t)},getIndex:function(){return this._index},getSelectedItems:function(){var t=[];for(var e in this._selectedItems){var n=this._selectedItems[e];n._drawCount===this._drawCount&&t.push(n)}return t},_updateSelection:function(t){t._selected?(this._selectedItemCount++,this._selectedItems[t._id]=t,t.isInserted()&&(t._drawCount=this._drawCount)):(this._selectedItemCount--,delete this._selectedItems[t._id])},selectAll:function(){for(var t=0,e=this.layers.length;e>t;t++)this.layers[t].setSelected(!0)},deselectAll:function(){for(var t in this._selectedItems)this._selectedItems[t].setSelected(!1)},hitTest:function(e,n){e=a.read(arguments),n=S.getOptions(t.read(arguments));for(var i=this.layers.length-1;i>=0;i--){var r=this.layers[i].hitTest(e,n);if(r)return r}return null},importJSON:function(e){return this.activate(),t.importJSON(e)},draw:function(e,n){this._drawCount++,e.save(),n.applyToContext(e);for(var i=t.merge({offset:new a(0,0),transforms:[n]}),r=0,s=this.layers.length;s>r;r++)this.layers[r].draw(e,i);if(e.restore(),this._selectedItemCount>0){e.save(),e.strokeWidth=1;for(var o in this._selectedItems){var u=this._selectedItems[o];if(u._drawCount===this._drawCount&&(u._drawSelected||u._boundsSelected)){var c=u.getSelectedColor()||u.getLayer().getSelectedColor();e.strokeStyle=e.fillStyle=c?c.toCanvasStyle(e):"#009dec";var h=u._globalMatrix;if(u._drawSelected&&u._drawSelected(e,h),u._boundsSelected){var l=h._transformCorners(u._getBounds("getBounds"));e.beginPath();for(var r=0;8>r;r++)e[0===r?"moveTo":"lineTo"](l[r],l[++r]);e.closePath(),e.stroke();for(var r=0;8>r;r++)e.beginPath(),e.rect(l[r]-2,l[++r]-2,4,4),e.fill()}}}e.restore()}}}),v=t.extend({_class:"Symbol",initialize:function oe(t,e){this._id=oe._id=(oe._id||0)+1,this.project=paper.project,this.project.symbols.push(this),t&&this.setDefinition(t,e),this._instances={}},_serialize:function(e,n){return n.add(this,function(){return t.serialize([this._class,this._definition],e,!1,n)})},_changed:function(e){t.each(this._instances,function(t){t._changed(e)})},getDefinition:function(){return this._definition},setDefinition:function(t){t._parentSymbol&&(t=t.clone()),this._definition&&delete this._definition._parentSymbol,this._definition=t,t.remove(),t.setSelected(!1),arguments[1]||t.setPosition(new a),t._parentSymbol=this,this._changed(5)},place:function(t){return new C(this,t)},clone:function(){return new v(this._definition.clone(!1))}}),_=t.extend(e,{statics:{extend:function ae(e){e._serializeFields&&(e._serializeFields=t.merge(this.prototype._serializeFields,e._serializeFields));var n=ae.base.apply(this,arguments),i=n.prototype,r=i._class;return r&&(i._type=t.hyphenate(r)),n}},_class:"Item",_transformContent:!0,_boundsSelected:!1,_serializeFields:{name:null,matrix:new p,locked:!1,visible:!0,blendMode:"normal",opacity:1,guide:!1,clipMask:!1,data:{}},initialize:function(){},_initialize:function(t,e){if(this._id=_._id=(_._id||0)+1,!this._project){var n=paper.project,i=n.activeLayer;!i||t&&t.insert===!1?this._setProject(n):i.addChild(this)}return this._style=new B(this._project._currentStyle,this),this._matrix=new p,e&&this._matrix.translate(e),t?this._set(t,{insert:!0}):!0},_events:new function(){var e={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}},n={install:function(t){var n=this._project.view._eventCounters;if(n)for(var i in e)n[i]=(n[i]||0)+(e[i][t]||0)},uninstall:function(t){var n=this._project.view._eventCounters;if(n)for(var i in e)n[i]-=e[i][t]||0}};return t.each(["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"],function(t){this[t]=n},{onFrame:{install:function(){this._project.view._animateItem(this,!0)},uninstall:function(){this._project.view._animateItem(this,!1)}},onLoad:{}})},_serialize:function(e,n){function i(i){for(var o in i){var a=s[o];t.equals(a,i[o])||(r[o]=t.serialize(a,e,"data"!==o,n))}}var r={},s=this;return i(this._serializeFields),this instanceof y||i(this._style._defaults),[this._class,r]},_changed:function(t){var e=this._parent,n=this._project,i=this._parentSymbol;if(4&t&&(delete this._bounds,delete this._position),e&&12&t&&e._clearBoundsCache(),2&t&&this._clearBoundsCache(),n&&(1&t&&(n._needsRedraw=!0),n._changes)){var r=n._changesById[this._id];r?r.flags|=t:(r={item:this,flags:t},n._changesById[this._id]=r,n._changes.push(r))}i&&i._changed(t)},set:function(t){return t&&this._set(t),this},getId:function(){return this._id},getType:function(){return this._type},getName:function(){return this._name},setName:function(t,e){if(this._name&&this._removeFromNamed(),t&&this._parent){for(var n=this._parent._children,i=this._parent._namedChildren,r=t,s=1;e&&n[t];)t=r+" "+s++;(i[t]=i[t]||[]).push(this),n[t]=this}this._name=t||void 0,this._changed(32)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)},hasFill:function(){return!!this.getStyle().getFillColor()},hasStroke:function(){var t=this.getStyle();return!!t.getStrokeColor()&&t.getStrokeWidth()>0}},t.each(["locked","visible","blendMode","opacity","guide"],function(e){var n=t.capitalize(e),e="_"+e;this["get"+n]=function(){return this[e]},this["set"+n]=function(t){t!=this[e]&&(this[e]=t,this._changed("_locked"===e?32:33))}},{}),{_locked:!1,_visible:!0,_blendMode:"normal",_opacity:1,_guide:!1,isSelected:function(){if(this._children)for(var t=0,e=this._children.length;e>t;t++)if(this._children[t].isSelected())return!0;return this._selected},setSelected:function(t){if(this._children&&!arguments[1])for(var e=0,n=this._children.length;n>e;e++)this._children[e].setSelected(t);(t=!!t)!=this._selected&&(this._selected=t,this._project._updateSelection(this),this._changed(33))},_selected:!1,isFullySelected:function(){if(this._children&&this._selected){for(var t=0,e=this._children.length;e>t;t++)if(!this._children[t].isFullySelected())return!1;return!0}return this._selected},setFullySelected:function(t){if(this._children)for(var e=0,n=this._children.length;n>e;e++)this._children[e].setFullySelected(t);this.setSelected(t,!0)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(33),this._parent&&this._parent._changed(256))},_clipMask:!1,getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(){var t=this._position||(this._position=this.getBounds().getCenter(!0));return new(arguments[0]?a:u)(t.x,t.y,this,"setPosition")},setPosition:function(){this.translate(a.read(arguments).subtract(this.getPosition(!0)))},getMatrix:function(){return this._matrix},setMatrix:function(t){this._matrix.initialize(t),this._changed(5)},isEmpty:function(){return 0==this._children.length}},t.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],function(t){this[t]=function(){var e=this._boundsGetter,n=this._getCachedBounds("string"==typeof e?e:e&&e[t]||t,arguments[0]);return"getBounds"===t?new d(n.x,n.y,n.width,n.height,this,"setBounds"):n}},{_getCachedBounds:function(t,e,n){var i=(!e||e.equals(this._matrix))&&t;if(n&&this._parent){var r=n._id,s=this._parent._boundsCache=this._parent._boundsCache||{ids:{},list:[]};s.ids[r]||(s.list.push(n),s.ids[r]=n)}if(i&&this._bounds&&this._bounds[i])return this._bounds[i].clone();var o=this._matrix.isIdentity();e=!e||e.isIdentity()?o?null:this._matrix:o?e:e.clone().concatenate(this._matrix);var a=this._getBounds(t,e,i?this:n);return i&&(this._bounds||(this._bounds={}),this._bounds[i]=a.clone()),a},_clearBoundsCache:function(){if(this._boundsCache){for(var t=0,e=this._boundsCache.list,n=e.length;n>t;t++){var i=e[t];delete i._bounds,i!=this&&i._boundsCache&&i._clearBoundsCache()}delete this._boundsCache}},_getBounds:function(t,e,n){var i=this._children;if(!i||0==i.length)return new f;for(var r=1/0,s=-r,o=r,a=s,u=0,c=i.length;c>u;u++){var h=i[u];if(h._visible&&!h.isEmpty()){var l=h._getCachedBounds(t,e,n);r=Math.min(l.x,r),o=Math.min(l.y,o),s=Math.max(l.x+l.width,s),a=Math.max(l.y+l.height,a)}}return isFinite(r)?new f(r,o,s-r,a-o):new f},setBounds:function(t){t=f.read(arguments);var e=this.getBounds(),n=new p,i=t.getCenter();n.translate(i),(t.width!=e.width||t.height!=e.height)&&n.scale(0!=e.width?t.width/e.width:1,0!=e.height?t.height/e.height:1),i=e.getCenter(),n.translate(-i.x,-i.y),this.transform(n)}}),{getProject:function(){return this._project},_setProject:function(t){if(this._project!=t&&(this._project=t,this._children))for(var e=0,n=this._children.length;n>e;e++)this._children[e]._setProject(t)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof b)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){return this._parent&&this._parent._children[this._index+1]||null},getPreviousSibling:function(){return this._parent&&this._parent._children[this._index-1]||null},getIndex:function(){return this._index},isInserted:function(){return this._parent?this._parent.isInserted():!1},clone:function(t){return this._clone(new this.constructor({insert:!1}),t)},_clone:function(t,e){if(t.setStyle(this._style),this._children)for(var n=0,i=this._children.length;i>n;n++)t.addChild(this._children[n].clone(!1),!0);(e||void 0===e)&&t.insertAbove(this);for(var r=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],n=0,i=r.length;i>n;n++){var s=r[n];this.hasOwnProperty(s)&&(t[s]=this[s])}return t._matrix.initialize(this._matrix),t.setSelected(this._selected),this._name&&t.setName(this._name,!0),t},copyTo:function(t){var e=this.clone();return t.layers?t.activeLayer.addChild(e):t.addChild(e),e},rasterize:function(e){var n=this.getStrokeBounds(),i=(e||72)/72,r=n.getTopLeft().floor(),s=n.getBottomRight().ceil();size=new c(s.subtract(r)),canvas=Y.getCanvas(size),ctx=canvas.getContext("2d"),matrix=(new p).scale(i).translate(r.negate()),ctx.save(),matrix.applyToContext(ctx),this.draw(ctx,t.merge({transforms:[matrix]}));var o=new x(canvas);return o.setPosition(r.add(size.divide(2))),ctx.restore(),o},contains:function(){return!!this._contains(this._matrix._inverseTransform(a.read(arguments)))},_contains:function(t){if(this._children){for(var e=this._children.length-1;e>=0;e--)if(this._children[e].contains(t))return!0;return!1}return t.isInside(this._getBounds("getBounds"))},hitTest:function(e,n){function i(i,r){var a=o["get"+r]();return e.getDistance(a)<n.tolerance?new S(i,s,{name:t.hyphenate(r),point:a}):void 0}if(e=a.read(arguments),n=S.getOptions(t.read(arguments)),this._locked||!this._visible||this._guide&&!n.guides)return null;if(!this._children&&!this.getRoughBounds().expand(n.tolerance)._containsPoint(e))return null;e=this._matrix._inverseTransform(e);var r,s=this;if(!(!n.center&&!n.bounds||this instanceof b&&!this._parent)){var o=this._getBounds("getBounds");if(n.center&&(r=i("center","Center")),!r&&n.bounds)for(var u=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],c=0;8>c&&!r;c++)r=i("bounds",u[c])}return(r||(r=this._children||!(n.guides&&!this._guide||n.selected&&!this._selected)?this._hitTest(e,n):null))&&r.point&&(r.point=s._matrix.transform(r.point)),r},_hitTest:function(t,e){if(this._children){for(var n,i=this._children.length-1;i>=0;i--)if(n=this._children[i].hitTest(t,e))return n}else if(e.fill&&this.hasFill()&&this._contains(t))return new S("fill",this)},importJSON:function(e){return this.addChild(t.importJSON(e))},addChild:function(t,e){return this.insertChild(void 0,t,e)},insertChild:function(t,e,n){var i=this.insertChildren(t,[e],n);return i&&i[0]},addChildren:function(t,e){return this.insertChildren(this._children.length,t,e)},insertChildren:function(e,n,i,r){var s=this._children;if(s&&n&&n.length>0){n=Array.prototype.slice.apply(n);for(var o=n.length-1;o>=0;o--){var a=n[o];r&&a._type!==r?n.splice(o,1):a._remove(!0)}t.splice(s,n,e,0);for(var o=0,u=n.length;u>o;o++){var a=n[o];a._parent=this,a._setProject(this._project),a._name&&a.setName(a._name)}this._changed(7)}else n=null;return n},_insert:function(t,e,n){if(!e._parent)return null;var i=e._index+(t?1:0);return e._parent===this._parent&&i>this._index&&i--,e._parent.insertChild(i,this,n)},insertAbove:function(t,e){return this._insert(!0,t,e)},insertBelow:function(t,e){return this._insert(!1,t,e)},sendToBack:function(){return this._parent.insertChild(0,this)},bringToFront:function(){return this._parent.addChild(this)},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",_removeFromNamed:function(){var t=this._parent._children,e=this._parent._namedChildren,n=this._name,i=e[n],r=i?i.indexOf(this):-1;-1!=r&&(t[n]==this&&delete t[n],i.splice(r,1),i.length?t[n]=i[i.length-1]:delete e[n])},_remove:function(e){return this._parent?(this._name&&this._removeFromNamed(),null!=this._index&&t.splice(this._parent._children,null,this._index,1),e&&this._parent._changed(7),this._parent=null,!0):!1},remove:function(){return this._remove(!0)},removeChildren:function(e,n){if(!this._children)return null;e=e||0,n=t.pick(n,this._children.length);for(var i=t.splice(this._children,null,e,n-e),r=i.length-1;r>=0;r--)i[r]._remove(!1);return i.length>0&&this._changed(7),i},reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;e>t;t++)this._children[t]._index=t;this._changed(7)}},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},_getOrder:function(t){function e(t){var e=[];do e.unshift(t);while(t=t._parent);return e}for(var n=e(this),i=e(t),r=0,s=Math.min(n.length,i.length);s>r;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e==t)return!0;return!1},isAncestor:function(t){return t?t.isDescendant(this):!1},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(group|layer|compound-path)$/.test(e._type)&&t.isDescendant(e))return!0;
e=e._parent}return!1},scale:function(t,e,n){return(arguments.length<2||"object"==typeof e)&&(n=e,e=t),this.transform((new p).scale(t,e,n||this.getPosition(!0)))},translate:function(){var t=new p;return this.transform(t.translate.apply(t,arguments))},rotate:function(t,e){return this.transform((new p).rotate(t,e||this.getPosition(!0)))},shear:function(t,e,n){return(arguments.length<2||"object"==typeof e)&&(n=e,e=t),this.transform((new p).shear(t,e,n||this.getPosition(!0)))},transform:function(t){var e=this._bounds,n=this._position;if(this._matrix.preConcatenate(t),(this._transformContent||arguments[1])&&this.applyMatrix(!0),this._changed(5),e&&0===t.getRotation()%90){for(var i in e){var r=e[i];t._transformBounds(r,r)}var s=this._boundsGetter,r=e[s&&s.getBounds||s||"getBounds"];r&&(this._position=r.getCenter(!0)),this._bounds=e}else n&&(this._position=t._transformPoint(n,n));return this},_applyMatrix:function(t,e){var n=this._children;if(n&&n.length>0){for(var i=0,r=n.length;r>i;i++)n[i].transform(t,e);return!0}},applyMatrix:function(t){var e=this._matrix;if(this._applyMatrix(e,!0)){var n=this._style,i=n.getFillColor(!0),r=n.getStrokeColor(!0);i&&i.transform(e),r&&r.transform(e),e.reset()}t||this._changed(5)},fitBounds:function(t,e){t=f.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width,s=(e?i>r:r>i)?t.width/n.width:t.height/n.height,o=new f(new a,new c(n.width*s,n.height*s));o.setCenter(t.getCenter()),this.setBounds(o)},_setStyles:function(t){var e=this._style,n=e.getStrokeWidth(),i=e.getStrokeJoin(),r=e.getStrokeCap(),s=e.getMiterLimit(),o=e.getFillColor(),a=e.getStrokeColor(),u=e.getShadowColor();if(null!=n&&(t.lineWidth=n),i&&(t.lineJoin=i),r&&(t.lineCap=r),s&&(t.miterLimit=s),o&&(t.fillStyle=o.toCanvasStyle(t)),a){t.strokeStyle=a.toCanvasStyle(t);var c=e.getDashArray(),h=e.getDashOffset();paper.support.nativeDash&&c&&c.length&&("setLineDash"in t?(t.setLineDash(c),t.lineDashOffset=h):(t.mozDash=c,t.mozDashOffset=h))}if(u){t.shadowColor=u.toCanvasStyle(t),t.shadowBlur=e.getShadowBlur();var l=this.getShadowOffset();t.shadowOffsetX=l.x,t.shadowOffsetY=l.y}},draw:function(t,e){if(this._visible&&0!==this._opacity){this._drawCount=this._project._drawCount;var n=e.transforms,i=n[n.length-1],r=i.clone().concatenate(this._matrix);n.push(this._globalMatrix=r);var s,o,a,u=this._blendMode,h=this._opacity,l="normal"===u,f=Q.nativeModes[u],d=l&&1===h||(f||l&&1>h)&&this._canComposite();if(!d){var p=this.getStrokeBounds(i);if(!p.width||!p.height)return;a=e.offset,o=e.offset=p.getTopLeft().floor(),s=t,t=Y.getContext(p.getSize().ceil().add(new c(1,1)))}t.save(),d?(t.globalAlpha=h,f&&(t.globalCompositeOperation=u)):t.translate(-o.x,-o.y),(d?this._matrix:r).applyToContext(t),!d&&e.clipItem&&e.clipItem.draw(t,e.extend({clip:!0})),this._draw(t,e),t.restore(),n.pop(),e.clip&&t.clip(),d||(Q.process(u,t,s,h,o.subtract(a)),Y.release(t),e.offset=a)}},_canComposite:function(){return!1}},t.each(["down","drag","up","move"],function(e){this["removeOn"+t.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}})),y=_.extend({_class:"Group",_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function ue(t){ue.base.call(this,t),2&t&&this._transformContent&&!this._matrix.isIdentity()&&this.applyMatrix(),258&t&&delete this._clipItem},_getClipItem:function(){if(void 0!==this._clipItem)return this._clipItem;for(var t=0,e=this._children.length;e>t;t++){var n=this._children[t];if(n._clipMask)return this._clipItem=n}return this._clipItem=null},getTransformContent:function(){return this._transformContent},setTransformContent:function(t){this._transformContent=t,t&&this.applyMatrix()},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_draw:function(t,e){var n=e.clipItem=this._getClipItem();n&&n.draw(t,e.extend({clip:!0}));for(var i=0,r=this._children.length;r>i;i++){var s=this._children[i];s!==n&&s.draw(t,e)}e.clipItem=null}}),b=y.extend({_class:"Layer",initialize:function(){this._project=paper.project,this._index=this._project.layers.push(this)-1,y.apply(this,arguments),this.activate()},_remove:function ce(e){return this._parent?ce.base.call(this,e):null!=this._index?(this._project.activeLayer===this&&(this._project.activeLayer=this.getNextSibling()||this.getPreviousSibling()),t.splice(this._project.layers,null,this._index,1),this._project._needsRedraw=!0,!0):!1},getNextSibling:function he(){return this._parent?he.base.call(this):this._project.layers[this._index+1]||null},getPreviousSibling:function le(){return this._parent?le.base.call(this):this._project.layers[this._index-1]||null},isInserted:function fe(){return this._parent?fe.base.call(this):null!=this._index},activate:function(){this._project.activeLayer=this},_insert:function de(e,n,i){return n instanceof b&&!n._parent&&this._remove(!0)?(t.splice(n._project.layers,[this],n._index+(e?1:0),0),this._setProject(n._project),this):de.base.call(this,e,n,i)}}),w=_.extend({_class:"Shape",_transformContent:!1,initialize:function(t,e,n,i){this._initialize(i,e),this._type=t,this._size=n},getSize:function(){var t=this._size;return new h(t.width,t.height,this,"setSize")},setSize:function(){var t=c.read(arguments);this._size.equals(t)||(this._size.set(t.width,t.height),this._changed(5))},getRadius:function(){var t=this._size;return(t.width+t.height)/4},setRadius:function(t){var e=2*t;this.setSize(e,e)},_draw:function(t,e){var n=this._style,i=this._size,r=i.width,s=i.height,a=n.getFillColor(),u=n.getStrokeColor();if(a||u||e.clip)switch(t.beginPath(),this._type){case"rect":t.rect(-r/2,-s/2,r,s);break;case"circle":t.arc(0,0,(r+s)/4,0,2*Math.PI,!0);break;case"ellipse":var c=r/2,h=s/2,l=o.KAPPA,f=c*l,d=h*l;t.moveTo(-c,0),t.bezierCurveTo(-c,-d,-f,-h,0,-h),t.bezierCurveTo(f,-h,c,-d,c,0),t.bezierCurveTo(c,d,f,h,0,h),t.bezierCurveTo(-f,h,-c,d,-c,0)}e.clip||!a&&!u||(this._setStyles(t),a&&t.fill(),u&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new f(this._size).setCenter(0,0);return"getBounds"!==t&&this.hasStroke()&&(n=n.expand(this.getStrokeWidth())),e?e._transformBounds(n):n},_contains:function pe(t){switch(this._type){case"rect":return pe.base.call(this,t);case"circle":case"ellipse":return t.divide(this._size).getLength()<=.5}},_hitTest:function ge(t){if(this.hasStroke()){var e=this._type,n=this.getStrokeWidth();switch(e){case"rect":var i=new f(this._size).setCenter(0,0),r=i.expand(n),s=i.expand(-n);if(r._containsPoint(t)&&!s._containsPoint(t))return new S("stroke",this);break;case"circle":case"ellipse":var o,a=this._size,u=a.width,c=a.height;if("ellipse"===e){var h=t.getAngleInRadians(),l=u*Math.sin(h),d=c*Math.cos(h);o=u*c/(2*Math.sqrt(l*l+d*d))}else o=(u+c)/4;if(2*Math.abs(t.getLength()-o)<=n)return new S("stroke",this)}}return ge.base.apply(this,arguments)},statics:new function(){function e(e,n,i,r){return new w(e,n,i,t.getNamed(r))}return{Circle:function(){var n=a.readNamed(arguments,"center"),i=t.readNamed(arguments,"radius");return e("circle",n,new c(2*i),arguments)},Rectangle:function(){var t=f.readNamed(arguments,"rectangle");return e("rect",t.getCenter(!0),t.getSize(!0),arguments)},Ellipse:function(){var t=f.readNamed(arguments,"rectangle");return e("ellipse",t.getCenter(!0),t.getSize(!0),arguments)}}}}),x=_.extend({_class:"Raster",_transformContent:!1,_boundsGetter:"getBounds",_boundsSelected:!0,_serializeFields:{source:null},initialize:function(t,e){this._initialize(t,void 0!==e&&a.read(arguments,1))||(t.getContext?this.setCanvas(t):"string"==typeof t?this.setSource(t):this.setImage(t)),this._size||(this._size=new c)},clone:function(t){var e={insert:!1},n=this._image;if(n)e.image=n;else if(this._canvas){var i=e.canvas=Y.getCanvas(this._size);i.getContext("2d").drawImage(this._canvas,0,0)}return this._clone(new x(e),t)},getSize:function(){var t=this._size;return new h(t.width,t.height,this,"setSize")},setSize:function(){var t=c.read(arguments);if(!this._size.equals(t)){var e=this.getElement();this.setCanvas(Y.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}},getWidth:function(){return this._size.width},getHeight:function(){return this._size.height},isEmpty:function(){return 0==this._size.width&&0==this._size.height},getPpi:function(){var t=this._matrix,e=new a(0,0).transform(t),n=new a(1,0).transform(t).subtract(e),i=new a(0,1).transform(t).subtract(e);return new c(72/n.getLength(),72/i.getLength())},getContext:function(){return this._context||(this._context=this.getCanvas().getContext("2d")),arguments[0]&&(this._image=null,this._changed(129)),this._context},setContext:function(t){this._context=t},getCanvas:function(){if(!this._canvas){var t=Y.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){Y.release(t)}}return this._canvas},setCanvas:function(t){this._canvas&&Y.release(this._canvas),this._canvas=t,this._size=new c(t.width,t.height),this._image=null,this._context=null,this._changed(133)},getImage:function(){return this._image},setImage:function(t){this._canvas&&Y.release(this._canvas),this._image=t,this._size=new c(t.width,t.height),this._canvas=null,this._context=null,this._changed(5)},getSource:function(){return this._image&&this._image.src||this.toDataURL()},setSource:function(t){function e(){n.fire("load"),n._project.view&&n._project.view.draw(!0)}var n=this,i=document.getElementById(t)||new Image;i.width&&i.height?setTimeout(e,0):i.src||(R.add(i,{load:function(){n.setImage(i),e()}}),i.src=t),this.setImage(i)},getElement:function(){return this._canvas||this._image},getSubImage:function(t){t=f.read(arguments);var e=Y.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},toDataURL:function(){var t=this._image&&this._image.src;if(/^data:/.test(t))return t;var e=this.getCanvas();return e?e.toDataURL():null},drawImage:function(t,e){e=a.read(arguments,1),this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(e){var n,i;e?e instanceof E?(i=e,n=e.getBounds()):e.width?n=new f(e):e.x&&(n=new f(e.x-.5,e.y-.5,1,1)):n=this.getBounds();var r=32,s=Math.min(n.width,r),o=Math.min(n.height,r),a=x._sampleContext;a?a.clearRect(0,0,r+1,r+1):a=x._sampleContext=Y.getContext(new c(r)),a.save();var u=(new p).scale(s/n.width,o/n.height).translate(-n.x,-n.y);u.applyToContext(a),i&&i.draw(a,t.merge({clip:!0,transforms:[u]})),this._matrix.applyToContext(a),a.drawImage(this.getElement(),-this._size.width/2,-this._size.height/2),a.restore();for(var h=a.getImageData(.5,.5,Math.ceil(s),Math.ceil(o)).data,l=[0,0,0],d=0,g=0,m=h.length;m>g;g+=4){var v=h[g+3];d+=v,v/=255,l[0]+=h[g]*v,l[1]+=h[g+1]*v,l[2]+=h[g+2]*v}for(var g=0;3>g;g++)l[g]/=d;return d?I.read(l):null},getPixel:function(t){t=a.read(arguments);var e=this.getContext().getImageData(t.x,t.y,1,1).data;return new I("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=a.read(arguments),e=I.read(arguments),n=e._convert("rgb"),i=e._alpha,r=this.getContext(!0),s=r.createImageData(1,1),o=s.data;o[0]=255*n[0],o[1]=255*n[1],o[2]=255*n[2],o[3]=null!=i?255*i:255,r.putImageData(s,t.x,t.y)},createImageData:function(t){return t=c.read(arguments),this.getContext().createImageData(t.width,t.height)},getImageData:function(t){return t=f.read(arguments),t.isEmpty()&&(t=new f(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t,e){e=a.read(arguments,1),this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new f(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTest:function(t){if(this._contains(t)){var e=this;return new S("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),C=_.extend({_class:"PlacedSymbol",_transformContent:!1,_boundsGetter:{getBounds:"getStrokeBounds"},_boundsSelected:!0,_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,void 0!==e&&a.read(arguments,1))||this.setSymbol(t instanceof v?t:new v(t))},getSymbol:function(){return this._symbol},setSymbol:function(t){this._symbol&&delete this._symbol._instances[this._id],this._symbol=t,t._instances[this._id]=this},clone:function(t){return this._clone(new C({symbol:this.symbol,insert:!1}),t)},isEmpty:function(){return this._symbol._definition.isEmpty()},_getBounds:function(t,e){return this.symbol._definition._getCachedBounds(t,e)},_hitTest:function(t,e,n){var i=this._symbol._definition._hitTest(t,e,n);return i&&(i.item=this),i},_draw:function(t,e){this.symbol._definition.draw(t,e)}}),S=t.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&(n.enumerable=!0,this.inject(n))},statics:{getOptions:function(e){return e&&e._merged?e:t.merge({type:null,tolerance:paper.project.options.hitTolerance||2,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1,_merged:!0},e)}}}),k=t.extend({_class:"Segment",initialize:function(t,e,n,i,r,s){var o,a,u,c=arguments.length;0===c||(1===c?t.point?(o=t.point,a=t.handleIn,u=t.handleOut):o=t:6>c?2==c&&void 0===e.x?o=[t,e]:(o=t,a=e,u=n):6===c&&(o=[t,e],a=[n,i],u=[r,s])),this._point=new P(o,this),this._handleIn=new P(a,this),this._handleOut=new P(u,this)},_serialize:function(e){return t.serialize(this.isLinear()?this._point:[this._point,this._handleIn,this._handleOut],e,!0)},_changed:function(t){if(this._path){var e,n=this._path._curves&&this.getCurve();n&&(n._changed(),(e=n[t==this._point||t==this._handleIn&&n._segment1==this?"getPrevious":"getNext"]())&&e._changed()),this._path._changed(5)}},getPoint:function(){return this._point},setPoint:function(t){t=a.read(arguments),this._point.set(t.x,t.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(t){t=a.read(arguments),this._handleIn.set(t.x,t.y)},getHandleOut:function(){return this._handleOut},setHandleOut:function(t){t=a.read(arguments),this._handleOut.set(t.x,t.y)},isLinear:function(){return this._handleIn.isZero()&&this._handleOut.isZero()},setLinear:function(){this._handleIn.set(0,0),this._handleOut.set(0,0)},_isSelected:function(t){var e=this._selectionState;return t==this._point?!!(4&e):t==this._handleIn?!!(1&e):t==this._handleOut?!!(2&e):!1},_setSelected:function(t,e){var n=this._path,e=!!e,i=this._selectionState||0,r=[!!(4&i),!!(1&i),!!(2&i)];if(t==this._point){if(e)r[1]=r[2]=!1;else{var s=this.getPrevious(),o=this.getNext();r[1]=s&&(s._point.isSelected()||s._handleOut.isSelected()),r[2]=o&&(o._point.isSelected()||o._handleIn.isSelected())}r[0]=e}else{var a=t==this._handleIn?1:2;r[a]!=e&&(e&&(r[0]=!1),r[a]=e)}this._selectionState=(r[0]?4:0)|(r[1]?1:0)|(r[2]?2:0),n&&i!=this._selectionState&&(n._updateSelection(this,i,this._selectionState),n._changed(33))},isSelected:function(){return this._isSelected(this._point)},setSelected:function(t){this._setSelected(this._point,t)},getIndex:function(){return void 0!==this._index?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(t._closed||e!=t._segments.length-1||e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new A(t,t.getNext()?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},reverse:function(){return new k(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new k(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,s=n&&this._handleOut.isZero()?null:this._handleOut,o=i._x,a=i._y,u=2;return e[0]=o,e[1]=a,r&&(e[u++]=r._x+o,e[u++]=r._y+a),s&&(e[u++]=s._x+o,e[u++]=s._y+a),t&&(t._transformCoordinates(e,0,e,0,u/2),o=e[0],a=e[1],n?(i._x=o,i._y=a,u=2,r&&(r._x=e[u++]-o,r._y=e[u++]-a),s&&(s._x=e[u++]-o,s._y=e[u++]-a)):(r||(e[u++]=o,e[u++]=a),s||(e[u++]=o,e[u++]=a))),e}}),P=a.extend({initialize:function(t,e){var n,i,r;t?void 0!==(n=t[0])?i=t[1]:(void 0===(n=t.x)&&(t=a.read(arguments),n=t.x),i=t.y,r=t.selected):n=i=0,this._x=n,this._y=i,this._owner=e,r&&this.setSelected(!0)},set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){return o.isZero(this._x)&&o.isZero(this._y)},setSelected:function(t){this._owner._setSelected(this,t)},isSelected:function(){return this._owner._isSelected(this)}}),T=t.extend({_class:"Curve",initialize:function(t,e,n,i,r,s,o,a){var u=arguments.length;if(3===u)this._path=t,this._segment1=e,this._segment2=n;else if(0===u)this._segment1=new k,this._segment2=new k;else if(1===u)this._segment1=new k(t.segment1),this._segment2=new k(t.segment2);else if(2===u)this._segment1=new k(t),this._segment2=new k(e);else{var c,h,l,f;4===u?(c=t,h=e,l=n,f=i):8===u&&(c=[t,e],f=[o,a],h=[n-t,i-e],l=[r-o,s-a]),this._segment1=new k(c,null,h),this._segment2=new k(f,l,null)}},_changed:function(){delete this._length,delete this._bounds},getPoint1:function(){return this._segment1._point},setPoint1:function(t){t=a.read(arguments),this._segment1._point.set(t.x,t.y)},getPoint2:function(){return this._segment2._point},setPoint2:function(t){t=a.read(arguments),this._segment2._point.set(t.x,t.y)},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(t){t=a.read(arguments),this._segment1._handleOut.set(t.x,t.y)},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(t){t=a.read(arguments),this._segment2._handleIn.set(t.x,t.y)},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isSelected:function(){return this.getHandle1().isSelected()&&this.getHandle2().isSelected()},setSelected:function(t){this.getHandle1().setSelected(t),this.getHandle2().setSelected(t)},getValues:function(){return T.getValues(this._segment1,this._segment2)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;8>n;n+=2)e.push(new a(t[n],t[n+1]));return e},getLength:function(){var t=arguments[0],e=arguments[1],n=0===arguments.length||0===t&&1===e;if(n&&null!=this._length)return this._length;var i=T.getLength(this.getValues(),t,e);return n&&(this._length=i),i},getArea:function(){return T.getArea(this.getValues())},getPart:function(t,e){return new T(T.getPart(this.getValues(),t,e))},isLinear:function(){return this._segment1._handleOut.isZero()&&this._segment2._handleIn.isZero()},getIntersections:function(t){return T.getIntersections(this.getValues(),t.getValues(),this,t,[])},reverse:function(){return new T(this._segment2.reverse(),this._segment1.reverse())},_getParameter:function(t,e){return e?t:t&&t.curve===this?t.parameter:void 0===t&&void 0===e?.5:this.getParameterAt(t,0)},divide:function(t,e){var n=this._getParameter(t,e),i=null;if(n>0&&1>n){var r=T.subdivide(this.getValues(),n),s=this.isLinear(),o=r[0],u=r[1];s||(this._segment1._handleOut.set(o[2]-o[0],o[3]-o[1]),this._segment2._handleIn.set(u[4]-u[6],u[5]-u[7]));var c=o[6],h=o[7],l=new k(new a(c,h),!s&&new a(o[4]-c,o[5]-h),!s&&new a(u[2]-c,u[3]-h));if(this._path)this._segment1._index>0&&0===this._segment2._index?this._path.add(l):this._path.insert(this._segment2._index,l),i=this;else{var f=this._segment2;this._segment2=l,i=new T(l,f)}}return i},split:function(t,e){return this._path?this._path.split(this._segment1._index,this._getParameter(t,e)):null},clone:function(){return new T(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},statics:{getValues:function(t,e){var n=t._point,i=t._handleOut,r=e._handleIn,s=e._point;return[n._x,n._y,n._x+i._x,n._y+i._y,s._x+r._x,s._y+r._y,s._x,s._y]},evaluate:function(t,e,n){var i,r,s=t[0],o=t[1],u=t[2],c=t[3],h=t[4],l=t[5],f=t[6],d=t[7];if(0!==n||0!==e&&1!==e){var p=3*(u-s),g=3*(h-u)-p,m=f-s-p-g,v=3*(c-o),_=3*(l-c)-v,y=d-o-v-_;if(0===n)i=((m*e+g)*e+p)*e+s,r=((y*e+_)*e+v)*e+o;else{var b=1e-5;if(b>e&&u==s&&c==o||e>1-b&&h==f&&l==d?(i=h-u,r=l-c):(i=(3*m*e+2*g)*e+p,r=(3*y*e+2*_)*e+v),3===n){var w=6*m*e+2*g,x=6*y*e+2*_;return(i*x-r*w)/Math.pow(i*i+r*r,1.5)}}}else i=0===e?s:f,r=0===e?o:d;return 2==n?new a(r,-i):new a(i,r)},subdivide:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],c=t[7];void 0===e&&(e=.5);var h=1-e,l=h*n+e*r,f=h*i+e*s,d=h*r+e*o,p=h*s+e*a,g=h*o+e*u,m=h*a+e*c,v=h*l+e*d,_=h*f+e*p,y=h*d+e*g,b=h*p+e*m,w=h*v+e*y,x=h*_+e*b;return[[n,i,l,f,v,_,w,x],[w,x,y,b,g,m,u,c]]},solveCubic:function(t,e,n,i){var r=t[e],s=t[e+2],a=t[e+4],u=t[e+6],c=3*(s-r),h=3*(a-s)-c,l=u-r-c-h;return o.solveCubic(l,h,c,r-n,i)},getParameterOf:function(t,e,n){if(Math.abs(t[0]-e)<1e-5&&Math.abs(t[1]-n)<1e-5)return 0;if(Math.abs(t[6]-e)<1e-5&&Math.abs(t[7]-n)<1e-5)return 1;for(var i,r,s=[],o=[],a=T.solveCubic(t,0,e,s),u=T.solveCubic(t,1,n,o),c=0;-1==a||a>c;)if(-1==a||(i=s[c++])>=0&&1>=i){for(var h=0;-1==u||u>h;)if((-1==u||(r=o[h++])>=0&&1>=r)&&(-1==a?i=r:-1==u&&(r=i),Math.abs(i-r)<1e-5))return.5*(i+r);if(-1==a)break}return null},getPart:function(t,e,n){return e>0&&(t=T.subdivide(t,e)[1]),1>n&&(t=T.subdivide(t,(n-e)/(1-e))[0]),t},isLinear:function(t){return t[0]===t[2]&&t[1]===t[3]&&t[4]===t[6]&&t[5]===t[7]},isFlatEnough:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],c=t[7],h=3*r-2*n-u,l=3*s-2*i-c,f=3*o-2*u-n,d=3*a-2*c-i;return Math.max(h*h,f*f)+Math.max(l*l,d*d)<10*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],u=t[7];return(3*r*e-1.5*r*s-1.5*r*a-3*n*i-1.5*n*s-.5*n*a+1.5*o*e+1.5*o*i-3*o*a+.5*u*e+1.5*u*i+3*u*s)/10},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;2>r;r++)T._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);return new f(e[0],e[1],n[0]-e[0],n[1]-e[1])},_getCrossings:function(t,e,n,i,r){function s(t){return T.evaluate(e,1,1).y*t.y>0}var o=T.solveCubic(t,1,i,r),a=0,u=1e-5,c=Math.abs;-1===o&&(r[0]=T.getParameterOf(t,n,i),o=null!==r[0]?1:0);for(var h=0;o>h;h++){var l=r[h];if(l>-u&&1-u>l){var f=T.evaluate(t,l,0);if(n<f.x+u){var d=T.evaluate(t,l,1);if(c(f.x-n)<u){var p=d.getAngle();if(p>-180&&0>p&&(l>u||s(d)))continue}else if(c(d.y)<u||u>l&&!s(d))continue;a++}}}return a},_addBounds:function(t,e,n,i,r,s,a,u,c){function h(t,e){var n=t-e,i=t+e;n<a[r]&&(a[r]=n),i>u[r]&&(u[r]=i)}var l=3*(e-n)-t+i,f=2*(t+n)-4*e,d=e-t,p=o.solveQuadratic(l,f,d,c),g=1e-5,m=1-g;h(i,0);for(var v=0;p>v;v++){var _=c[v],y=1-_;_>g&&m>_&&h(y*y*y*t+3*y*y*_*e+3*y*_*_*n+_*_*_*i,s)}}}},t.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=M[t]([this._segment1,this._segment2],!1,this._path.getStyle())),e.clone()}},{}),t.each(["getPoint","getTangent","getNormal","getCurvature"],function(t,e){this[t+"At"]=function(t,n){var i=this.getValues();return T.evaluate(i,n?t:T.getParameterAt(i,t,0),e)},this[t]=function(t){return T.evaluate(this.getValues(),t,e)}},{getParameterAt:function(t,e){return T.getParameterAt(this.getValues(),t,void 0!==e?e:0>t?1:0)},getParameterOf:function(t){return t=a.read(arguments),T.getParameterOf(this.getValues(),t.x,t.y)},getLocationAt:function(t,e){return e||(t=this.getParameterAt(t)),new A(this,t)},getLocationOf:function(t){t=a.read(arguments);var e=this.getParameterOf(t);return null!=e?new A(this,e):null},getNearestLocation:function(t){function e(e){if(e>=0&&1>=e){var i=t.getDistance(T.evaluate(n,e,0),!0);if(s>i)return s=i,u=e,!0}}t=a.read(arguments);for(var n=this.getValues(),i=100,r=o.TOLERANCE,s=1/0,u=0,c=0;i>=c;c++)e(c/i);for(var h=1/(2*i);h>r;)e(u-h)||e(u+h)||(h/=2);var l=T.evaluate(n,u,0);return new A(this,u,l,null,null,null,t.getDistance(l))},getNearestPoint:function(t){return t=a.read(arguments),this.getNearestLocation(t).getPoint()}}),new function(){function t(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],u=t[7],c=9*(i-s)+3*(a-e),h=6*(e+s)-12*i,l=3*(i-e),f=9*(r-o)+3*(u-n),d=6*(n+o)-12*r,p=3*(r-n);return function(t){var e=(c*t+h)*t+l,n=(f*t+d)*t+p;return Math.sqrt(e*e+n*n)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}return{statics:!0,getLength:function(n,i,r){if(void 0===i&&(i=0),void 0===r&&(r=1),n[0]==n[2]&&n[1]==n[3]&&n[6]==n[4]&&n[7]==n[5]){var s=n[6]-n[0],a=n[7]-n[1];return(r-i)*Math.sqrt(s*s+a*a)}var u=t(n);return o.integrate(u,i,r,e(i,r))},getParameterAt:function(n,i,r){function s(t){var n=e(r,t);return d+=t>r?o.integrate(h,r,t,n):-o.integrate(h,t,r,n),r=t,d-i}if(0===i)return r;var a=i>0,u=a?r:0,c=a?1:r,i=Math.abs(i),h=t(n),l=o.integrate(h,u,c,e(u,c));if(i>=l)return a?c:u;var f=i/l,d=0;return o.findRoot(s,h,a?u+f:c-f,u,c,16,1e-5)}}},new function(){function t(t,e,n,i,r,s,o){var a=t[0],u=t[t.length-1];a&&i.equals(a._point)||u&&i.equals(u._point)||t.push(new A(e,n,i,r,s,o))}function e(i,r,s,o,a,u,c,h){if(h=(h||0)+1,!(h>20)){u=u||[0,1],c=c||[0,1];for(var l=T.getPart(i,u[0],u[1]),f=T.getPart(r,c[0],c[1]),d=0;d++<20;){var p,g=n(l,f,p=c.slice()),m=0;if(0===g)break;if(g>0){if(c=p,f=T.getPart(r,c[0],c[1]),m=n(f,l,p=u.slice()),0===m)break;g>0&&(u=p,l=T.getPart(i,u[0],u[1]))}if(0>g||0>m){if(u[1]-u[0]>c[1]-c[0]){var v=(u[0]+u[1])/2;e(i,r,s,o,a,[u[0],v],c,h),e(i,r,s,o,a,[v,u[1]],c,h);break}var v=(c[0]+c[1])/2;e(i,r,s,o,a,u,[c[0],v],h),e(i,r,s,o,a,u,[v,c[1]],h);break}if(Math.abs(u[1]-u[0])<=1e-5&&Math.abs(c[1]-c[0])<=1e-5){var _=(u[0]+u[1])/2,y=(c[0]+c[1])/2;t(a,s,_,T.evaluate(i,_,0),o,y,T.evaluate(r,y,0));break}}}}function n(t,e,n){var r=t[0],s=t[1],o=t[2],a=t[3],u=t[4],c=t[5],h=t[6],l=t[7],f=e[0],d=e[1],p=e[2],m=e[3],v=e[4],_=e[5],y=e[6],b=e[7],w=g.getSignedDistance,x=w(r,s,h,l,o,a)||0,C=w(r,s,h,l,u,c)||0,S=x*C>0?.75:4/9,k=S*Math.min(0,x,C),P=S*Math.max(0,x,C),A=w(r,s,h,l,f,d),E=w(r,s,h,l,p,m),M=w(r,s,h,l,v,_),j=w(r,s,h,l,y,b);if(k>Math.max(A,E,M,j)||P<Math.min(A,E,M,j))return 0;var N,D=i(A,E,M,j);A>j&&(N=k,k=P,P=N);for(var O=-1/0,L=1/0,I=-1/0,z=0,F=D.length;F>z;z++){var B=D[z],$=D[(z+1)%F];$[1]<B[1]&&(N=$,$=B,B=N);var R=B[0],q=B[1],H=$[0],U=$[1],W=(U-q)/(H-R);if(k>=q&&U>=k){var V=R+(k-q)/W;L>V&&(L=V),V>O&&(O=V)}if(P>=q&&U>=P){var V=R+(P-q)/W;V>I&&(I=V),L>V&&(L=0)}}if(1/0!==L&&I!==-1/0){var X=Math.min(k,P),J=Math.max(k,P);j>X&&J>j&&(I=1),A>X&&J>A&&(L=0),O>I&&(I=1);var Z=n[0],G=n[1]-Z;if(n[0]=Z+L*G,n[1]=Z+I*G,(G-(n[1]-n[0]))/G>=.2)return 1}return T.getBounds(t).touches(T.getBounds(e))?-1:0}function i(t,e,n,i){var r=[0,t],s=[1/3,e],o=[2/3,n],a=[1,i],u=g.getSignedDistance,c=u(0,t,1,i,1/3,e),h=u(0,t,1,i,2/3,n);if(0>c*h)return[r,s,a,o];var l,f;return Math.abs(c)>Math.abs(h)?(l=s,f=(i-n-(i-t)/3)*(2*(i-n)-i+e)/3):(l=o,f=(e-t+(t-i)/3)*(-2*(t-e)+t-n)/3),0>f?[r,l,a]:[r,s,o,a]}function r(e,n,i,r,s){for(var o=T.isLinear(e),a=o?n:e,u=o?e:n,c=u[0],h=u[1],l=u[6],f=u[7],d=l-c,p=f-h,g=Math.atan2(-p,d),m=Math.sin(g),v=Math.cos(g),_=d*v-p*m,y=[],b=0;8>b;b+=2){var w=a[b]-c,x=a[b+1]-h;y.push(w*v-x*m,x*v+w*m)}for(var C=[],S=T.solveCubic(y,1,0,C),b=0;S>b;b++){var k=C[b];if(k>=0&&1>=k){var P=T.evaluate(y,k,0);P.x>=0&&P.x<=_&&t(s,o?r:i,k,T.evaluate(a,k,0),o?i:r)}}}function s(e,n,i,r,s){var o=g.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);o&&t(s,i,null,o,r)}return{statics:{getIntersections:function(t,n,i,o,a){var u=T.isLinear(t),c=T.isLinear(n);return(u&&c?s:u||c?r:e)(t,n,i,o,a),a}}}}),A=t.extend({_class:"CurveLocation",initialize:function me(t,e,n,i,r,s,o){this._id=me._id=(me._id||0)+1,this._curve=t,this._segment1=t._segment1,this._segment2=t._segment2,this._parameter=e,this._point=n,this._curve2=i,this._parameter2=r,this._point2=s,this._distance=o},getSegment:function(){if(!this._segment){var t=this.getCurve(),e=this.getParameter();if(1===e)this._segment=t._segment2;else if(0===e||arguments[0])this._segment=t._segment1;else{if(null==e)return null;this._segment=t.getLength(0,e)<t.getLength(e,1)?t._segment1:t._segment2}}return this._segment},getCurve:function(){return(!this._curve||arguments[0])&&(this._curve=this._segment1.getCurve(),null==this._curve.getParameterOf(this._point)&&(this._curve=this._segment2.getPrevious().getCurve())),this._curve},getIntersection:function(){var t=this._intersection;if(!t&&this._curve2){var e=this._parameter2;this._intersection=t=new A(this._curve2,e,this._point2||this._point,this),t._intersection=this}return t},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getOffset:function(){var t=this.getPath();return t&&t._getOffset(this)},getCurveOffset:function(){var t=this.getCurve(),e=this.getParameter();return null!=e&&t&&t.getLength(0,e)},getParameter:function(){if((null==this._parameter||arguments[0])&&this._point){var t=this.getCurve(arguments[0]&&this._point);this._parameter=t&&t.getParameterOf(this._point)}return this._parameter},getPoint:function(){if((!this._point||arguments[0])&&null!=this._parameter){var t=this.getCurve();this._point=t&&t.getPointAt(this._parameter,!0)}return this._point},getTangent:function(){var t=this.getParameter(),e=this.getCurve();return null!=t&&e&&e.getTangentAt(t,!0)},getNormal:function(){var t=this.getParameter(),e=this.getCurve();return null!=t&&e&&e.getNormalAt(t,!0)},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(!0);return t&&t.divide(this.getParameter(!0),!0)},split:function(){var t=this.getCurve(!0);return t&&t.split(this.getParameter(!0),!0)},toString:function(){var t=[],e=this.getPoint(),n=s.instance;e&&t.push("point: "+e);var i=this.getIndex();null!=i&&t.push("index: "+i);var r=this.getParameter();return null!=r&&t.push("parameter: "+n.number(r)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"}}),E=_.extend({_class:"PathItem",initialize:function(){},getIntersections:function(t){if(!this.getBounds().touches(t.getBounds()))return[];for(var e=[],n=this.getCurves(),i=t.getCurves(),r=i.length,s=[],o=0;r>o;o++)s[o]=i[o].getValues();for(var o=0,a=n.length;a>o;o++)for(var u=n[o],c=u.getValues(),h=0;r>h;h++)T.getIntersections(c,s[h],u,i[h],e);return e},setPathData:function(t){function e(t,e,n){var r=parseFloat(i[t]);return o&&(r+=u[e]),n&&(u[e]=r),r}function n(t,n){return new a(e(t,"x",n),e(t+1,"y",n))}var i,r,s=t.match(/[a-z][^a-z]*/gi),o=!1,u=new a;"path"===this._type?this.removeSegments():this.removeChildren();for(var c=0,h=s.length;h>c;c++){var l=s[c],f=l[0],d=f.toLowerCase();i=l.slice(1).trim().split(/[\s,]+|(?=[+-])/),o=f===d;var p=i.length;switch(d){case"m":case"l":for(var g=0;p>g;g+=2)this[0===g&&"m"===d?"moveTo":"lineTo"](n(g,!0));break;case"h":case"v":for(var m="h"==d?"x":"y",g=0;p>g;g++)e(g,m,!0),this.lineTo(u);break;case"c":for(var g=0;p>g;g+=6)this.cubicCurveTo(n(g),r=n(g+2),n(g+4,!0));break;case"s":for(var g=0;p>g;g+=4)this.cubicCurveTo(u.multiply(2).subtract(r),r=n(g),n(g+2,!0));break;case"q":for(var g=0;p>g;g+=4)this.quadraticCurveTo(r=n(g),n(g+2,!0));break;case"t":for(var g=0;p>g;g+=2)this.quadraticCurveTo(r=u.multiply(2).subtract(r),n(g,!0));break;case"a":break;case"z":this.closePath()}}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())}}),M=E.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[];
var e=Array.isArray(t)?"object"==typeof t[0]?t:arguments:t&&(void 0!==t.point&&void 0===t.size||void 0!==t.x)?arguments:null;this.setSegments(e||[]),this._initialize(!e&&t)},clone:function(t){var e=this._clone(new M({segments:this._segments,insert:!1}),t);return e._closed=this._closed,void 0!==this._clockwise&&(e._clockwise=this._clockwise),e},_changed:function ve(t){if(ve.base.call(this,t),4&t){if(delete this._length,delete this._clockwise,this._curves)for(var e=0,n=this._curves.length;n>e;e++)this._curves[e]._changed(5)}else 8&t&&delete this._bounds},getSegments:function(){return this._segments},setSegments:function(t){this._selectedSegmentState=0,this._segments.length=0,delete this._curves,this._add(k.readAll(t))},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var i=0;n>i;i++)t[i]=new T(this,e[i],e[i+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},getPathData:function(){function t(t,e,s){var o=t._point,a=e._point,u=t._handleOut,c=e._handleIn;if(u.isZero()&&c.isZero())s||r.push("L"+i.point(a,n));else{var h=a.subtract(o);r.push("c"+i.point(u,n)+" "+i.point(h.add(c),n)+" "+i.point(h,n))}}var e=this._segments,n=arguments[0],i=s.instance,r=[];if(0===e.length)return"";r.push("M"+i.point(e[0]._point));for(var o=0,a=e.length-1;a>o;o++)t(e[o],e[o+1],!1);return this._closed&&(t(e[e.length-1],e[0],!0),r.push("z")),r.join("")},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new T(this,this._segments[e-1],this._segments[0]))}this._changed(5)}},isEmpty:function(){return 0===this._segments.length},isPolygon:function(){for(var t=0,e=this._segments.length;e>t;t++)if(!this._segments[t].isLinear())return!1;return!0},_applyMatrix:function(t){for(var e=new Array(6),n=0,i=this._segments.length;i>n;n++)this._segments[n]._transformCoordinates(t,e,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,r=t.length,s=null==e,e=s?n.length:e,o=this.isFullySelected(),a=0;r>a;a++){var u=t[a];u._path&&(u=t[a]=u.clone()),u._path=this,u._index=e+a,o&&(u._selectionState=4),u._selectionState&&this._updateSelection(u,0,u._selectionState)}if(s)n.push.apply(n,t);else{n.splice.apply(n,[e,0].concat(t));for(var a=e+r,c=n.length;c>a;a++)n[a]._index=a}if(i||t._curves){i||(i=this._curves=[]);var h=e>0?e-1:e,l=h,f=Math.min(h+r,this._countCurves());t._curves&&(i.splice.apply(i,[h,0].concat(t._curves)),l+=t._curves.length);for(var a=l;f>a;a++)i.splice(a,0,new T(this,null,null));this._adjustCurves(h,f)}return this._changed(5),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,s=t;e>s;s++)n=r[s],n._path=this,n._segment1=i[s],n._segment2=i[s+1]||i[0];(n=r[this._closed&&0===t?i.length-1:t-1])&&(n._segment2=i[t]||i[0]),(n=r[e])&&(n._segment1=i[e])},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(k.readAll(arguments)):this._add([k.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(k.readAll(arguments,1),t):this._add([k.read(arguments,1)],t)[0]},addSegment:function(){return this._add([k.read(arguments)])[0]},insertSegment:function(t){return this._add([k.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(k.readAll(t))},insertSegments:function(t,e){return this._add(k.readAll(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(e,n){e=e||0,n=t.pick(n,this._segments.length);var i=this._segments,r=this._curves,s=i.length,o=i.splice(e,n-e),a=o.length;if(!a)return o;for(var u=0;a>u;u++){var c=o[u];c._selectionState&&this._updateSelection(c,c._selectionState,0),delete c._index,delete c._path}for(var u=e,h=i.length;h>u;u++)i[u]._index=u;if(r){var l=e>0&&n===s+(this._closed?1:0)?e-1:e,r=r.splice(l,a);arguments[2]&&(o._curves=r.slice(1)),this._adjustCurves(l,l)}return this._changed(5),o},isFullySelected:function(){return this._selected&&this._selectedSegmentState==4*this._segments.length},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelected:function _e(t){t||this._selectSegments(!1),_e.base.call(this,t)},_selectSegments:function(t){var e=this._segments.length;this._selectedSegmentState=t?4*e:0;for(var n=0;e>n;n++)this._segments[n]._selectionState=t?4:0},_updateSelection:function(t,e,n){t._selectionState=n;var i=this._selectedSegmentState+=n-e;i>0&&this.setSelected(!0)},flatten:function(t){for(var e=new N(this),n=0,i=e.length/Math.ceil(e.length/t),r=e.length+(this._closed?-i:i)/2,s=[];r>=n;)s.push(new k(e.evaluate(n,0))),n+=i;this.setSegments(s)},simplify:function(t){if(this._segments.length>2){var e=new D(this,t||2.5);this.setSegments(e.fit())}},split:function(t,e){if(null!==e){if(1===arguments.length){var n=t;"number"==typeof n&&(n=this.getLocationAt(n)),t=n.index,e=n.parameter}e>=1&&(t++,e--);var i=this.getCurves();if(t>=0&&t<i.length){e>0&&i[t++].divide(e,!0);var r,s=this.removeSegments(t,this._segments.length,!0);return this._closed?(this.setClosed(!1),r=this):t>0&&(r=this._clone((new M).insertAbove(this,!0))),r._add(s,0),this.addSegment(s[0]),r}return null}},isClockwise:function(){return void 0!==this._clockwise?this._clockwise:M.isClockwise(this._segments)},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse(),this._clockwise=t},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;e>t;t++){var n=this._segments[t],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=t}delete this._curves,void 0!==this._clockwise&&(this._clockwise=!this._clockwise)},join:function(t){if(t){var e=t._segments,n=this.getLastSegment(),i=t.getLastSegment();n._point.equals(i._point)&&t.reverse();var r,s=t.getFirstSegment();return n._point.equals(s._point)?(n.setHandleOut(s._handleOut),this._add(e.slice(1))):(r=this.getFirstSegment(),r._point.equals(s._point)&&t.reverse(),i=t.getLastSegment(),r._point.equals(i._point)?(r.setHandleIn(i._handleIn),this._add(e.slice(0,e.length-1),0)):this._add(e.slice())),t.closed&&this._add([e[0]]),t.remove(),r=this.getFirstSegment(),n=this.getLastSegment(),n._point.equals(r._point)&&(r.setHandleIn(n._handleIn),n.remove(),this.setClosed(!0)),this._changed(5),!0}return!1},reduce:function(){return this},getLength:function(){if(null==this._length){var t=this.getCurves();this._length=0;for(var e=0,n=t.length;n>e;e++)this._length+=t[e].getLength()}return this._length},getArea:function(){for(var t=this.getCurves(),e=0,n=0,i=t.length;i>n;n++)e+=t[n].getArea();return e},_getOffset:function(t){var e=t&&t.getIndex();if(null!=e){for(var n=this.getCurves(),i=0,r=0;e>r;r++)i+=n[r].getLength();var s=n[e];return i+s.getLength(0,t.getParameter())}return null},getLocationOf:function(t){t=a.read(arguments);for(var e=this.getCurves(),n=0,i=e.length;i>n;n++){var r=e[n].getLocationOf(t);if(r)return r}return null},getLocationAt:function(t,e){var n=this.getCurves(),i=0;if(e){var r=~~t;return n[r].getLocationAt(t-r,!0)}for(var s=0,o=n.length;o>s;s++){var a=i,u=n[s];if(i+=u.getLength(),i>=t)return u.getLocationAt(t-a)}return t<=this.getLength()?new A(n[n.length-1],1):null},getPointAt:function(t,e){var n=this.getLocationAt(t,e);return n&&n.getPoint()},getTangentAt:function(t,e){var n=this.getLocationAt(t,e);return n&&n.getTangent()},getNormalAt:function(t,e){var n=this.getLocationAt(t,e);return n&&n.getNormal()},getNearestLocation:function(t){t=a.read(arguments);for(var e=this.getCurves(),n=1/0,i=null,r=0,s=e.length;s>r;r++){var o=e[r].getNearestLocation(t);o._distance<n&&(n=o._distance,i=o)}return i},getNearestPoint:function(t){return t=a.read(arguments),this.getNearestLocation(t).getPoint()},getStyle:function(){var t=this._parent;return(t&&"compound-path"===t._type?t:this)._style},_contains:function(t){var e=this._closed;if(!e&&!this.hasFill()||!this._getBounds("getRoughBounds")._containsPoint(t))return!1;for(var n=this.getCurves(),i=this._segments,r=0,s=new Array(3),o=(e?n[n.length-1]:new T(i[i.length-1]._point,i[0]._point)).getValues(),a=o,u=0,c=n.length;c>u;u++){var h=n[u].getValues(),l=h[0],f=h[1];(l!==h[2]||f!==h[3]||l!==h[4]||f!==h[5]||l!==h[6]||f!==h[7])&&(r+=T._getCrossings(h,a,t.x,t.y,s),a=h)}return e||(r+=T._getCrossings(o,a,t.x,t.y,s)),1===(1&r)},_hitTest:function(t,e){function n(e,n,i){return t.getDistance(n)<v?new S(i,y,{segment:e,point:n}):void 0}function i(t,i){var r=t._point;return(i||e.segments)&&n(t,r,"segment")||!i&&e.handles&&(n(t,r.add(t._handleIn),"handle-in")||n(t,r.add(t._handleOut),"handle-out"))}function r(t){l.push(t)}function s(t){var e=l[t],n=l[(t+1)%l.length];return[e.x,e.y,e.x,e.y,n.x,n.y,n.x,n.y]}function o(t){for(var e=l.length,n=s(e-1),i=new Array(3),r=0,o=0;e>o;o++){var a=s(o);r+=T._getCrossings(a,n,t.x,t.y,i),n=a}return 1===(1&r)}function a(e){return("round"!==u||"round"!==c)&&(l=[],m||e._index>0&&e._index<g.length-1?"round"!==u&&(e._handleIn.isZero()||e._handleOut.isZero())&&M._addSquareJoin(e,u,_,h,r,!0):"round"!==c&&M._addSquareCap(e,c,_,r,!0),l.length>0)?o(t):t.getDistance(e._point)<=_}var u,c,h,l,f,d,p=this.getStyle(),g=this._segments,m=this._closed,v=e.tolerance||0,_=0,y=this;if(e.stroke&&p.getStrokeColor()&&(u=p.getStrokeJoin(),c=p.getStrokeCap(),_=p.getStrokeWidth()/2+v,h=_*p.getMiterLimit()),!e.ends||e.segments||m){if(e.segments||e.handles)for(var b=0,w=g.length;w>b;b++)if(d=i(g[b]))return d}else if(d=i(g[0],!0)||i(g[g.length-1],!0))return d;if(_>0){if(f=this.getNearestLocation(t)){var x=f.getParameter();0===x||1===x?a(f.getSegment())||(f=null):f._distance>_&&(f=null)}if(!f&&"miter"===u)for(var b=0,w=g.length;w>b;b++){var C=g[b];if(t.getDistance(C._point)<=h&&a(C)){f=C.getLocation();break}}}return!f&&e.fill&&this.hasFill()&&this.contains(t)?new S("fill",this):f?new S("stroke",this,{location:f}):null}},new function(){function t(t,e,n,i){function r(e){var n=o[e],i=o[e+1];(f!=n||d!=i)&&(t.beginPath(),t.moveTo(f,d),t.lineTo(n,i),t.stroke(),t.beginPath(),t.arc(n,i,s,0,2*Math.PI,!0),t.fill())}for(var s=i/2,o=new Array(6),a=0,u=e.length;u>a;a++){var c=e[a];c._transformCoordinates(n,o,!1);var h=c._selectionState,l=4&h,f=o[0],d=o[1];(l||1&h)&&r(2),(l||2&h)&&r(4),t.save(),t.beginPath(),t.rect(f-s,d-s,i,i),t.fill(),l||(t.beginPath(),t.rect(f-s+1,d-s+1,i-2,i-2),t.fillStyle="#ffffff",t.fill()),t.restore()}}function e(t,e,n){function i(e){var i=f[e];if(n)i._transformCoordinates(n,p,!1),r=p[0],s=p[1];else{var d=i._point;r=d._x,s=d._y}if(g)t.moveTo(r,s),g=!1;else{if(n)u=p[2],c=p[3];else{var m=i._handleIn;u=r+m._x,c=s+m._y}u==r&&c==s&&h==o&&l==a?t.lineTo(r,s):t.bezierCurveTo(h,l,u,c,r,s)}if(o=r,a=s,n)h=p[4],l=p[5];else{var m=i._handleOut;h=o+m._x,l=a+m._y}}for(var r,s,o,a,u,c,h,l,f=e._segments,d=f.length,p=new Array(6),g=!0,m=0;d>m;m++)i(m);e._closed&&d>1&&i(0)}return{_draw:function(t,n){var i=n.clip,r=n.compound;r||t.beginPath();var s=this.getStyle(),o=s.getFillColor(),a=s.getStrokeColor(),u=s.getDashArray(),c=!paper.support.nativeDash&&a&&u&&u.length;if((o||a&&!c||r||i)&&e(t,this),this._closed&&t.closePath(),!i&&!r&&(o||a)&&(this._setStyles(t),o&&t.fill(),a)){if(c){t.beginPath();for(var h,l=new N(this),f=s.getDashOffset(),d=0;f<l.length;)h=f+u[d++%u.length],l.drawPart(t,f,h),f=h+u[d++%u.length]}t.stroke()}},_drawSelected:function(n,i){n.beginPath(),e(n,this,i),n.stroke(),t(n,this._segments,i,this._project.options.handleSize||4)}}},new function(){function t(t){var e=t.length,n=[],i=[],r=2;n[0]=t[0]/r;for(var s=1;e>s;s++)i[s]=1/r,r=(e-1>s?4:2)-i[s],n[s]=(t[s]-n[s-1])/r;for(var s=1;e>s;s++)n[e-s-1]-=i[e-s]*n[e-s];return n}return{smooth:function(){var e,n=this._segments,i=n.length,r=i;if(!(2>=i)){this._closed?(e=Math.min(i,4),r+=2*Math.min(i,e)):e=0;for(var s=[],o=0;i>o;o++)s[o+e]=n[o]._point;if(this._closed)for(var o=0;e>o;o++)s[o]=n[o+i-e]._point,s[o+i+e]=n[o]._point;else r--;for(var u=[],o=1;r-1>o;o++)u[o]=4*s[o]._x+2*s[o+1]._x;u[0]=s[0]._x+2*s[1]._x,u[r-1]=3*s[r-1]._x;for(var c=t(u),o=1;r-1>o;o++)u[o]=4*s[o]._y+2*s[o+1]._y;u[0]=s[0]._y+2*s[1]._y,u[r-1]=3*s[r-1]._y;var h=t(u);if(this._closed){for(var o=0,l=i;e>o;o++,l++){var f=o/e,d=1-f,p=o+e,g=l+e;c[l]=c[o]*f+c[l]*d,h[l]=h[o]*f+h[l]*d,c[g]=c[p]*d+c[g]*f,h[g]=h[p]*d+h[g]*f}r--}for(var m=null,o=e;r-e>=o;o++){var v=n[o-e];m&&v.setHandleIn(m.subtract(v._point)),r>o&&(v.setHandleOut(new a(c[o],h[o]).subtract(v._point)),m=r-1>o?new a(2*s[o+1]._x-c[o+1],2*s[o+1]._y-h[o+1]):new a((s[r]._x+c[r-1])/2,(s[r]._y+h[r-1])/2))}if(this._closed&&m){var v=this._segments[0];v.setHandleIn(m.subtract(v._point))}}}}},new function(){function e(t){var e=t._segments;if(0==e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){1===this._segments.length&&this.removeSegment(0),this._segments.length||this._add([new k(a.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new k(a.read(arguments))])},cubicCurveTo:function(){var t=a.read(arguments),n=a.read(arguments),i=a.read(arguments),r=e(this);r.setHandleOut(t.subtract(r._point)),this._add([new k(i,n.subtract(i))])},quadraticCurveTo:function(){var t=a.read(arguments),n=a.read(arguments),i=e(this)._point;this.cubicCurveTo(t.add(i.subtract(t).multiply(1/3)),t.add(n.subtract(t).multiply(1/3)),n)},curveTo:function(){var n=a.read(arguments),i=a.read(arguments),r=t.pick(t.read(arguments),.5),s=1-r,o=e(this)._point,u=n.subtract(o.multiply(s*s)).subtract(i.multiply(r*r)).divide(2*r*s);if(u.isNaN())throw new Error("Cannot put a curve through points with parameter = "+r);this.quadraticCurveTo(u,i)},arcTo:function(n,i){var r,s=e(this),o=s._point,u=a.read(arguments),c=t.pick(t.peek(arguments),!0);if("boolean"==typeof c){n=u,i=c;var h=o.add(n).divide(2),r=h.add(h.subtract(o).rotate(i?-90:90))}else r=u,n=a.read(arguments);var l=new g(o.add(r).divide(2),r.subtract(o).rotate(90),!0),f=new g(r.add(n).divide(2),n.subtract(r).rotate(90),!0),d=l.intersect(f,!0),p=new g(o,n),m=p.getSide(r);if(!d){if(!m)return this.lineTo(n);throw new Error("Cannot put an arc through the given points: "+[o,r,n])}var v=o.subtract(d),_=v.getDirectedAngle(n.subtract(d)),y=p.getSide(d);0==y?_=m*Math.abs(_):m==y&&(_-=360*(0>_?-1:1));for(var b=Math.abs(_),w=b>=360?4:Math.ceil(b/90),x=_/w,C=x*Math.PI/360,S=4/3*Math.sin(C)/(1+Math.cos(C)),P=[],T=0;w>=T;T++){var A=w>T?d.add(v):n,E=w>T?v.rotate(90).multiply(S):null;0==T?s.setHandleOut(E):P.push(new k(A,v.rotate(-90).multiply(S),E)),v=v.rotate(x)}this._add(P)},lineBy:function(t){t=a.read(arguments);var n=e(this);this.lineTo(n._point.add(t))},curveBy:function(t,n,i){t=a.read(t),n=a.read(n);var r=e(this)._point;this.curveTo(r.add(t),r.add(n),i)},arcBy:function(t,n){t=a.read(t),n=a.read(n);var i=e(this)._point;this.arcTo(i.add(t),i.add(n))},closePath:function(){var t=this.getFirstSegment(),e=this.getLastSegment();t._point.equals(e._point)&&(t.setHandleIn(e._handleIn),e.remove()),this.setClosed(!0)}}},{_getBounds:function(t,e){return M[t](this._segments,this._closed,this.getStyle(),e)},statics:{isClockwise:function(t){function e(t,e){s&&(r+=(n-t)*(e+i)),n=t,i=e,s=!0}for(var n,i,r=0,s=!1,o=0,a=t.length;a>o;o++){var u=t[o],c=t[a>o+1?o+1:0],h=u._point,l=u._handleOut,f=c._handleIn,d=c._point;e(h._x,h._y),e(h._x+l._x,h._y+l._y),e(d._x+f._x,d._y+f._y),e(d._x,d._y)}return r>0},getBounds:function(t,e,n,i,r){function s(t){t._transformCoordinates(i,a,!1);for(var e=0;2>e;e++)T._addBounds(u[e],u[e+4],a[e+2],a[e],e,r?r[e]:0,c,h,l);var n=u;u=a,a=n}var o=t[0];if(!o)return new f;for(var a=new Array(6),u=o._transformCoordinates(i,new Array(6),!1),c=u.slice(0,2),h=c.slice(),l=new Array(2),d=1,p=t.length;p>d;d++)s(t[d]);return e&&s(o),new f(c[0],c[1],h[0]-c[0],h[1]-c[1])},getStrokeBounds:function(t,e,n,i){function r(t,e){if(!e)return[t,t];var n=e.shiftless(),i=n.transform(new a(t,0)),r=n.transform(new a(0,t)),s=i.getAngleInRadians(),o=i.getLength(),u=r.getLength(),c=Math.sin(s),h=Math.cos(s),l=Math.tan(s),f=-Math.atan(u*l/o),d=Math.atan(u/(l*o));return[Math.abs(o*Math.cos(f)*h-u*Math.sin(f)*c),Math.abs(u*Math.sin(d)*h+o*Math.cos(d)*c)]}function s(t){p=p.include(i?i._transformPoint(t,t):t)}function o(t,e){"round"===e||!t._handleIn.isZero()&&!t._handleOut.isZero()?p=p.unite(_.setCenter(i?i._transformPoint(t._point):t._point)):M._addSquareJoin(t,e,l,v,s)}function u(t,e){switch(e){case"round":o(t,e);break;case"butt":case"square":M._addSquareCap(t,e,l,s)}}if(!n.getStrokeColor()||!n.getStrokeWidth())return M.getBounds(t,e,n,i);for(var h=t.length-(e?0:1),l=n.getStrokeWidth()/2,d=r(l,i),p=M.getBounds(t,e,n,i,d),g=n.getStrokeJoin(),m=n.getStrokeCap(),v=l*n.getMiterLimit(),_=new f(new c(d).multiply(2)),y=1;h>y;y++)o(t[y],g);return e?o(t[0],g):(u(t[0],m),u(t[t.length-1],m)),p},_addSquareJoin:function(t,e,n,i,r,s){var o=t.getCurve(),u=o.getPrevious(),c=o.getPointAt(0,!0),h=u.getNormalAt(1,!0),l=o.getNormalAt(0,!0),f=h.getDirectedAngle(l)<0?-n:n;if(h.setLength(f),l.setLength(f),s&&(r(c),r(c.add(h))),"miter"===e){var d=new g(c.add(h),new a(-h.y,h.x),!0).intersect(new g(c.add(l),new a(-l.y,l.x),!0),!0);if(d&&c.getDistance(d)<=i&&(r(d),!s))return}s||r(c.add(h)),r(c.add(l))},_addSquareCap:function(t,e,n,i,r){var s=t._point,o=t.getLocation(),a=o.getNormal().normalize(n);r&&(i(s.subtract(a)),i(s.add(a))),"square"===e&&(s=s.add(a.rotate(0==o.getParameter()?-90:90))),i(s.add(a)),i(s.subtract(a))},getHandleBounds:function(t,e,n,i,r,s){var o=new Array(6),a=1/0,u=-a,c=a,h=u;r=r/2||0,s=s/2||0;for(var l=0,d=t.length;d>l;l++){var p=t[l];p._transformCoordinates(i,o,!1);for(var g=0;6>g;g+=2){var m=0==g?s:r,v=o[g],_=o[g+1],y=v-m,b=v+m,w=_-m,x=_+m;a>y&&(a=y),b>u&&(u=b),c>w&&(c=w),x>h&&(h=x)}}return new f(a,c,u-a,h-c)},getRoughBounds:function(t,e,n,i){var r=n.getStrokeColor()?n.getStrokeWidth():0,s=r;return r>0&&("miter"===n.getStrokeJoin()&&(s=r*n.getMiterLimit()),"square"===n.getStrokeCap()&&(s=Math.max(s,r*Math.sqrt(2)))),M.getHandleBounds(t,e,n,i,r,s)}}});M.inject({statics:new function(){function e(e){return new M(t.getNamed(e))}function n(){var t=f.readNamed(arguments,"rectangle"),n=c.readNamed(arguments,"radius",0,0,{readNull:!0}),i=t.getBottomLeft(!0),s=t.getTopLeft(!0),o=t.getTopRight(!0),a=t.getBottomRight(!0),u=e(arguments);if(!n||n.isZero())u._add([new k(i),new k(s),new k(o),new k(a)]);else{n=c.min(n,t.getSize(!0).divide(2));var h=n.multiply(2*r);u._add([new k(i.add(n.width,0),null,[-h.width,0]),new k(i.subtract(0,n.height),[0,h.height],null),new k(s.add(0,n.height),null,[0,-h.height]),new k(s.add(n.width,0),[-h.width,0],null),new k(o.subtract(n.width,0),null,[h.width,0]),new k(o.add(0,n.height),[0,-h.height],null),new k(a.subtract(0,n.height),null,[0,h.height]),new k(a.subtract(n.width,0),[h.width,0],null)])}return u._closed=!0,u}function i(){for(var t=f.readNamed(arguments,"rectangle"),n=e(arguments),i=t.getPoint(!0),r=t.getSize(!0),o=new Array(4),a=0;4>a;a++){var u=s[a];o[a]=new k(u._point.multiply(r).add(i),u._handleIn.multiply(r),u._handleOut.multiply(r))}return n._add(o),n._closed=!0,n}var r=o.KAPPA/2,s=[new k([0,.5],[0,r],[0,-r]),new k([.5,0],[-r,0],[r,0]),new k([1,.5],[0,-r],[0,r]),new k([.5,1],[r,0],[-r,0])];return{Line:function(){return new M(a.readNamed(arguments,"from"),a.readNamed(arguments,"to")).set(t.getNamed(arguments))},Circle:function(){var e=a.readNamed(arguments,"center"),n=t.readNamed(arguments,"radius");return i(new f(e.subtract(n),new c(2*n,2*n))).set(t.getNamed(arguments))},Rectangle:n,RoundRectangle:n,Ellipse:i,Oval:i,Arc:function(){var t=a.readNamed(arguments,"from"),n=a.readNamed(arguments,"through"),i=a.readNamed(arguments,"to"),r=e(arguments);return r.moveTo(t),r.arcTo(n,i),r},RegularPolygon:function(){for(var n=a.readNamed(arguments,"center"),i=t.readNamed(arguments,"sides"),r=t.readNamed(arguments,"radius"),s=e(arguments),o=360/i,u=!(i%3),c=new a(0,u?-r:r),h=u?-1:.5,l=new Array(i),f=0;i>f;f++)l[f]=new k(n.add(c.rotate((f+h)*o)));return s._add(l),s._closed=!0,s},Star:function(){for(var n=a.readNamed(arguments,"center"),i=2*t.readNamed(arguments,"points"),r=t.readNamed(arguments,"radius1"),s=t.readNamed(arguments,"radius2"),o=e(arguments),u=360/i,c=new a(0,-1),h=new Array(i),l=0;i>l;l++)h[l]=new k(n.add(c.rotate(u*l).multiply(l%2?s:r)));return o._add(h),o._closed=!0,o}}}});var j=E.extend({_class:"CompoundPath",_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},insertChildren:function ye(t,e,n){e=ye.base.call(this,t,e,n,"path");for(var i=0,r=!n&&e&&e.length;r>i;i++){var s=e[i];void 0===s._clockwise&&s.setClockwise(0===s._index)}return e},reduce:function(){if(1==this._children.length){var t=this._children[0];return t.insertAbove(this),this.remove(),t}return this},reverse:function(){for(var t=this._children,e=0,n=t.length;n>e;e++)t[e].reverse()},smooth:function(){for(var t=0,e=this._children.length;e>t;t++)this._children[t].smooth()},isClockwise:function(){var t=this.getFirstChild();return t&&t.isClockwise()},setClockwise:function(t){this.isClockwise()!=!!t&&this.reverse()},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;i>n;n++)e=e.concat(t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getFirstCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;i>n;n++)e+=t[n].getArea();return e},getPathData:function(){for(var t=this._children,e=[],n=0,i=t.length;i>n;n++)e.push(t[n].getPathData(arguments[0]));return e.join(" ")},_contains:function(t){for(var e=[],n=0,i=this._children.length;i>n;n++){var r=this._children[n];r.contains(t)&&e.push(r)}return 1==(1&e.length)&&e},_hitTest:function be(e,n){var i=be.base.call(this,e,t.merge(n,{fill:!1}));return!i&&n.fill&&this.hasFill()&&(i=this._contains(e),i=i?new S("fill",i[0]):null),i},_draw:function(t,e){var n=this._children,i=this._style;if(0!==n.length){t.beginPath(),e=e.extend({compound:!0});for(var r=0,s=n.length;s>r;r++)n[r].draw(t,e);e.clip||(this._setStyles(t),i.getFillColor()&&t.fill(),i.getStrokeColor()&&t.stroke())}}},new function(){function e(t){if(!t._children.length)throw new Error("Use a moveTo() command first");return t._children[t._children.length-1]}var n={moveTo:function(){var t=new M;this.addChild(t),t.moveTo.apply(t,arguments)},moveBy:function(){this.moveTo(e(this).getLastSegment()._point.add(a.read(arguments)))},closePath:function(){e(this).closePath()}};return t.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","curveBy","arcBy"],function(t){n[t]=function(){var n=e(this);n[t].apply(n,arguments)}}),n}),N=t.extend({initialize:function(t){function e(t,e){var n=T.getValues(t,e);s.curves.push(n),s._computeParts(n,t._index,0,1)}this.curves=[],this.parts=[],this.length=0,this.index=0;for(var n,i=t._segments,r=i[0],s=this,o=1,a=i.length;a>o;o++)n=i[o],e(r,n),r=n;t._closed&&e(n,i[0])},_computeParts:function(t,e,n,i){if(i-n>1/32&&!T.isFlatEnough(t,.25)){var r=T.subdivide(t),s=(n+i)/2;this._computeParts(r[0],e,n,s),this._computeParts(r[1],e,s,i)}else{var o=t[6]-t[0],a=t[7]-t[1],u=Math.sqrt(o*o+a*a);u>1e-5&&(this.length+=u,this.parts.push({offset:this.length,value:i,index:e}))}},getParameterAt:function(t){for(var e,n=this.index;e=n,!(0==n||this.parts[--n].offset<t););for(var i=this.parts.length;i>e;e++){var r=this.parts[e];if(r.offset>=t){this.index=e;var s=this.parts[e-1],o=s&&s.index==r.index?s.value:0,a=s?s.offset:0;return{value:o+(r.value-o)*(t-a)/(r.offset-a),index:r.index}}}var r=this.parts[this.parts.length-1];return{value:1,index:r.index}},evaluate:function(t,e){var n=this.getParameterAt(t);return T.evaluate(this.curves[n.index],n.value,e)},drawPart:function(t,e,n){e=this.getParameterAt(e),n=this.getParameterAt(n);for(var i=e.index;i<=n.index;i++){var r=T.getPart(this.curves[i],i==e.index?e.value:0,i==n.index?n.value:1);i==e.index&&t.moveTo(r[0],r[1]),t.bezierCurveTo.apply(t,r.slice(2))}}}),D=t.extend({initialize:function(t,e){this.points=[];for(var n,i=t._segments,r=0,s=i.length;s>r;r++){var o=i[r].point.clone();n&&n.equals(o)||(this.points.push(o),n=o)}this.error=e},fit:function(){var t=this.points,e=t.length;return this.segments=e>0?[new k(t[0])]:[],e>1&&this.fitCubic(0,e-1,t[1].subtract(t[0]).normalize(),t[e-2].subtract(t[e-1]).normalize()),this.segments},fitCubic:function(t,e,n,i){if(1==e-t){var r=this.points[t],s=this.points[e],o=r.getDistance(s)/3;return this.addCurve([r,r.add(n.normalize(o)),s.add(i.normalize(o)),s]),void 0}for(var a,u=this.chordLengthParameterize(t,e),c=Math.max(this.error,this.error*this.error),h=0;4>=h;h++){var l=this.generateBezier(t,e,u,n,i),f=this.findMaxError(t,e,l,u);if(f.error<this.error)return this.addCurve(l),void 0;if(a=f.index,f.error>=c)break;this.reparameterize(t,e,u,l),c=f.error}var d=this.points[a-1].subtract(this.points[a]),p=this.points[a].subtract(this.points[a+1]),g=d.add(p).divide(2).normalize();this.fitCubic(t,a,n,g),this.fitCubic(a,e,g.negate(),i)},addCurve:function(t){var e=this.segments[this.segments.length-1];e.setHandleOut(t[1].subtract(t[0])),this.segments.push(new k(t[3],t[2].subtract(t[3])))},generateBezier:function(t,e,n,i,r){for(var s=1e-11,o=this.points[t],a=this.points[e],u=[[0,0],[0,0]],c=[0,0],h=0,l=e-t+1;l>h;h++){var f=n[h],d=1-f,p=3*f*d,g=d*d*d,m=p*d,v=p*f,_=f*f*f,y=i.normalize(m),b=r.normalize(v),w=this.points[t+h].subtract(o.multiply(g+m)).subtract(a.multiply(v+_));u[0][0]+=y.dot(y),u[0][1]+=y.dot(b),u[1][0]=u[0][1],u[1][1]+=b.dot(b),c[0]+=y.dot(w),c[1]+=b.dot(w)}var x,C,S=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(Math.abs(S)>s){var k=u[0][0]*c[1]-u[1][0]*c[0],P=c[0]*u[1][1]-c[1]*u[0][1];x=P/S,C=k/S}else{var T=u[0][0]+u[0][1],A=u[1][0]+u[1][1];x=C=Math.abs(T)>s?c[0]/T:Math.abs(A)>s?c[1]/A:0}var E=a.getDistance(o);return s*=E,(s>x||s>C)&&(x=C=E/3),[o,o.add(i.normalize(x)),a.add(r.normalize(C)),a]},reparameterize:function(t,e,n,i){for(var r=t;e>=r;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t])},findRoot:function(t,e,n){for(var i=[],r=[],s=0;2>=s;s++)i[s]=t[s+1].subtract(t[s]).multiply(3);for(var s=0;1>=s;s++)r[s]=i[s+1].subtract(i[s]).multiply(2);var o=this.evaluate(3,t,n),a=this.evaluate(2,i,n),u=this.evaluate(1,r,n),c=o.subtract(e),h=a.dot(a)+c.dot(u);return Math.abs(h)<1e-5?n:n-c.dot(a)/h},evaluate:function(t,e,n){for(var i=e.slice(),r=1;t>=r;r++)for(var s=0;t-r>=s;s++)i[s]=i[s].multiply(1-n).add(i[s+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;e>=i;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);for(var i=1,r=e-t;r>=i;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),s=0,o=t+1;e>o;o++){var a=this.evaluate(3,n,i[o-t]),u=a.subtract(this.points[o]),c=u.x*u.x+u.y*u.y;c>=s&&(s=c,r=o)}return{error:s,index:r}}});E.inject(new function(){function t(t,e){t.sort(function(t,e){var n=t.getPath(),i=e.getPath();return n===i?t.getIndex()+t.getParameter()-(e.getIndex()+e.getParameter()):n._id-i._id});for(var n=e&&[],i=t.length-1;i>=0;i--){var r=t[i],s=r.getIntersection(),o=r.divide(),a=o&&o.getSegment1()||r.getSegment();n&&n.push(s),a._intersection=s}return n}function e(t){if(t instanceof j){for(var e=t._children,n=e.length,i=new Array(n),r=new Array(n),s=e[0].isClockwise(),o=0;n>o;o++)i[o]=e[o].getBounds(),r[o]=0;for(var o=0;n>o;o++){for(var a=1;n>a;a++)o!==a&&i[o].contains(i[a])&&r[a]++;o>0&&0===r[o]%2&&e[o].setClockwise(s)}}return t}function n(n,r,s,o){n=e(n.clone(!1)),r=e(r.clone(!1));var u=n.isClockwise(),c=r.isClockwise(),h=n.getIntersections(r);t(t(h,!0)),o&&(r.reverse(),c=!c);for(var l=[].concat(n._children||[n]).concat(r._children||[r]),f=[],d=new j,p=0,g=l.length;g>p;p++){var m=l[p],v=m._parent,_=m.isClockwise(),y=m._segments;m=v instanceof j?v:m;for(var b=y.length-1;b>=0;b--){var w=y[b],x=w.getCurve().getPoint(.5),C=m!==n&&n.contains(x)&&(_===u||o||!i(n,x)),S=m!==r&&r.contains(x)&&(_===c||!i(r,x));s(m===n,C,S)?w._invalid=!0:f.push(w)}}for(var p=0,g=f.length;g>p;p++){var w=f[p];if(!w._visited){var m=new M,P=w._intersection,T=P&&P.getSegment(!0);w.getPrevious()._invalid&&w.setHandleIn(T?T._handleIn:new a(0,0));do{if(w._visited=!0,w._invalid&&w._intersection){var A=w._intersection.getSegment(!0);m.add(new k(w._point,w._handleIn,A._handleOut)),A._visited=!0,w=A}else m.add(w.clone());w=w.getNext()}while(w&&!w._visited&&w!==T);var E=m._segments.length;E>1&&(E>2||!m.isPolygon())?(m.setClosed(!0),d.addChild(m,!0)):m.remove()}}return n.remove(),r.remove(),d.reduce()}function i(t,e){var n=t.getCurves(),i=t.getBounds();if(i.contains(e))for(var r=0,s=n.length;s>r;r++){var o=n[r];if(o.getBounds().contains(e)&&o.getParameterOf(e))return!0}return!1}return{unite:function(t){return n(this,t,function(t,e,n){return e||n})},intersect:function(t){return n(this,t,function(t,e,n){return!(e||n)})},subtract:function(t){return n(this,t,function(t,e,n){return t&&n||!t&&!e},!0)},exclude:function(t){return new y([this.subtract(t),t.subtract(this)])},divide:function(t){return new y([this.subtract(t),this.intersect(t)])}}});var O=_.extend({_class:"TextItem",_boundsSelected:!0,_serializeFields:{content:null},_boundsGetter:"getBounds",initialize:function(e){this._content="",this._lines=[];var n=e&&t.isPlainObject(e)&&void 0===e.x&&void 0===e.y;this._initialize(n&&e,!n&&a.read(arguments))},_clone:function we(t){return t.setContent(this._content),we.base.call(this,t)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(69)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),L=O.extend({_class:"PointText",initialize:function(){O.apply(this,arguments)},clone:function(t){return this._clone(new L({insert:!1}),t)},getPoint:function(){var t=this._matrix.getTranslation();return new u(t.x,t.y,this,"setPoint")},setPoint:function(t){t=a.read(arguments),this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t){if(this._content){this._setStyles(t);var e=this._style,n=this._lines,i=e.getLeading();t.font=e.getFontStyle(),t.textAlign=e.getJustification();for(var r=0,s=n.length;s>r;r++){var o=n[r];e.getFillColor()&&t.fillText(o,0,0),e.getStrokeColor()&&t.strokeText(o,0,0),t.translate(0,i)}}}},new function(){var t=null;return{_getBounds:function(e,n){t||(t=Y.getContext(1,1));var i=this._style,r=this._lines,s=r.length,o=i.getJustification(),a=i.getLeading(),u=0;t.font=i.getFontStyle();for(var c=0,h=0;s>h;h++)c=Math.max(c,t.measureText(r[h]).width);"left"!==o&&(u-=c/("center"===o?2:1));var l=new f(u,s?-.75*a:0,c,s*a);return n?n._transformBounds(l,l):l}}}),I=t.extend(new function(){function e(t){var e=u[t];if(!e){i||(i=Y.getContext(1,1),i.globalCompositeOperation="copy"),i.fillStyle="rgba(0,0,0,0)",i.fillStyle=t,i.fillRect(0,0,1,1);var n=i.getImageData(0,0,1,1).data;e=u[t]=[n[0]/255,n[1]/255,n[2]/255]}return e.slice()}function n(t){var e=t.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);if(e.length>=4){for(var n=[0,0,0],i=0;3>i;i++){var r=e[i+1];n[i]=parseInt(1==r.length?r+r:r,16)/255}return n}}var i,r={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},o={},u={},c=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],h={"rgb-hsb":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),s=i-r,o=0===s?0:60*(i==t?(e-n)/s+(n>e?6:0):i==e?(n-t)/s+2:(t-e)/s+4);return[o,0===i?0:s/i,i]},"hsb-rgb":function(t,e,n){var t=t/60%6,i=Math.floor(t),r=t-i,i=c[i],s=[n,n*(1-e),n*(1-e*r),n*(1-e*(1-r))];return[s[i[0]],s[i[1]],s[i[2]]]},"rgb-hsl":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),s=i-r,o=0===s,a=o?0:60*(i==t?(e-n)/s+(n>e?6:0):i==e?(n-t)/s+2:(t-e)/s+4),u=(i+r)/2,c=o?0:.5>u?s/(i+r):s/(2-i-r);return[a,c,u]},"hsl-rgb":function(t,e,n){if(t/=360,0===e)return[n,n,n];for(var i=[t+1/3,t,t-1/3],r=.5>n?n*(1+e):n+e-n*e,s=2*n-r,o=[],a=0;3>a;a++){var u=i[a];0>u&&(u+=1),u>1&&(u-=1),o[a]=1>6*u?s+6*(r-s)*u:1>2*u?r:2>3*u?s+6*(r-s)*(2/3-u):s}return o},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return t.each(r,function(e,n){o[n]=[],t.each(e,function(e,i){var s=t.capitalize(e),u=/^(hue|saturation)$/.test(e),c=o[n][i]="gradient"===e?function(t){var e=this._components[0];
return t=z.read(Array.isArray(t)?t:arguments,0,0,{readNull:!0}),e!==t&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"hue"===e?function(t){return isNaN(t)?0:(t%360+360)%360}:"gradient"===n?function(){return a.read(arguments,0,0,{readNull:"highlight"===e,clone:!0})}:function(t){return isNaN(t)?0:Math.min(Math.max(t,0),1)};this["get"+s]=function(){return this._type===n||u&&/^hs[bl]$/.test(this._type)?this._components[i]:this._convert(n)[i]},this["set"+s]=function(t){this._type===n||u&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(n),this._properties=r[n],this._type=n),t=c.call(this,t),null!=t&&(this._components[i]=t,this._changed())}},this)},{_class:"Color",_readIndex:!0,initialize:function l(t){var i,s,a,u,c=Array.prototype.slice,h=arguments,f=0,d=!0;Array.isArray(t)&&(h=t,t=h[0]);var p=null!=t&&typeof t;if("string"===p&&t in r&&(i=t,t=h[1],Array.isArray(t)?(s=t,a=h[2]):(this.__read&&(f=1),h=c.call(h,1),p=typeof t)),!s){if(d=!(this.__options&&this.__options.dontParse),u="number"===p?h:"object"===p&&null!=t.length?t:null){i||(i=u.length>=3?"rgb":"gray");var g=r[i].length;a=u[g],this.__read&&(f+=u===arguments?g+(null!=a?1:0):1),u.length>g&&(u=c.call(u,0,g))}else if("string"===p)s=t.match(/^#[0-9a-f]{3,6}$/i)?n(t):e(t),i="rgb";else if("object"===p)if(t.constructor===l){if(i=t._type,s=t._components.slice(),a=t._alpha,"gradient"===i)for(var m=1,v=s.length;v>m;m++){var _=s[m];_&&(s[m]=_.clone())}}else if(t.constructor===z)i="gradient",u=h;else{i="hue"in t?"lightness"in t?"hsl":"hsb":"gradient"in t||"stops"in t||"radial"in t?"gradient":"gray"in t?"gray":"rgb";var y=r[i];w=d&&o[i],this._components=s=[];for(var m=0,v=y.length;v>m;m++){var b=t[y[m]];null==b&&0===m&&"gradient"===i&&"stops"in t&&(b={stops:t.stops,radial:t.radial}),d&&(b=w[m].call(this,b)),null!=b&&(s[m]=b)}a=t.alpha}this.__read&&i&&(f=1)}if(this._type=i||"rgb","gradient"===i&&(this._id=l._id=(l._id||0)+1),!s){this._components=s=[];for(var w=o[this._type],m=0,v=w.length;v>m;m++){var b=u&&u[m];d&&(b=w[m].call(this,b)),null!=b&&(s[m]=b)}}this._components=s,this._properties=r[this._type],this._alpha=a,this.__read&&(this.__read=f)},_serialize:function(e,n){var i=this.getComponents();return t.serialize(/^(gray|rgb)$/.test(this._type)?i:[this._type].concat(i),e,!0,n)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(17)},clone:function(){return new I(this._type,this._components.slice(),this._alpha)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=h[this._type+"-"+t])?e.apply(this,this._components):h["rgb-"+t].apply(this,h[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new I(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=r[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(e){return t.isPlainValue(e)&&(e=I.read(arguments)),e===this||e&&this._type===e._type&&this._alpha===e._alpha&&t.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,i=s.instance,r=0,o=t.length;o>r;r++){var a=this._components[r];null!=a&&e.push(t[r]+": "+(n?a:i.number(a)))}return null!=this._alpha&&e.push("alpha: "+i.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){var e=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;return e=[Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])],1>n&&e.push(n),(4==e.length?"rgba(":"rgb(")+e.join(",")+")"},toCanvasStyle:function(t){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var e,n=this._components,i=n[0],r=i._stops,s=n[1],o=n[2];if(i._radial){var a=o.getDistance(s),u=n[3];if(u){var c=u.subtract(s);c.getLength()>a&&(u=s.add(c.normalize(a-.1)))}var h=u||s;e=t.createRadialGradient(h.x,h.y,0,s.x,s.y,a)}else e=t.createLinearGradient(s.x,s.y,o.x,o.y);for(var l=0,f=r.length;f>l;l++){var d=r[l];e.addColorStop(d._rampPoint,d._color.toCanvasStyle())}return this._canvasStyle=e},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,i=e.length;i>n;n++){var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:r,random:function(){var t=Math.random;return new I(t(),t(),t())}}})},new function(){function e(t,e){return 0>t?0:e&&t>360?360:!e&&t>1?1:t}var n={add:function(t,n,i){return e(t+n,i)},subtract:function(t,n,i){return e(t-n,i)},multiply:function(t,n,i){return e(t*n,i)},divide:function(t,n,i){return e(t/n,i)}};return t.each(n,function(t,e){var n={dontParse:/^(multiply|divide)$/.test(e)};this[e]=function(e){e=I.read(arguments,0,0,n);for(var i=this._type,r=this._properties,s=this._components,o=e._convert(i),a=0,u=s.length;u>a;a++)o[a]=t(s[a],o[a],"hue"===r[a]);return new I(i,o,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}},{})});t.each(I._types,function(e,n){var i=this[t.capitalize(n)+"Color"]=function(t){var e=null!=t&&typeof t,i="object"===e&&null!=t.length?t:"string"===e?null:arguments;return i?new I(n,i):new I(t)};if(3==n.length){var r=n.toUpperCase();I[r]=this[r+"Color"]=i}},t.exports);var z=t.extend({_class:"Gradient",initialize:function xe(t,e){this._id=xe._id=(xe._id||0)+1,t&&this._set(t)&&(t=e=null),this._stops||this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(e,n){return n.add(this,function(){return t.serialize([this._stops,this._radial],e,!0,n)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;e>t;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1!=e&&(this._owners.splice(e,1),0===this._owners.length&&delete this._owners)},clone:function(){for(var t=[],e=0,n=this._stops.length;n>e;e++)t[e]=this._stops[e].clone();return new this.constructor(t)},getStops:function(){return this._stops},setStops:function(t){if(this.stops)for(var e=0,n=this._stops.length;n>e;e++)delete this._stops[e]._owner;if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");this._stops=F.readAll(t,0,!1,!0);for(var e=0,n=this._stops.length;n>e;e++){var i=this._stops[e];i._owner=this,i._defaultRamp&&i.setRampPoint(e/(n-1))}this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t&&t.constructor==this.constructor&&this._stops.length==t._stops.length){for(var e=0,n=this._stops.length;n>e;e++)if(!this._stops[e].equals(t._stops[e]))return!1;return!0}return!1}}),F=t.extend({_class:"GradientStop",initialize:function(t,e){if(t){var n,i;void 0===e&&Array.isArray(t)?(n=t[0],i=t[1]):t.color?(n=t.color,i=t.rampPoint):(n=t,i=e),this.setColor(n),this.setRampPoint(i)}},clone:function(){return new F(this._color.clone(),this._rampPoint)},_serialize:function(e,n){return t.serialize([this._color,this._rampPoint],e,!0,n)},_changed:function(){this._owner&&this._owner._changed(17)},getRampPoint:function(){return this._rampPoint},setRampPoint:function(t){this._defaultRamp=null==t,this._rampPoint=t||0,this._changed()},getColor:function(){return this._color},setColor:function(t){this._color=I.read(arguments),this._color===t&&(this._color=t.clone()),this._color._owner=this,this._changed()},equals:function(t){return t===this||t instanceof F&&this._color.equals(t._color)&&this._rampPoint==t._rampPoint||!1}}),B=t.extend(new function(){var e={fillColor:void 0,strokeColor:void 0,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",miterLimit:10,dashOffset:0,dashArray:[],shadowColor:void 0,shadowBlur:0,shadowOffset:new a,selectedColor:void 0,font:"sans-serif",fontSize:12,leading:null,justification:"left"},n={strokeWidth:25,strokeCap:25,strokeJoin:25,miterLimit:25,font:5,fontSize:5,leading:5,justification:5},i={},r={_defaults:e,_textDefaults:t.merge(e,{fillColor:new I})};return t.each(e,function(e,s){var o=/Color$/.test(s),a=t.capitalize(s),u=n[s],c="set"+a,h="get"+a;r[c]=function(t){var e=this._item&&this._item._children;if(e&&e.length>0&&"compound-path"!==this._item._type)for(var n=0,i=e.length;i>n;n++)e[n]._style[c](t);else{var r=this._values[s];r!=t&&(o&&(r&&delete r._owner,t&&t.constructor===I&&(t._owner=this._item)),this._values[s]=t,this._item&&this._item._changed(u||17))}},r[h]=function(){var e,n=this._item&&this._item._children;if(!n||0===n.length||arguments[0]||"compound-path"===this._item._type){var e=this._values[s];return void 0===e?(e=this._defaults[s],e&&e.clone&&(e=e.clone()),this._values[s]=e):!o||e&&e.constructor===I||(this._values[s]=e=I.read([e],0,0,{readNull:!0,clone:!0}),e&&(e._owner=this._item)),e}for(var i=0,r=n.length;r>i;i++){var a=n[i]._style[h]();if(0===i)e=a;else if(!t.equals(e,a))return void 0}return e},i[h]=function(){return this._style[h]()},i[c]=function(t){this._style[c](t)}}),_.inject(i),r},{_class:"Style",initialize:function(t,e){this._values={},this._item=e,e instanceof O&&(this._defaults=this._textDefaults),t&&this.set(t)},set:function(t){var e=t instanceof B,n=e?t._values:t;if(n)for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&e&&r.clone?r.clone():r}},getLeading:function Ce(){var t=Ce.base.call(this);return null!=t?t:1.2*this.getFontSize()},getFontStyle:function(){var t=this.getFontSize();return(/[a-z]/i.test(t)?t+" ":t+"px ")+this.getFont()}}),$=new function(){function e(n,i){for(var r=[],s=0,o=n&&n.length;o>s;){var a=n[s++];if("string"==typeof a)a=document.createElement(a);else if(!a||!a.nodeType)continue;t.isPlainObject(n[s])&&$.set(a,n[s++]),Array.isArray(n[s])&&e(n[s++],a),i&&i.appendChild(a),r.push(a)}return r}var n=/^(checked|value|selected|disabled)$/i,i={text:"textContent",html:"innerHTML"},r={lineHeight:1,zoom:1,zIndex:1,opacity:1};return{create:function(t,n){var i=Array.isArray(t),r=e(i?t:arguments,i?n:null);return 1==r.length?r[0]:r},find:function(t,e){return(e||document).querySelector(t)},findAll:function(t,e){return(e||document).querySelectorAll(t)},get:function(t,e){return t?n.test(e)?"value"===e||"string"!=typeof t[e]?t[e]:!0:e in i?t[i[e]]:t.getAttribute(e):null},set:function(t,e,r){if("string"!=typeof e)for(var s in e)e.hasOwnProperty(s)&&this.set(t,s,e[s]);else{if(!t||void 0===r)return t;n.test(e)?t[e]=r:e in i?t[i[e]]=r:"style"===e?this.setStyle(t,r):"events"===e?R.add(t,r):t.setAttribute(e,r)}return t},getStyles:function(t){var e=t&&t.ownerDocument.defaultView;return e&&e.getComputedStyle(t,"")},getStyle:function(t,e){return t&&t.style[e]||this.getStyles(t)[e]||null},setStyle:function(t,e,n){if("string"!=typeof e)for(var i in e)e.hasOwnProperty(i)&&this.setStyle(t,i,e[i]);else!/^-?[\d\.]+$/.test(n)||e in r||(n+="px"),t.style[e]=n;return t},hasClass:function(t,e){return new RegExp("\\s*"+e+"\\s*").test(t.className)},addClass:function(t,e){t.className=(t.className+" "+e).trim()},removeClass:function(t,e){t.className=t.className.replace(new RegExp("\\s*"+e+"\\s*")," ").trim()},remove:function(t){t.parentNode&&t.parentNode.removeChild(t)},removeChildren:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},getBounds:function(t,e){var n,i=t.ownerDocument,r=i.body,s=i.documentElement;try{n=t.getBoundingClientRect()}catch(o){n={left:0,top:0,width:0,height:0}}var a=n.left-(s.clientLeft||r.clientLeft||0),u=n.top-(s.clientTop||r.clientTop||0);if(!e){var c=i.defaultView;a+=c.pageXOffset||s.scrollLeft||r.scrollLeft,u+=c.pageYOffset||s.scrollTop||r.scrollTop}return new f(a,u,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,i=e.documentElement;return new f(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(t,e){return this.getBounds(t,e).getPoint()},getSize:function(t){return this.getBounds(t,!0).getSize()},isInvisible:function(t){return this.getSize(t).equals(new c(0,0))},isInView:function(t){return!this.isInvisible(t)&&this.getViewportBounds(t).intersects(this.getBounds(t,!0))}}},R={add:function(t,e){for(var n in e){var i=e[n];t.addEventListener?t.addEventListener(n,i,!1):t.attachEvent&&t.attachEvent("on"+n,i.bound=function(){i.call(t,window.event)})}},remove:function(t,e){for(var n in e){var i=e[n];t.removeEventListener?t.removeEventListener(n,i,!1):t.detachEvent&&t.detachEvent("on"+n,i.bound)}},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new a(e.pageX||e.clientX+document.documentElement.scrollLeft,e.pageY||e.clientY+document.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getOffset:function(t,e){return R.getPoint(t).subtract($.getOffset(e||R.getTarget(t)))},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},stop:function(t){R.stopPropagation(t),R.preventDefault(t)}};R.requestAnimationFrame=new function(){var t="equestAnimationFrame",e=window["r"+t]||window["webkitR"+t]||window["mozR"+t]||window["oR"+t]||window["msR"+t];e&&e(function(t){null==t&&(e=null)});var i,r=[],s=!0;return R.add(window,{focus:function(){s=!0},blur:function(){s=!1}}),function(t,o){return e?e(t,o):(r.push([t,o]),i||(i=setInterval(function(){for(var t=r.length-1;t>=0;t--){var e=r[t],i=e[0],o=e[1];(!o||("true"==n.getAttribute(o,"keepalive")||s)&&$.isInView(o))&&(r.splice(t,1),i(Date.now()))}},1e3/60)),void 0)}};var q=t.extend(e,{_class:"View",initialize:function Se(t){this._scope=paper,this._project=paper.project,this._element=t;var e;if(this._id=t.getAttribute("id"),null==this._id&&t.setAttribute("id",this._id="view-"+Se._id++),R.add(t,this._viewHandlers),n.hasAttribute(t,"resize")){var i=$.getOffset(t,!0),r=this;e=$.getViewportBounds(t).getSize().subtract(i),this._windowHandlers={resize:function(){$.isInvisible(t)||(i=$.getOffset(t,!0)),r.setViewSize($.getViewportBounds(t).getSize().subtract(i))}},R.add(window,this._windowHandlers)}else e=new c(parseInt(t.getAttribute("width"),10),parseInt(t.getAttribute("height"),10)),e.isNaN()&&(e=$.getSize(t));if(t.width=e.width,t.height=e.height,n.hasAttribute(t,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var s=this._stats.domElement,o=s.style,i=$.getOffset(t);o.position="absolute",o.left=i.x+"px",o.top=i.y+"px",document.body.appendChild(s)}Se._views.push(this),Se._viewsById[this._id]=this,this._viewSize=new h(e.width,e.height,this,"setViewSize"),this._matrix=new p,this._zoom=1,Se._focused||(Se._focused=this),this._frameItems={},this._frameItemCount=0},remove:function(){return this._project?(q._focused==this&&(q._focused=null),q._views.splice(q._views.indexOf(this),1),delete q._viewsById[this._id],this._project.view==this&&(this._project.view=null),R.remove(this._element,this._viewHandlers),R.remove(window,this._windowHandlers),this._element=this._project=null,this.detach("frame"),this._frameItems={},!0):!1},_events:{onFrame:{install:function(){this._requested||(this._animate=!0,this._requestFrame())},uninstall:function(){this._animate=!1}},onResize:{}},_animate:!1,_time:0,_count:0,_requestFrame:function(){var t=this;R.requestAnimationFrame(function(){t._requested=!1,t._animate&&(t._requestFrame(),t._handleFrame())},this._element),this._requested=!0},_handleFrame:function(){paper=this._scope;var e=Date.now()/1e3,n=this._before?e-this._before:0;this._before=e,this._handlingFrame=!0,this.fire("frame",t.merge({delta:n,time:this._time+=n,count:this._count++})),this._stats&&this._stats.update(),this._handlingFrame=!1,this.draw(!0)},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1===++this._frameItemCount&&this.attach("frame",this._handleFrameItems)):(delete n[t._id],0===--this._frameItemCount&&this.detach("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var n in this._frameItems){var i=this._frameItems[n];i.item.fire("frame",t.merge(e,{time:i.time+=e.delta,count:i.count++}))}},_redraw:function(){this._project._needsRedraw=!0,this._handlingFrame||(this._animate?this._handleFrame():this.draw())},_transform:function(t){this._matrix.concatenate(t),this._bounds=null,this._inverse=null,this._redraw()},getElement:function(){return this._element},getViewSize:function(){return this._viewSize},setViewSize:function(t){t=c.read(arguments);var e=t.subtract(this._viewSize);e.isZero()||(this._element.width=t.width,this._element.height=t.height,this._viewSize.set(t.width,t.height,!0),this._bounds=null,this.fire("resize",{size:t,delta:e}),this._redraw())},getBounds:function(){return this._bounds||(this._bounds=this._getInverse()._transformBounds(new f(new a,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize(arguments[0])},getCenter:function(){return this.getBounds().getCenter(arguments[0])},setCenter:function(t){t=a.read(arguments),this.scrollBy(t.subtract(this.getCenter()))},getZoom:function(){return this._zoom},setZoom:function(t){this._transform((new p).scale(t/this._zoom,this.getCenter())),this._zoom=t},isVisible:function(){return $.isInView(this._element)},scrollBy:function(){this._transform((new p).translate(a.read(arguments).negate()))},projectToView:function(){return this._matrix._transformPoint(a.read(arguments))},viewToProject:function(){return this._getInverse()._transformPoint(a.read(arguments))},_getInverse:function(){return this._inverse||(this._inverse=this._matrix.inverted()),this._inverse}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t){return"string"==typeof t&&(t=document.getElementById(t)),new H(t)}}},new function(){function t(t){var e=R.getTarget(t);return e.getAttribute&&q._viewsById[e.getAttribute("id")]}function e(t,e){return t.viewToProject(R.getOffset(e,t._element))}function n(){if(!q._focused||!q._focused.isVisible())for(var t=0,e=q._views.length;e>t;t++){var n=q._views[t];if(n&&n.isVisible()){q._focused=c=n;break}}}function i(n){var i=q._focused=t(n),r=e(i,n);h=!0,i._onMouseDown&&i._onMouseDown(n,r),(a=i._scope._tool)&&a._onHandleEvent("mousedown",r,n),i.draw(!0)}function r(i){var r;if(h||(r=t(i),r?(u=q._focused,q._focused=c=r):c&&c==q._focused&&(q._focused=u,n())),r=r||q._focused){var s=i&&e(r,i);r._onMouseMove&&r._onMouseMove(i,s),(a=r._scope._tool)&&a._onHandleEvent(h&&a.responds("mousedrag")?"mousedrag":"mousemove",s,i)&&R.stop(i),r.draw(!0)}}function s(t){var n=q._focused;if(n&&h){var i=e(n,t);curPoint=null,h=!1,n._onMouseUp&&n._onMouseUp(t,i),a&&a._onHandleEvent("mouseup",i,t)&&R.stop(t),n.draw(!0)}}function o(t){h&&R.stop(t)}var a,u,c,h=!1;return R.add(document,{mousemove:r,mouseup:s,touchmove:r,touchend:s,selectstart:o,scroll:n}),R.add(window,{load:n}),{_viewHandlers:{mousedown:i,touchstart:i,selectstart:o},statics:{updateFocus:n}}}),H=q.extend({_class:"CanvasView",initialize:function(t){if(!(t instanceof HTMLCanvasElement)){var e=c.read(arguments,1);e.isZero()&&(e=new c(1024,768)),t=Y.getCanvas(e)}this._context=t.getContext("2d"),this._eventCounters={},q.call(this,t)},draw:function(t){if(t&&!this._project._needsRedraw)return!1;var e=this._context,n=this._viewSize;return e.clearRect(0,0,n._width+1,n._height+1),this._project.draw(e,this._matrix),this._project._needsRedraw=!1,!0}},new function(){function t(t,e,n,i,r,s){for(var o,a=i;a;){if(a.responds(t)&&(o||(o=new X(t,e,n,i,r?n.subtract(r):null)),a.fire(t,o)&&(!s||o._stopped)))return!1;a=a.getParent()}return!0}function e(e,n,i,r,s){if(e._eventCounters[n]){var o=e._project,c=o.hitTest(r,{tolerance:o.options.hitTolerance||0,fill:!0,stroke:!0}),h=c&&c.item;if(h)return"mousemove"===n&&h!=a&&(s=r),"mousemove"===n&&u||t(n,i,r,h,s),h}}var n,i,r,s,o,a,u,c,h;return{_onMouseDown:function(t,a){var l=e(this,"mousedown",t,a);c=o==l&&Date.now()-h<300,s=o=l,n=i=r=a,u=s&&s.responds("mousedrag")},_onMouseUp:function(o,a){var l=e(this,"mouseup",o,a);u&&(i&&!i.equals(a)&&t("mousedrag",o,a,s,i),l!=s&&(r=a,t("mousemove",o,a,l,r))),l===s&&(h=Date.now(),(!c||t("doubleclick",o,n,l))&&t("click",o,n,l),c=!1),s=null,u=!1},_onMouseMove:function(n,o){s&&t("mousedrag",n,o,s,i);var u=e(this,"mousemove",n,o,r);i=r=o,u!==a&&(t("mouseleave",n,o,a),a=u,t("mouseenter",n,o,u))}}}),U=t.extend({_class:"Event",initialize:function(t){this.event=t},preventDefault:function(){this._prevented=!0,R.preventDefault(this.event)},stopPropagation:function(){this._stopped=!0,R.stopPropagation(this.event)},stop:function(){this.stopPropagation(),this.preventDefault()},getModifiers:function(){return V.modifiers}}),W=U.extend({_class:"KeyEvent",initialize:function(t,e,n,i){U.call(this,i),this.type=t?"keydown":"keyup",this.key=e,this.character=n},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),V=new function(){function e(t,e,n,r){var s=String.fromCharCode(n),a=i[e]||s.toLowerCase(),u=t?"keydown":"keyup",c=q._focused,h=c&&c.isVisible()&&c._scope,l=h&&h._tool;o[a]=t,l&&l.responds(u)&&(l.fire(u,new W(t,a,s,r)),c&&c.draw(!0))}var n,i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"option",19:"pause",20:"caps-lock",27:"escape",32:"space",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",46:"delete",91:"command",93:"command",224:"command"},r=t.merge({shift:!1,control:!1,option:!1,command:!1,capsLock:!1,space:!1}),s={},o={};return R.add(document,{keydown:function(o){var a,u=o.which||o.keyCode,c=i[u];c?((a=t.camelize(c))in r&&(r[a]=!0),s[u]=0,e(!0,u,null,o)):n=u},keypress:function(t){if(null!=n){var i=t.which||t.keyCode;s[n]=i,e(!0,n,i,t),n=null}},keyup:function(n){var o,a=n.which||n.keyCode,u=i[a];u&&(o=t.camelize(u))in r&&(r[o]=!1),null!=s[a]&&(e(!1,a,s[a],n),delete s[a])}}),{modifiers:r,isDown:function(t){return!!o[t]}}},X=U.extend({_class:"MouseEvent",initialize:function(t,e,n,i,r){U.call(this,e),this.type=t,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}});t.extend(e,{_class:"Palette",_events:["onChange"],initialize:function(e,n,i){var r=$.find(".palettejs-panel")||$.find("body").appendChild($.create("div",{"class":"palettejs-panel"}));this._element=r.appendChild($.create("table",{"class":"palettejs-pane"})),this._title=e,i||(i={});for(var s in this._components=n){var o=n[s];o instanceof J||(null==o.value&&(o.value=i[s]),o.name=s,o=n[s]=new J(o)),this._element.appendChild(o._element),o._palette=this,void 0===i[s]&&(i[s]=o.value)}this._values=t.each(i,function(e,r){var s=n[r];s&&t.define(i,r,{enumerable:!0,configurable:!0,get:function(){return s._value},set:function(t){s.setValue(t)}})}),window.paper&&paper.palettes.push(this)},reset:function(){for(var t in this._components)this._components[t].reset()},remove:function(){$.remove(this._element)}});var J=t.extend(e,{_class:"Component",_events:["onChange","onClick"],_types:{"boolean":{type:"checkbox",value:"checked"},string:{type:"text"},number:{type:"number",number:!0},button:{type:"button"},text:{tag:"div",value:"text"},slider:{type:"range",number:!0},list:{tag:"select",options:function(){$.removeChildren(this._inputItem),$.create(t.each(this._options,function(t){this.push("option",{value:t,text:t})},[]),this._inputItem)}}},initialize:function(e){this._type=e.type in this._types?e.type:"options"in e?"list":"onClick"in e?"button":typeof e.value,this._info=this._types[this._type]||{type:this._type};var n=this,i=!1;this._inputItem=$.create(this._info.tag||"input",{type:this._info.type,events:{change:function(){n.setValue($.get(this,n._info.value||"value")),i&&(n._palette.fire("change",n,n.name,n._value),n.fire("change",n._value))},click:function(){n.fire("click")}}}),this._element=$.create("tr",[this._labelItem=$.create("td"),"td",[this._inputItem]]),t.each(e,function(t,e){this[e]=t},this),this._defaultValue=this._value,i=!0},getType:function(){return this._type},getLabel:function(){return this._label},setLabel:function(t){this._label=t,$.set(this._labelItem,"text",t+":")},getOptions:function(){return this._options},setOptions:function(t){this._options=t,this._info.options&&this._info.options.call(this)},getValue:function(){return this._value},setValue:function(t){var e=this._info.value||"value";$.set(this._inputItem,e,t),t=$.get(this._inputItem,e),this._value=this._info.number?parseFloat(t,10):t},getRange:function(){return[parseFloat($.get(this._inputItem,"min")),parseFloat($.get(this._inputItem,"max"))]},setRange:function(t,e){var n=Array.isArray(t)?t:[t,e];$.set(this._inputItem,{min:n[0],max:n[1]})},getMin:function(){return this.getRange()[0]},setMin:function(t){this.setRange(t,this.getMax())},getMax:function(){return this.getRange()[1]},setMax:function(t){this.setRange(this.getMin(),t)},getStep:function(){return parseFloat($.get(this._inputItem,"step"))},setStep:function(t){$.set(this._inputItem,"step",t)},reset:function(){this.setValue(this._defaultValue)}}),Z=U.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t?t:e?e.clone():null},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return/^mouse(down|up)$/.test(this.type)?this.tool._downCount:this.tool._count},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(group|compound-path)$/.test(n._type);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),G=r.extend({_class:"Tool",_list:"tools",_reference:"_tool",_events:["onActivate","onDeactivate","onEditOptions","onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onKeyDown","onKeyUp"],initialize:function(t){r.call(this),this._firstMove=!0,this._count=0,this._downCount=0,this._set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=this._minDistance&&null!=this._maxDistance&&this._minDistance>this._maxDistance&&(this._maxDistance=this._minDistance)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=this._maxDistance&&this._maxDistance<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=t,this._maxDistance=t},_updateEvent:function(t,e,n,i,r,s,o){if(!r){if(null!=n||null!=i){var a=null!=n?n:0,u=e.subtract(this._point),c=u.getLength();if(a>c)return!1;var h=null!=i?i:0;if(0!=h)if(c>h)e=this._point.add(u.normalize(h));else if(o)return!1}if(s&&e.equals(this._point))return!1}switch(this._lastPoint=r&&"mousemove"==t?e:this._point,this._point=e,t){case"mousedown":this._lastPoint=this._downPoint,this._downPoint=this._point,this._downCount++;break;case"mouseup":this._lastPoint=this._downPoint}return this._count=r?0:this._count+1,!0},_fireEvent:function(t,e){var n=paper.project._removeSets;if(n){"mouseup"===t&&(n.mousedrag=null);var i=n[t];if(i){for(var r in i){var s=i[r];for(var o in n){var a=n[o];a&&a!=i&&delete a[s._id]}s.remove()}n[t]=null}}return this.responds(t)&&this.fire(t,new Z(this,t,e))},_onHandleEvent:function(t,e,n){paper=this._scope;var i=!1;switch(t){case"mousedown":this._updateEvent(t,e,null,null,!0,!1,!1),i=this._fireEvent(t,n);break;case"mousedrag":for(var r=!1,s=!1;this._updateEvent(t,e,this.minDistance,this.maxDistance,!1,r,s);)i=this._fireEvent(t,n)||i,r=!0,s=!0;break;case"mouseup":!e.equals(this._point)&&this._updateEvent("mousedrag",e,this.minDistance,this.maxDistance,!1,!1,!1)&&(i=this._fireEvent("mousedrag",n)),this._updateEvent(t,e,null,this.maxDistance,!1,!1,!1),i=this._fireEvent(t,n)||i,this._updateEvent(t,e,null,null,!0,!1,!1),this._firstMove=!0;break;case"mousemove":for(;this._updateEvent(t,e,this.minDistance,this.maxDistance,this._firstMove,!0,!1);)i=this._fireEvent(t,n)||i,this._firstMove=!1}return i}}),Y={canvases:[],getCanvas:function(t,e){var n,i=void 0===e?t:new c(t,e),r=!0;n=this.canvases.length?this.canvases.pop():document.createElement("canvas");var s=n.getContext("2d");return s.save(),n.width===i.width&&n.height===i.height?r&&s.clearRect(0,0,i.width+1,i.height+1):(n.width=i.width,n.height=i.height),n},getContext:function(t,e){return this.getCanvas(t,e).getContext("2d")},release:function(t){var e=t.canvas?t.canvas:t;e.getContext("2d").restore(),this.canvases.push(e)}},Q=new function(){function e(t,e,n){return.2989*t+.587*e+.114*n}function n(t,n,i,r){var s=r-e(t,n,i);d=t+s,p=n+s,g=i+s;var r=e(d,p,g),o=m(d,p,g),a=v(d,p,g);if(0>o){var u=r-o;d=r+(d-r)*r/u,p=r+(p-r)*r/u,g=r+(g-r)*r/u}if(a>255){var c=255-r,h=a-r;d=r+(d-r)*c/h,p=r+(p-r)*c/h,g=r+(g-r)*c/h}}function i(t,e,n){return v(t,e,n)-m(t,e,n)}function r(t,e,n,i){var r,s=[t,e,n],o=v(t,e,n),a=m(t,e,n);a=a===t?0:a===e?1:2,o=o===t?0:o===e?1:2,r=0===m(a,o)?1===v(a,o)?2:1:0,s[o]>s[a]?(s[r]=(s[r]-s[a])*i/(s[o]-s[a]),s[o]=i):s[r]=s[o]=0,s[a]=0,d=s[0],p=s[1],g=s[2]}var s,o,a,u,c,h,l,f,d,p,g,m=Math.min,v=Math.max,_=Math.abs,y={multiply:function(){d=c*s/255,p=h*o/255,g=l*a/255},screen:function(){d=c+s-c*s/255,p=h+o-h*o/255,g=l+a-l*a/255},overlay:function(){d=128>c?2*c*s/255:255-2*(255-c)*(255-s)/255,p=128>h?2*h*o/255:255-2*(255-h)*(255-o)/255,g=128>l?2*l*a/255:255-2*(255-l)*(255-a)/255},"soft-light":function(){var t=s*c/255;d=t+c*(255-(255-c)*(255-s)/255-t)/255,t=o*h/255,p=t+h*(255-(255-h)*(255-o)/255-t)/255,t=a*l/255,g=t+l*(255-(255-l)*(255-a)/255-t)/255},"hard-light":function(){d=128>s?2*s*c/255:255-2*(255-s)*(255-c)/255,p=128>o?2*o*h/255:255-2*(255-o)*(255-h)/255,g=128>a?2*a*l/255:255-2*(255-a)*(255-l)/255},"color-dodge":function(){d=0===c?0:255===s?255:m(255,255*c/(255-s)),p=0===h?0:255===o?255:m(255,255*h/(255-o)),g=0===l?0:255===a?255:m(255,255*l/(255-a))},"color-burn":function(){d=255===c?255:0===s?0:v(0,255-255*(255-c)/s),p=255===h?255:0===o?0:v(0,255-255*(255-h)/o),g=255===l?255:0===a?0:v(0,255-255*(255-l)/a)},darken:function(){d=s>c?c:s,p=o>h?h:o,g=a>l?l:a},lighten:function(){d=c>s?c:s,p=h>o?h:o,g=l>a?l:a},difference:function(){d=c-s,0>d&&(d=-d),p=h-o,0>p&&(p=-p),g=l-a,0>g&&(g=-g)},exclusion:function(){d=c+s*(255-c-c)/255,p=h+o*(255-h-h)/255,g=l+a*(255-l-l)/255},hue:function(){r(s,o,a,i(c,h,l)),n(d,p,g,e(c,h,l))},saturation:function(){r(c,h,l,i(s,o,a)),n(d,p,g,e(c,h,l))},luminosity:function(){n(c,h,l,e(s,o,a))},color:function(){n(s,o,a,e(c,h,l))},add:function(){d=m(c+s,255),p=m(h+o,255),g=m(l+a,255)},subtract:function(){d=v(c-s,0),p=v(h-o,0),g=v(l-a,0)},average:function(){d=(c+s)/2,p=(h+o)/2,g=(l+a)/2},negation:function(){d=255-_(255-s-c),p=255-_(255-o-h),g=255-_(255-a-l)}},b=this.nativeModes=t.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){this[t]=!0},{}),w=Y.getContext(1,1);t.each(y,function(t,e){w.save();var n="darken"===e,i=!1;w.fillStyle=n?"#300":"#a00",w.fillRect(0,0,1,1),w.globalCompositeOperation=e,w.globalCompositeOperation===e&&(w.fillStyle=n?"#a00":"#300",w.fillRect(0,0,1,1),i=w.getImageData(0,0,1,1).data[0]!==(n?170:51)),b[e]=i,w.restore()}),Y.release(w),this.process=function(t,e,n,i,r){var m=e.canvas,v="normal"===t;if(v||b[t])n.save(),n.setTransform(1,0,0,1,0,0),n.globalAlpha=i,v||(n.globalCompositeOperation=t),n.drawImage(m,r.x,r.y),n.restore();else{var _=y[t];if(!_)return;for(var w=n.getImageData(r.x,r.y,m.width,m.height),x=w.data,C=e.getImageData(0,0,m.width,m.height).data,S=0,k=x.length;k>S;S+=4){s=C[S],c=x[S],o=C[S+1],h=x[S+1],a=C[S+2],l=x[S+2],u=C[S+3],f=x[S+3],_();var P=u*i/255,T=1-P;x[S]=P*d+T*c,x[S+1]=P*p+T*h,x[S+2]=P*g+T*l,x[S+3]=u*i+T*f
}n.putImageData(w,r.x,r.y)}}},K=t.each({fillColor:["fill","color"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],font:["font-family","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","string"]},function(e,n){var i=t.capitalize(n),r=e[2];this[n]={type:e[1],property:n,attribute:e[0],toSVG:r,fromSVG:r&&t.each(r,function(t,e){this[t]=e},{}),get:"get"+i,set:"set"+i}},{}),te={href:"http://www.w3.org/1999/xlink",xlink:"http://www.w3.org/2000/xmlns"};return new function(){function e(t,e){for(var n in e){var i=e[n],r=te[n];"number"==typeof i&&(i=A.number(i)),r?t.setAttributeNS(r,n,i):t.setAttribute(n,i)}return t}function n(t,n){return e(document.createElementNS("http://www.w3.org/2000/svg",t),n)}function r(t,e,n){return t[e]._point.getDistance(t[n]._point)}function a(t,e){var n=t._matrix,i=n.getTranslation(),r={};if(e){n=n.shiftless();var s=n._inverseTransform(i);r.x=s.x,r.y=s.y,i=null}if(n.isIdentity())return r;var a=n.decompose();if(a&&!a.shearing){var u=[],c=a.rotation,h=a.scaling;i&&!i.isZero()&&u.push("translate("+A.point(i)+")"),o.isZero(h.x-1)&&o.isZero(h.y-1)||u.push("scale("+A.point(h)+")"),c&&u.push("rotate("+A.number(c)+")"),r.transform=u.join(" ")}else r.transform="matrix("+n.getValues().join(",")+")";return r}function u(t,e,n,i){var r="rect"===n?e[1]._point.add(e[2]._point).divide(2):"roundrect"===n?e[3]._point.add(e[4]._point).divide(2):"circle"===n||"ellipse"===n?e[1]._point:null,s=r&&r.subtract(i).getAngle()+90;return o.isZero(s||0)?0:s}function c(t,e){function n(t,n){var i=e[t],r=i.getNext(),s=e[n],o=s.getNext();return i._handleOut.isZero()&&r._handleIn.isZero()&&s._handleOut.isZero()&&o._handleIn.isZero()&&r._point.subtract(i._point).isColinear(o._point.subtract(s._point))}function i(t){var n=e[t],i=n.getNext(),r=n._handleOut,s=i._handleIn,a=o.KAPPA;if(r.isOrthogonal(s)){var u=n._point,c=i._point,h=new g(u,r,!0).intersect(new g(c,s,!0),!0);return h&&o.isZero(r.getLength()/h.subtract(u).getLength()-a)&&o.isZero(s.getLength()/h.subtract(c).getLength()-a)}}if(t.isPolygon())return 4===e.length&&t._closed&&n(0,2)&&n(1,3)?"rect":0===e.length?"empty":e.length>=3?t._closed?"polygon":"polyline":"line";if(t._closed){if(8===e.length&&i(0)&&i(2)&&i(4)&&i(6)&&n(1,5)&&n(3,7))return"roundrect";if(4===e.length&&i(0)&&i(1)&&i(2)&&i(3))return o.isZero(r(e,0,2)-r(e,1,3))?"circle":"ellipse"}return"path"}function h(t){for(var i=a(t),r=t._children,s=n("g",i),o=0,u=r.length;u>o;o++){var c=r[o],h=P(c);if(h)if(c.isClipMask()){var l=n("clipPath");l.appendChild(h),S(c,l,"clip"),e(s,{"clip-path":"url(#"+l.id+")"})}else s.appendChild(h)}return s}function f(t){var e=a(t,!0),i=t.getSize();return e.x-=i.width/2,e.y-=i.height/2,e.width=i.width,e.height=i.height,e.href=t.toDataURL(),n("image",e)}function d(t){var e,s=t._segments,o=t.getPosition(!0),a=c(t,s),h=u(t,s,a,o);switch(a){case"empty":return null;case"path":var f=t.getPathData();e=f&&{d:f};break;case"polyline":case"polygon":var d=[];for(i=0,l=s.length;l>i;i++)d.push(A.point(s[i]._point));e={points:d.join(" ")};break;case"rect":var g=r(s,0,3),m=r(s,0,1),v=s[1]._point.rotate(-h,o);e={x:v.x,y:v.y,width:g,height:m};break;case"roundrect":a="rect";var g=r(s,1,6),m=r(s,0,3),_=(g-r(s,0,7))/2,y=(m-r(s,1,2))/2,b=s[3]._point,w=s[4]._point,v=b.subtract(w.subtract(b).normalize(_)).rotate(-h,o);e={x:v.x,y:v.y,width:g,height:m,rx:_,ry:y};break;case"line":var x=s[0]._point,C=s[s.length-1]._point;e={x1:x.x,y1:x.y,x2:C.x,y2:C.y};break;case"circle":var S=r(s,0,2)/2;e={cx:o.x,cy:o.y,r:S};break;case"ellipse":var _=r(s,2,0)/2,y=r(s,3,1)/2;e={cx:o.x,cy:o.y,rx:_,ry:y}}return h&&(e.transform="rotate("+A.number(h)+","+A.point(o)+")",t._gradientMatrix=(new p).rotate(-h,o)),n(a,e)}function v(t){var e=a(t,!0),i=t.getPathData();return i&&(e.d=i),n("path",e)}function y(t){var e=a(t,!0),i=t.getSymbol(),r=C(i,"symbol");return definition=i.getDefinition(),bounds=definition.getBounds(),r||(r=n("symbol",{viewBox:A.rectangle(bounds)}),r.appendChild(P(definition)),S(i,r,"symbol")),e.href="#"+r.id,e.x+=bounds.x,e.y+=bounds.y,e.width=A.number(bounds.width),e.height=A.number(bounds.height),n("use",e)}function b(t,e){var i=C(t,"color");if(!i){var r,s=t.getGradient(),o=s._radial,a=e._gradientMatrix,u=t.getOrigin().transform(a),c=t.getDestination().transform(a);if(o){r={cx:u.x,cy:u.y,r:u.getDistance(c)};var h=t.getHighlight();h&&(h=h.transform(a),r.fx=h.x,r.fy=h.y)}else r={x1:u.x,y1:u.y,x2:c.x,y2:c.y};r.gradientUnits="userSpaceOnUse",i=n((o?"radial":"linear")+"Gradient",r);for(var l=s._stops,f=0,d=l.length;d>f;f++){var p=l[f],g=p._color,m=g.getAlpha();r={offset:p._rampPoint,"stop-color":g.toCSS(!0)},1>m&&(r["stop-opacity"]=m),i.appendChild(n("stop",r))}S(t,i,"color")}return"url(#"+i.id+")"}function w(t){var e=n("text",a(t,!0));return e.textContent=t._content,e}function x(n,i){var r={},s=n.getParent();return null!=n._name&&(r.id=n._name),t.each(K,function(e){var i=e.get,o=e.type,a=n[i]();if(!s||!t.equals(s[i](),a)){if("color"===o&&null!=a){var u=a.getAlpha();1>u&&(r[e.attribute+"-opacity"]=u)}r[e.attribute]=null==a?"none":"number"===o?A.number(a):"color"===o?a.gradient?b(a,n):a.toCSS(!0):"array"===o?a.join(","):"lookup"===o?e.toSVG[a]:a}}),1===r.opacity&&delete r.opacity,null==n._visibility||n._visibility||(r.visibility="hidden"),delete n._gradientMatrix,e(i,r)}function C(t,e){return E||(E={ids:{},svgs:{}}),t&&E.svgs[e+"-"+t._id]}function S(t,e,n){E||C();var i=E.ids[n]=(E.ids[n]||0)+1;e.id=n+"-"+i,E.svgs[n+"-"+t._id]=e}function k(t,e){if(!E)return t;var i="svg"===t.nodeName.toLowerCase()&&t,r=null;for(var s in E.svgs)r||(i||(i=n("svg"),i.appendChild(t)),r=i.insertBefore(n("defs"),i.firstChild)),r.appendChild(E.svgs[s]);return E=null,e&&e.asString?(new XMLSerializer).serializeToString(i):i}function P(t){var e=M[t._type],n=e&&e(t,t._type);return n&&t._data&&n.setAttribute("data-paper-data",JSON.stringify(t._data)),n&&x(t,n)}function T(t){A=t&&t.precision?new s(t.precision):s.instance}var A,E,M={group:h,layer:h,raster:f,path:d,"compound-path":v,"placed-symbol":y,"point-text":w};_.inject({exportSVG:function(t){return T(t),k(P(this),t)}}),m.inject({exportSVG:function(t){T(t);for(var e=this.layers,i=this.view.getSize(),r=n("svg",{x:0,y:0,width:i.width,height:i.height,version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),s=0,o=e.length;o>s;s++)r.appendChild(P(e[s]));return k(r,t)}})},new function(){function e(t,e,n,i){var r=te[e],s=r?t.getAttributeNS(r,e):t.getAttribute(e);return"null"===s&&(s=null),null==s?i?null:n?"":0:n?s:parseFloat(s)}function n(t,n,i,r){return n=e(t,n,!1,r),i=e(t,i,!1,r),r&&null==n&&null==i?null:new a(n||0,i||0)}function i(t,n,i,r){return n=e(t,n,!1,r),i=e(t,i,!1,r),r&&null==n&&null==i?null:new c(n||0,i||0)}function r(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?w(t)||t:"lookup"===e?n[t]:t}function s(t,e){var n=t.childNodes,i="clippath"===e,r=i?new j:new y,s=r._project,o=s._currentStyle,a=[];i||(r._transformContent=!1,r=b(r,t),s._currentStyle=r._style.clone());for(var u=0,c=n.length;c>u;u++){var h,l=n[u];1==l.nodeType&&(h=C(l))&&(i&&h instanceof j?(a.push.apply(a,h.removeChildren()),h.remove()):h instanceof v||a.push(h))}return r.addChildren(a),i&&(r=b(r.reduce(),t)),s._currentStyle=o,(i||"defs"===e)&&(r.remove(),r=null),r}function o(t,e){var n=new M,i=t.points;n.moveTo(i.getItem(0));for(var r=1,s=i.numberOfItems;s>r;r++)n.lineTo(i.getItem(r));return"polygon"===e&&n.closePath(),n}function u(t){var e=t.getAttribute("d"),n=e.match(/m/gi).length>1?new j:new M;return n.setPathData(e),n}function h(t,i){for(var r=t.childNodes,s=[],o=0,a=r.length;a>o;o++){var u=r[o];1==u.nodeType&&s.push(b(new F,u))}var c,h,l,f="radialgradient"===i,d=new z(s,f);return f?(c=n(t,"cx","cy"),h=c.add(e(t,"r"),0),l=n(t,"fx","fy",!0)):(c=n(t,"x1","y1"),h=n(t,"x2","y2")),b(new I(d,c,h,l),t),null}function l(t,e,n,i){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),s=new p,o=0,a=r.length;a>o;o++){var u=r[o];if(!u)break;for(var c=u.split("("),h=c[0],l=c[1].split(/[\s,]+/g),f=0,d=l.length;d>f;f++)l[f]=parseFloat(l[f]);switch(h){case"matrix":s.concatenate(new p(l[0],l[2],l[1],l[3],l[4],l[5]));break;case"rotate":s.rotate(l[0],l[1],l[2]);break;case"translate":s.translate(l[0],l[1]);break;case"scale":s.scale(l);break;case"skewX":case"skewY":var e=Math.tan(l[0]*Math.PI/180),g="skewX"==h;s.shear(g?e:0,g?0:e)}}t.transform(s)}function d(t,e,n){var i=t["fill-opacity"===n?"getFillColor":"getStrokeColor"]();i&&i.setAlpha(parseFloat(e))}function g(e,n,i){var r=e.attributes[n],s=r&&r.value;if(!s){var o=t.camelize(n);s=e.style[o],s||i.node[o]===i.parent[o]||(s=i.node[o])}return s?"none"===s?null:s:void 0}function b(e,n){var i={node:$.getStyles(n)||{},parent:$.getStyles(n.parentNode)||{}};return t.each(k,function(r,s){var o=g(n,s,i);void 0!==o&&(e=t.pick(r(e,o,s,n,i),e))}),e}function w(t){var e=t&&t.match(/\((?:#|)([^)']+)/);return e&&P[e[1]]}function C(t,e){"string"==typeof t&&(t=(new DOMParser).parseFromString(t,"image/svg+xml"));var n=t.nodeName.toLowerCase(),i=S[n],r=i&&i(t,n),s=t.getAttribute("data-paper-data");return!r||r instanceof y||(r=b(r,t)),r&&s&&(r._data=JSON.parse(s)),e&&(P={}),r}var S={g:s,svg:s,clippath:s,polygon:o,polyline:o,path:u,lineargradient:h,radialgradient:h,image:function(t){var r=new x(e(t,"href",!0));return r.attach("load",function(){var e=i(t,"width","height");this.setSize(e),this.translate(n(t,"x","y").add(e.divide(2)))}),r},symbol:function(t,e){return new v(s(t,e),!0)},defs:s,use:function(t){var i=(e(t,"href",!0)||"").substring(1),r=P[i],s=n(t,"x","y");return r?r instanceof v?r.place(s):r.clone().translate(s):null},circle:function(t){return new M.Circle(n(t,"cx","cy"),e(t,"r"))},ellipse:function(t){var e=n(t,"cx","cy"),r=i(t,"rx","ry");return new M.Ellipse(new f(e.subtract(r),e.add(r)))},rect:function(t){var e=n(t,"x","y"),r=i(t,"width","height"),s=i(t,"rx","ry");return new M.Rectangle(new f(e,r),s)},line:function(t){return new M.Line(n(t,"x1","y1"),n(t,"x2","y2"))},text:function(t){var e=new L(n(t,"x","y",!1).add(n(t,"dx","dy",!1)));return e.setContent(t.textContent.trim()||""),e}},k=t.merge(t.each(K,function(t){this[t.attribute]=function(e,n){e[t.set](r(n,t.type,t.fromSVG))}},{}),{id:function(t,e){P[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var n=w(e);if(n){if(n=n.clone(),n.setClipMask(!0),!(t instanceof y))return new y(n,t);t.insertChild(0,n)}},gradientTransform:l,transform:l,"fill-opacity":d,"stroke-opacity":d,visibility:function(t,e){t.setVisible("visible"===e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){var n=e.match(/(.*)%$/);t.setRampPoint(n?n[1]/100:parseFloat(e))},viewBox:function(t,e,n,s,o){var a=new f(r(e,"array")),u=i(s,"width","height",!0);if(t instanceof y){var c=u?a.getSize().divide(u):1,h=(new p).translate(a.getPoint()).scale(c);t.transform(h.inverted())}else if(t instanceof v){u&&a.setSize(u);var l="visible"!=g(s,"overflow",o),d=t._definition;l&&!a.contains(d.getBounds())&&(l=new M.Rectangle(a).transform(d._matrix),l.setClipMask(!0),d.addChild(l))}}}),P={};_.inject({importSVG:function(t){return this.addChild(C(t,!0))}}),m.inject({importSVG:function(t){return this.activate(),C(t,!0)}})},paper=new(n.inject(t.merge(t.exports,{enumerable:!0,Base:t,Numerical:o,DomElement:$,DomEvent:R,Key:V}))),"function"==typeof define&&define.amd&&define(paper),paper};paper.PaperScope.prototype.PaperScript=function(root){function _$_(t,e,n){var i=binaryOperators[e];if(t&&t[i]){var r=t[i](n);return"!="===e?!r:r}switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":return t%n;case"==":return t==n;case"!=":return t!=n}}function $_(t,e){var n=unaryOperators[t];if(n&&e&&e[n])return e[n]();switch(t){case"+":return+e;case"-":return-e}}function compile(t){function e(t){for(var e=0,n=s.length;n>e;e++){var i=s[e];if(i[0]>=t)break;t+=i[1]}return t}function n(n){return t.substring(e(n.range[0]),e(n.range[1]))}function i(n,i){for(var r=e(n.range[0]),o=e(n.range[1]),a=0,u=s.length-1;u>=0;u--)if(r>s[u][0]){a=u+1;break}s.splice(a,0,[r,i.length-o+r]),t=t.substring(0,r)+i+t.substring(o)}function r(t){if(t&&("MemberExpression"!==t.type||!t.computed)){for(var e in t)if("range"!==e){var s=t[e];if(Array.isArray(s))for(var o=0,a=s.length;a>o;o++)r(s[o]);else s&&"object"==typeof s&&r(s)}switch(t&&t.type){case"BinaryExpression":if(t.operator in binaryOperators&&"Literal"!==t.left.type){var u=n(t.left),c=n(t.right);i(t,"_$_("+u+', "'+t.operator+'", '+c+")")}break;case"AssignmentExpression":if(/^.=$/.test(t.operator)&&"Literal"!==t.left.type){var u=n(t.left),c=n(t.right);i(t,u+" = _$_("+u+', "'+t.operator[0]+'", '+c+")")}break;case"UpdateExpression":if(!t.prefix){var h=n(t.argument);i(t,h+" = _$_("+h+', "'+t.operator[0]+'", 1)')}break;case"UnaryExpression":if(t.operator in unaryOperators&&"Literal"!==t.argument.type){var h=n(t.argument);i(t,'$_("'+t.operator+'", '+h+")")}}}}var s=[];return r(scope.acorn.parse(t,{ranges:!0})),t}function evaluate(code,scope){paper=scope;var view=scope.project&&scope.project.view,res;with(scope)!function(){var onActivate,onDeactivate,onEditOptions,onMouseDown,onMouseUp,onMouseDrag,onMouseMove,onKeyDown,onKeyUp,onFrame,onResize;res=eval(compile(code)),/on(?:Key|Mouse)(?:Up|Down|Move|Drag)/.test(code)&&Base.each(paper.Tool.prototype._events,function(key){var value=eval(key);value&&(scope.getTool()[key]=value)}),view&&(view.setOnResize(onResize),view.fire("resize",{size:view.size,delta:new Point}),view.setOnFrame(onFrame),view.draw())}.call(scope);return res}function request(t,e){var n=new(window.ActiveXObject||XMLHttpRequest)("Microsoft.XMLHTTP");return n.open("GET",t,!0),n.overrideMimeType&&n.overrideMimeType("text/plain"),n.onreadystatechange=function(){return 4===n.readyState?evaluate(n.responseText,e):void 0},n.send(null)}function load(){for(var t=document.getElementsByTagName("script"),e=0,n=t.length;n>e;e++){var i=t[e];if(/^text\/(?:x-|)paperscript$/.test(i.type)&&!i.getAttribute("data-paper-ignore")){var r=PaperScope.getAttribute(i,"canvas"),s=PaperScope.get(r)||new PaperScope(i).setup(r);i.src?request(i.src,s):evaluate(i.innerHTML,s),i.setAttribute("data-paper-ignore",!0)}}}var Base=paper.Base,PaperScope=paper.PaperScope,exports,define,scope=this;!function(t,e){return"object"==typeof exports&&"object"==typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):(e(t.acorn||(t.acorn={})),void 0)}(this,function(t){"use strict";function e(t){le=t||{};for(var e in ge)Object.prototype.hasOwnProperty.call(le,e)||(le[e]=ge[e]);pe=le.sourceFile||null}function n(t,e){var n=me(fe,t);e+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=ve,i}function i(t){function e(t){if(1==t.length)return n+="return str === "+JSON.stringify(t[0])+";";n+="switch(str){";for(var e=0;e<t.length;++e)n+="case "+JSON.stringify(t[e])+":";n+="return true}return false;"}t=t.split(" ");var n="",i=[];t:for(var r=0;r<t.length;++r){for(var s=0;s<i.length;++s)if(i[s][0].length==t[r].length){i[s].push(t[r]);continue t}i.push([t[r]])}if(i.length>3){i.sort(function(t,e){return e.length-t.length}),n+="switch(str.length){";for(var r=0;r<i.length;++r){var o=i[r];n+="case "+o[0].length+":",e(o)}n+="}"}else e(t);return new Function("str",n)}function r(){this.line=ke,this.column=ve-Pe}function s(){ke=1,ve=Pe=0,Se=!0,c()}function o(t,e){ye=ve,le.locations&&(we=new r),xe=t,c(),Ce=e,Se=t.beforeExpr}function a(){var t=le.onComment&&le.locations&&new r,e=ve,i=fe.indexOf("*/",ve+=2);if(-1===i&&n(ve-2,"Unterminated comment"),ve=i+2,le.locations){Yn.lastIndex=e;for(var s;(s=Yn.exec(fe))&&s.index<ve;)++ke,Pe=s.index+s[0].length}le.onComment&&le.onComment(!0,fe.slice(e+2,i),e,ve,t,le.locations&&new r)}function u(){for(var t=ve,e=le.onComment&&le.locations&&new r,n=fe.charCodeAt(ve+=2);de>ve&&10!==n&&13!==n&&8232!==n&&8329!==n;)++ve,n=fe.charCodeAt(ve);le.onComment&&le.onComment(!1,fe.slice(t+2,ve),t,ve,e,le.locations&&new r)}function c(){for(;de>ve;){var t=fe.charCodeAt(ve);if(32===t)++ve;else if(13===t){++ve;var e=fe.charCodeAt(ve);10===e&&++ve,le.locations&&(++ke,Pe=ve)}else if(10===t)++ve,++ke,Pe=ve;else if(14>t&&t>8)++ve;else if(47===t){var e=fe.charCodeAt(ve+1);if(42===e)a();else{if(47!==e)break;u()}}else if(160===t)++ve;else{if(!(t>=5760&&Wn.test(String.fromCharCode(t))))break;++ve}}}function h(){var t=fe.charCodeAt(ve+1);return t>=48&&57>=t?S(!0):(++ve,o(wn))}function l(){var t=fe.charCodeAt(ve+1);return Se?(++ve,w()):61===t?b(kn,2):b(Cn,1)}function f(){var t=fe.charCodeAt(ve+1);return 61===t?b(kn,2):b(zn,1)}function d(t){var e=fe.charCodeAt(ve+1);return e===t?b(124===t?En:Mn,2):61===e?b(kn,2):b(124===t?jn:Dn,1)}function p(){var t=fe.charCodeAt(ve+1);return 61===t?b(kn,2):b(Nn,1)}function g(t){var e=fe.charCodeAt(ve+1);return e===t?b(Tn,2):61===e?b(kn,2):b(Pn,1)}function m(t){var e=fe.charCodeAt(ve+1),n=1;return e===t?(n=62===t&&62===fe.charCodeAt(ve+2)?3:2,61===fe.charCodeAt(ve+n)?b(kn,n+1):b(In,n)):(61===e&&(n=61===fe.charCodeAt(ve+2)?3:2),b(Ln,n))}function v(t){var e=fe.charCodeAt(ve+1);return 61===e?b(On,61===fe.charCodeAt(ve+2)?3:2):b(61===t?Sn:An,1)}function _(t){switch(t){case 46:return h();case 40:return++ve,o(mn);case 41:return++ve,o(vn);case 59:return++ve,o(yn);case 44:return++ve,o(_n);case 91:return++ve,o(fn);case 93:return++ve,o(dn);case 123:return++ve,o(pn);case 125:return++ve,o(gn);case 58:return++ve,o(bn);case 63:return++ve,o(xn);case 48:var e=fe.charCodeAt(ve+1);if(120===e||88===e)return C();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return S(!1);case 34:case 39:return k(t);case 47:return l(t);case 37:case 42:return f();case 124:case 38:return d(t);case 94:return p();case 43:case 45:return g(t);case 60:case 62:return m(t);case 61:case 33:return v(t);case 126:return b(An,1)}return!1}function y(t){if(t?ve=_e+1:_e=ve,le.locations&&(be=new r),t)return w();if(ve>=de)return o(Fe);var e=fe.charCodeAt(ve);if(Qn(e)||92===e)return A();var i=_(e);if(i===!1){var s=String.fromCharCode(e);if("\\"===s||Jn.test(s))return A();n(ve,"Unexpected character '"+s+"'")}return i}function b(t,e){var n=fe.slice(ve,ve+e);ve+=e,o(t,n)}function w(){for(var t,e,i="",r=ve;;){ve>=de&&n(r,"Unterminated regular expression");var s=fe.charAt(ve);if(Gn.test(s)&&n(r,"Unterminated regular expression"),t)t=!1;else{if("["===s)e=!0;else if("]"===s&&e)e=!1;else if("/"===s&&!e)break;t="\\"===s}++ve}var i=fe.slice(r,ve);++ve;var a=T();return a&&!/^[gmsiy]*$/.test(a)&&n(r,"Invalid regexp flag"),o(Le,new RegExp(i,a))}function x(t,e){for(var n=ve,i=0,r=0,s=null==e?1/0:e;s>r;++r){var o,a=fe.charCodeAt(ve);if(o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&57>=a?a-48:1/0,o>=t)break;++ve,i=i*t+o}return ve===n||null!=e&&ve-n!==e?null:i}function C(){ve+=2;var t=x(16);return null==t&&n(_e+2,"Expected hexadecimal number"),Qn(fe.charCodeAt(ve))&&n(ve,"Identifier directly after number"),o(Oe,t)}function S(t){var e=ve,i=!1,r=48===fe.charCodeAt(ve);t||null!==x(10)||n(e,"Invalid number"),46===fe.charCodeAt(ve)&&(++ve,x(10),i=!0);var s=fe.charCodeAt(ve);(69===s||101===s)&&(s=fe.charCodeAt(++ve),(43===s||45===s)&&++ve,null===x(10)&&n(e,"Invalid number"),i=!0),Qn(fe.charCodeAt(ve))&&n(ve,"Identifier directly after number");var a,u=fe.slice(e,ve);return i?a=parseFloat(u):r&&1!==u.length?/[89]/.test(u)||Ne?n(e,"Invalid number"):a=parseInt(u,8):a=parseInt(u,10),o(Oe,a)}function k(t){ve++;for(var e="";;){ve>=de&&n(_e,"Unterminated string constant");var i=fe.charCodeAt(ve);if(i===t)return++ve,o(Ie,e);if(92===i){i=fe.charCodeAt(++ve);var r=/^[0-7]+/.exec(fe.slice(ve,ve+3));for(r&&(r=r[0]);r&&parseInt(r,8)>255;)r=r.slice(0,r.length-1);if("0"===r&&(r=null),++ve,r)Ne&&n(ve-2,"Octal literal in strict mode"),e+=String.fromCharCode(parseInt(r,8)),ve+=r.length-1;else switch(i){case 110:e+="\n";break;case 114:e+="\r";break;case 120:e+=String.fromCharCode(P(2));break;case 117:e+=String.fromCharCode(P(4));break;case 85:e+=String.fromCharCode(P(8));break;case 116:e+="	";break;case 98:e+="\b";break;case 118:e+="";break;case 102:e+="\f";break;case 48:e+="\0";break;case 13:10===fe.charCodeAt(ve)&&++ve;case 10:le.locations&&(Pe=ve,++ke);break;default:e+=String.fromCharCode(i)}}else(13===i||10===i||8232===i||8329===i)&&n(_e,"Unterminated string constant"),e+=String.fromCharCode(i),++ve}}function P(t){var e=x(16,t);return null===e&&n(_e,"Bad character escape sequence"),e}function T(){Bn=!1;for(var t,e=!0,i=ve;;){var r=fe.charCodeAt(ve);if(Kn(r))Bn&&(t+=fe.charAt(ve)),++ve;else{if(92!==r)break;Bn||(t=fe.slice(i,ve)),Bn=!0,117!=fe.charCodeAt(++ve)&&n(ve,"Expecting Unicode escape sequence \\uXXXX"),++ve;var s=P(4),o=String.fromCharCode(s);o||n(ve-1,"Invalid Unicode escape"),(e?Qn(s):Kn(s))||n(ve-4,"Invalid Unicode escape"),t+=o}e=!1}return Bn?t:fe.slice(i,ve)}function A(){var t=T(),e=ze;return Bn||(Un(t)?e=ln[t]:(le.forbidReserved&&(3===le.ecmaVersion?$n:Rn)(t)||Ne&&qn(t))&&n(_e,"The keyword '"+t+"' is reserved")),o(e,t)}function E(){Te=_e,Ae=ye,Ee=we,y()}function M(t){for(Ne=t,ve=Ae;Pe>ve;)Pe=fe.lastIndexOf("\n",Pe-2)+1,--ke;c(),y()}function j(){this.type=null,this.start=_e,this.end=null}function N(){this.start=be,this.end=null,null!==pe&&(this.source=pe)}function D(){var t=new j;return le.locations&&(t.loc=new N),le.ranges&&(t.range=[_e,0]),t}function O(t){var e=new j;return e.start=t.start,le.locations&&(e.loc=new N,e.loc.start=t.loc.start),le.ranges&&(e.range=[t.range[0],0]),e}function L(t,e){return t.type=e,t.end=Ae,le.locations&&(t.loc.end=Ee),le.ranges&&(t.range[1]=Ae),t}function I(t){return le.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function z(t){return xe===t?(E(),!0):void 0}function F(){return!le.strictSemicolons&&(xe===Fe||xe===gn||Gn.test(fe.slice(Ae,_e)))}function B(){z(yn)||F()||R()}function $(t){xe===t?E():R()}function R(){n(_e,"Unexpected token")}function q(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&n(t.start,"Assigning to rvalue"),Ne&&"Identifier"===t.type&&Hn(t.name)&&n(t.start,"Assigning to "+t.name+" in strict mode")}function H(t){Te=Ae=ve,le.locations&&(Ee=new r),Me=Ne=null,je=[],y();var e=t||D(),n=!0;for(t||(e.body=[]);xe!==Fe;){var i=U();e.body.push(i),n&&I(i)&&M(!0),n=!1}return L(e,"Program")}function U(){xe===Cn&&y(!0);var t=xe,e=D();switch(t){case Be:case qe:E();var i=t===Be;z(yn)||F()?e.label=null:xe!==ze?R():(e.label=he(),B());for(var r=0;r<je.length;++r){var s=je[r];if(null==e.label||s.name===e.label.name){if(null!=s.kind&&(i||"loop"===s.kind))break;if(e.label&&i)break}}return r===je.length&&n(e.start,"Unsyntactic "+t.keyword),L(e,i?"BreakStatement":"ContinueStatement");case He:return E(),B(),L(e,"DebuggerStatement");case We:return E(),je.push(ti),e.body=U(),je.pop(),$(nn),e.test=W(),B(),L(e,"DoWhileStatement");case Je:if(E(),je.push(ti),$(mn),xe===yn)return X(e,null);if(xe===en){var o=D();return E(),Z(o,!0),1===o.declarations.length&&z(hn)?J(e,o):X(e,o)}var o=G(!1,!0);return z(hn)?(q(o),J(e,o)):X(e,o);case Ze:return E(),ue(e,!0);case Ge:return E(),e.test=W(),e.consequent=U(),e.alternate=z(Ve)?U():null,L(e,"IfStatement");case Ye:return Me||n(_e,"'return' outside of function"),E(),z(yn)||F()?e.argument=null:(e.argument=G(),B()),L(e,"ReturnStatement");case Qe:E(),e.discriminant=W(),e.cases=[],$(pn),je.push(ei);for(var a,u;xe!=gn;)if(xe===$e||xe===Ue){var c=xe===$e;a&&L(a,"SwitchCase"),e.cases.push(a=D()),a.consequent=[],E(),c?a.test=G():(u&&n(Te,"Multiple default clauses"),u=!0,a.test=null),$(bn)}else a||R(),a.consequent.push(U());return a&&L(a,"SwitchCase"),E(),je.pop(),L(e,"SwitchStatement");case Ke:return E(),Gn.test(fe.slice(Ae,_e))&&n(Ae,"Illegal newline after throw"),e.argument=G(),B(),L(e,"ThrowStatement");case tn:if(E(),e.block=V(),e.handler=null,xe===Re){var h=D();E(),$(mn),h.param=he(),Ne&&Hn(h.param.name)&&n(h.param.start,"Binding "+h.param.name+" in strict mode"),$(vn),h.guard=null,h.body=V(),e.handler=L(h,"CatchClause")}return e.guardedHandlers=De,e.finalizer=z(Xe)?V():null,e.handler||e.finalizer||n(e.start,"Missing catch or finally clause"),L(e,"TryStatement");case en:return E(),e=Z(e),B(),e;case nn:return E(),e.test=W(),je.push(ti),e.body=U(),je.pop(),L(e,"WhileStatement");case rn:return Ne&&n(_e,"'with' in strict mode"),E(),e.object=W(),e.body=U(),L(e,"WithStatement");case pn:return V();case yn:return E(),L(e,"EmptyStatement");default:var l=Ce,f=G();if(t===ze&&"Identifier"===f.type&&z(bn)){for(var r=0;r<je.length;++r)je[r].name===l&&n(f.start,"Label '"+l+"' is already declared");var d=xe.isLoop?"loop":xe===Qe?"switch":null;return je.push({name:l,kind:d}),e.body=U(),je.pop(),e.label=f,L(e,"LabeledStatement")}return e.expression=f,B(),L(e,"ExpressionStatement")}}function W(){$(mn);var t=G();return $(vn),t}function V(t){var e,n=D(),i=!0,r=!1;for(n.body=[],$(pn);!z(gn);){var s=U();n.body.push(s),i&&t&&I(s)&&(e=r,M(r=!0)),i=!1}return r&&!e&&M(!1),L(n,"BlockStatement")}function X(t,e){return t.init=e,$(yn),t.test=xe===yn?null:G(),$(yn),t.update=xe===vn?null:G(),$(vn),t.body=U(),je.pop(),L(t,"ForStatement")}function J(t,e){return t.left=e,t.right=G(),$(vn),t.body=U(),je.pop(),L(t,"ForInStatement")}function Z(t,e){for(t.declarations=[],t.kind="var";;){var i=D();if(i.id=he(),Ne&&Hn(i.id.name)&&n(i.id.start,"Binding "+i.id.name+" in strict mode"),i.init=z(Sn)?G(!0,e):null,t.declarations.push(L(i,"VariableDeclarator")),!z(_n))break}return L(t,"VariableDeclaration")}function G(t,e){var n=Y(e);if(!t&&xe===_n){var i=O(n);for(i.expressions=[n];z(_n);)i.expressions.push(Y(e));return L(i,"SequenceExpression")}return n}function Y(t){var e=Q(t);if(xe.isAssign){var n=O(e);return n.operator=Ce,n.left=e,E(),n.right=Y(t),q(e),L(n,"AssignmentExpression")}return e}function Q(t){var e=K(t);if(z(xn)){var n=O(e);return n.test=e,n.consequent=G(!0),$(bn),n.alternate=G(!0,t),L(n,"ConditionalExpression")}return e}function K(t){return te(ee(),-1,t)}function te(t,e,n){var i=xe.binop;if(null!=i&&(!n||xe!==hn)&&i>e){var r=O(t);r.left=t,r.operator=Ce,E(),r.right=te(ee(),i,n);var r=L(r,/&&|\|\|/.test(r.operator)?"LogicalExpression":"BinaryExpression");return te(r,e,n)}return t}function ee(){if(xe.prefix){var t=D(),e=xe.isUpdate;return t.operator=Ce,t.prefix=!0,E(),t.argument=ee(),e?q(t.argument):Ne&&"delete"===t.operator&&"Identifier"===t.argument.type&&n(t.start,"Deleting local variable in strict mode"),L(t,e?"UpdateExpression":"UnaryExpression")}for(var i=ne();xe.postfix&&!F();){var t=O(i);t.operator=Ce,t.prefix=!1,t.argument=i,q(i),E(),i=L(t,"UpdateExpression")}return i}function ne(){return ie(re())}function ie(t,e){if(z(wn)){var n=O(t);return n.object=t,n.property=he(!0),n.computed=!1,ie(L(n,"MemberExpression"),e)}if(z(fn)){var n=O(t);return n.object=t,n.property=G(),n.computed=!0,$(dn),ie(L(n,"MemberExpression"),e)}if(!e&&z(mn)){var n=O(t);return n.callee=t,n.arguments=ce(vn,!1),ie(L(n,"CallExpression"),e)}return t}function re(){switch(xe){case on:var t=D();return E(),L(t,"ThisExpression");case ze:return he();case Oe:case Ie:case Le:var t=D();return t.value=Ce,t.raw=fe.slice(_e,ye),E(),L(t,"Literal");case an:case un:case cn:var t=D();return t.value=xe.atomValue,t.raw=xe.keyword,E(),L(t,"Literal");case mn:var e=be,n=_e;E();var i=G();return i.start=n,i.end=ye,le.locations&&(i.loc.start=e,i.loc.end=we),le.ranges&&(i.range=[n,ye]),$(vn),i;case fn:var t=D();return E(),t.elements=ce(dn,!0,!0),L(t,"ArrayExpression");case pn:return oe();case Ze:var t=D();return E(),ue(t,!1);case sn:return se();default:R()}}function se(){var t=D();return E(),t.callee=ie(re(),!0),t.arguments=z(mn)?ce(vn,!1):De,L(t,"NewExpression")}function oe(){var t=D(),e=!0,i=!1;for(t.properties=[],E();!z(gn);){if(e)e=!1;else if($(_n),le.allowTrailingCommas&&z(gn))break;var r,s={key:ae()},o=!1;if(z(bn)?(s.value=G(!0),r=s.kind="init"):le.ecmaVersion>=5&&"Identifier"===s.key.type&&("get"===s.key.name||"set"===s.key.name)?(o=i=!0,r=s.kind=s.key.name,s.key=ae(),xe!==mn&&R(),s.value=ue(D(),!1)):R(),"Identifier"===s.key.type&&(Ne||i))for(var a=0;a<t.properties.length;++a){var u=t.properties[a];if(u.key.name===s.key.name){var c=r==u.kind||o&&"init"===u.kind||"init"===r&&("get"===u.kind||"set"===u.kind);c&&!Ne&&"init"===r&&"init"===u.kind&&(c=!1),c&&n(s.key.start,"Redefinition of property")}}t.properties.push(s)}return L(t,"ObjectExpression")}function ae(){return xe===Oe||xe===Ie?re():he(!0)}function ue(t,e){xe===ze?t.id=he():e?R():t.id=null,t.params=[];var i=!0;for($(mn);!z(vn);)i?i=!1:$(_n),t.params.push(he());var r=Me,s=je;if(Me=!0,je=[],t.body=V(!0),Me=r,je=s,Ne||t.body.body.length&&I(t.body.body[0]))for(var o=t.id?-1:0;o<t.params.length;++o){var a=0>o?t.id:t.params[o];if((qn(a.name)||Hn(a.name))&&n(a.start,"Defining '"+a.name+"' in strict mode"),o>=0)for(var u=0;o>u;++u)a.name===t.params[u].name&&n(a.start,"Argument name clash in strict mode")}return L(t,e?"FunctionDeclaration":"FunctionExpression")}function ce(t,e,n){for(var i=[],r=!0;!z(t);){if(r)r=!1;else if($(_n),e&&le.allowTrailingCommas&&z(t))break;n&&xe===_n?i.push(null):i.push(G(!0))}return i}function he(t){var e=D();return e.name=xe===ze?Ce:t&&!le.forbidReserved&&xe.keyword||R(),E(),L(e,"Identifier")}t.version="0.3.2";var le,fe,de,pe;t.parse=function(t,n){return fe=String(t),de=fe.length,e(n),s(),H(le.program)};var ge=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null},me=t.getLineInfo=function(t,e){for(var n=1,i=0;;){Yn.lastIndex=i;var r=Yn.exec(t);if(!(r&&r.index<e))break;++n,i=r.index+r[0].length}return{line:n,column:e-i}};t.tokenize=function(t,n){function i(t){return y(t),r.start=_e,r.end=ye,r.startLoc=be,r.endLoc=we,r.type=xe,r.value=Ce,r}fe=String(t),de=fe.length,e(n),s();var r={};return i.jumpTo=function(t,e){if(ve=t,le.locations){ke=1,Pe=Yn.lastIndex=0;for(var n;(n=Yn.exec(fe))&&n.index<t;)++ke,Pe=n.index+n[0].length}Se=e,c()},i};var ve,_e,ye,be,we,xe,Ce,Se,ke,Pe,Te,Ae,Ee,Me,je,Ne,De=[],Oe={type:"num"},Le={type:"regexp"},Ie={type:"string"},ze={type:"name"},Fe={type:"eof"},Be={keyword:"break"},$e={keyword:"case",beforeExpr:!0},Re={keyword:"catch"},qe={keyword:"continue"},He={keyword:"debugger"},Ue={keyword:"default"},We={keyword:"do",isLoop:!0},Ve={keyword:"else",beforeExpr:!0},Xe={keyword:"finally"},Je={keyword:"for",isLoop:!0},Ze={keyword:"function"},Ge={keyword:"if"},Ye={keyword:"return",beforeExpr:!0},Qe={keyword:"switch"},Ke={keyword:"throw",beforeExpr:!0},tn={keyword:"try"},en={keyword:"var"},nn={keyword:"while",isLoop:!0},rn={keyword:"with"},sn={keyword:"new",beforeExpr:!0},on={keyword:"this"},an={keyword:"null",atomValue:null},un={keyword:"true",atomValue:!0},cn={keyword:"false",atomValue:!1},hn={keyword:"in",binop:7,beforeExpr:!0},ln={"break":Be,"case":$e,"catch":Re,"continue":qe,"debugger":He,"default":Ue,"do":We,"else":Ve,"finally":Xe,"for":Je,"function":Ze,"if":Ge,"return":Ye,"switch":Qe,"throw":Ke,"try":tn,"var":en,"while":nn,"with":rn,"null":an,"true":un,"false":cn,"new":sn,"in":hn,"instanceof":{keyword:"instanceof",binop:7,beforeExpr:!0},"this":on,"typeof":{keyword:"typeof",prefix:!0,beforeExpr:!0},"void":{keyword:"void",prefix:!0,beforeExpr:!0},"delete":{keyword:"delete",prefix:!0,beforeExpr:!0}},fn={type:"[",beforeExpr:!0},dn={type:"]"},pn={type:"{",beforeExpr:!0},gn={type:"}"},mn={type:"(",beforeExpr:!0},vn={type:")"},_n={type:",",beforeExpr:!0},yn={type:";",beforeExpr:!0},bn={type:":",beforeExpr:!0},wn={type:"."},xn={type:"?",beforeExpr:!0},Cn={binop:10,beforeExpr:!0},Sn={isAssign:!0,beforeExpr:!0},kn={isAssign:!0,beforeExpr:!0},Pn={binop:9,prefix:!0,beforeExpr:!0},Tn={postfix:!0,prefix:!0,isUpdate:!0},An={prefix:!0,beforeExpr:!0},En={binop:1,beforeExpr:!0},Mn={binop:2,beforeExpr:!0},jn={binop:3,beforeExpr:!0},Nn={binop:4,beforeExpr:!0},Dn={binop:5,beforeExpr:!0},On={binop:6,beforeExpr:!0},Ln={binop:7,beforeExpr:!0},In={binop:8,beforeExpr:!0},zn={binop:10,beforeExpr:!0};t.tokTypes={bracketL:fn,bracketR:dn,braceL:pn,braceR:gn,parenL:mn,parenR:vn,comma:_n,semi:yn,colon:bn,dot:wn,question:xn,slash:Cn,eq:Sn,name:ze,eof:Fe,num:Oe,regexp:Le,string:Ie};for(var Fn in ln)t.tokTypes["_"+Fn]=ln[Fn];var Bn,$n=i("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Rn=i("class enum extends super const export import"),qn=i("implements interface let package private protected public static yield"),Hn=i("eval arguments"),Un=i("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Wn=/[\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]/,Vn="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Xn="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Jn=new RegExp("["+Vn+"]"),Zn=new RegExp("["+Vn+Xn+"]"),Gn=/[\n\r\u2028\u2029]/,Yn=/\r\n|[\n\r\u2028\u2029]/g,Qn=t.isIdentifierStart=function(t){return 65>t?36===t:91>t?!0:97>t?95===t:123>t?!0:t>=170&&Jn.test(String.fromCharCode(t))
},Kn=t.isIdentifierChar=function(t){return 48>t?36===t:58>t?!0:65>t?!1:91>t?!0:97>t?95===t:123>t?!0:t>=170&&Zn.test(String.fromCharCode(t))},ti={kind:"loop"},ei={kind:"switch"}});var binaryOperators={"+":"_add","-":"_subtract","*":"_multiply","/":"_divide","%":"_modulo","==":"equals","!=":"equals"},unaryOperators={"-":"_negate","+":null},fields=Base.each("add,subtract,multiply,divide,modulo,negate".split(","),function(t){this["_"+t]="#"+t},{});return paper.Point.inject(fields),paper.Size.inject(fields),paper.Color.inject(fields),"complete"===document.readyState?setTimeout(load):paper.DomEvent.add(window,{load:load}),{compile:compile,evaluate:evaluate,load:load}}(this),function(){function t(n,i){i=i||{};var r=this;this.key=n,this.config=t.Util.extend(t.getGlobalConfig(),i.cluster?t.getClusterConfig(i.cluster):{},i),this.channels=new t.Channels,this.global_emitter=new t.EventsDispatcher,this.sessionID=Math.floor(1e9*Math.random()),e(this.key);var s=function(e){return t.StrategyBuilder.build(t.getDefaultStrategy(r.config),t.Util.extend({},r.config,e))},o=function(){return new t.Timeline(r.key,r.sessionID,{features:t.Util.getClientFeatures(),params:r.config.timelineParams||{},limit:50,level:t.Timeline.INFO,version:t.VERSION})},a=function(e,n){return r.config.disableStats?null:new t.TimelineSender(e,{encrypted:r.isEncrypted()||!!n.encrypted,host:r.config.statsHost,path:"/timeline"})};this.connection=new t.ConnectionManager(this.key,t.Util.extend({getStrategy:s,getTimeline:o,getTimelineSender:a,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()})),this.connection.bind("connected",function(){r.subscribeAll()}),this.connection.bind("message",function(t){var e=0===t.event.indexOf("pusher_internal:");if(t.channel){var n=r.channel(t.channel);n&&n.handleEvent(t.event,t.data)}e||r.global_emitter.emit(t.event,t.data)}),this.connection.bind("disconnected",function(){r.channels.disconnect()}),this.connection.bind("error",function(e){t.warn("Error",e)}),t.instances.push(this),t.isReady&&r.connect()}function e(e){(null===e||void 0===e)&&t.warn("Warning","You must pass your app key when you instantiate Pusher.")}var n=t.prototype;t.instances=[],t.isReady=!1,t.debug=function(){t.log&&t.log(t.Util.stringify.apply(this,arguments))},t.warn=function(){var e=t.Util.stringify.apply(this,arguments);window.console&&(window.console.warn?window.console.warn(e):window.console.log&&window.console.log(e)),t.log&&t.log(e)},t.ready=function(){t.isReady=!0;for(var e=0,n=t.instances.length;n>e;e++)t.instances[e].connect()},n.channel=function(t){return this.channels.find(t)},n.connect=function(){this.connection.connect()},n.disconnect=function(){this.connection.disconnect()},n.bind=function(t,e){return this.global_emitter.bind(t,e),this},n.bind_all=function(t){return this.global_emitter.bind_all(t),this},n.subscribeAll=function(){var t;for(t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)},n.subscribe=function(t){var e=this,n=this.channels.add(t,this);return"connected"===this.connection.state&&n.authorize(this.connection.socket_id,function(i,r){i?n.handleEvent("pusher:subscription_error",r):e.send_event("pusher:subscribe",{channel:t,auth:r.auth,channel_data:r.channel_data})}),n},n.unsubscribe=function(t){this.channels.remove(t),"connected"===this.connection.state&&this.send_event("pusher:unsubscribe",{channel:t})},n.send_event=function(t,e,n){return this.connection.send_event(t,e,n)},n.isEncrypted=function(){return"https:"===t.Util.getDocumentLocation().protocol?!0:!!this.config.encrypted},this.Pusher=t}.call(this),function(){Pusher.Util={now:function(){return Date.now?Date.now():(new Date).valueOf()},extend:function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]&&n[i].constructor&&n[i].constructor===Object?Pusher.Util.extend(t[i]||{},n[i]):n[i]}return t},stringify:function(){for(var t=["Pusher"],e=0;e<arguments.length;e++)"string"==typeof arguments[e]?t.push(arguments[e]):void 0===window.JSON?t.push(arguments[e].toString()):t.push(JSON.stringify(arguments[e]));return t.join(" : ")},arrayIndexOf:function(t,e){var n=Array.prototype.indexOf;if(null===t)return-1;if(n&&t.indexOf===n)return t.indexOf(e);for(var i=0,r=t.length;r>i;i++)if(t[i]===e)return i;return-1},keys:function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e},apply:function(t,e){for(var n=0;n<t.length;n++)e(t[n],n,t)},objectApply:function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)},map:function(t,e){for(var n=[],i=0;i<t.length;i++)n.push(e(t[i],i,t,n));return n},mapObject:function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=e(t[i]));return n},filter:function(t,e){e=e||function(t){return!!t};for(var n=[],i=0;i<t.length;i++)e(t[i],i,t,n)&&n.push(t[i]);return n},filterObject:function(t,e){e=e||function(t){return!!t};var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e(t[i],i,t,n)&&(n[i]=t[i]);return n},flatten:function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push([n,t[n]]);return e},any:function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},all:function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0},method:function(t){var e=Array.prototype.slice.call(arguments,1);return function(n){return n[t].apply(n,e.concat(arguments))}},getDocument:function(){return document},getDocumentLocation:function(){return Pusher.Util.getDocument().location},getLocalStorage:function(){try{return window.localStorage}catch(t){return void 0}},getClientFeatures:function(){return Pusher.Util.keys(Pusher.Util.filterObject({ws:Pusher.WSTransport,flash:Pusher.FlashTransport},function(t){return t.isSupported()}))}}}.call(this),function(){Pusher.VERSION="2.1.1",Pusher.PROTOCOL=6,Pusher.host="ws.pusherapp.com",Pusher.ws_port=80,Pusher.wss_port=443,Pusher.sockjs_host="sockjs.pusher.com",Pusher.sockjs_http_port=80,Pusher.sockjs_https_port=443,Pusher.sockjs_path="/pusher",Pusher.stats_host="stats.pusher.com",Pusher.channel_auth_endpoint="/pusher/auth",Pusher.channel_auth_transport="ajax",Pusher.activity_timeout=12e4,Pusher.pong_timeout=3e4,Pusher.unavailable_timeout=1e4,Pusher.cdn_http="http://js.pusher.com/",Pusher.cdn_https="https://d3dy5gmtp8yhk7.cloudfront.net/",Pusher.dependency_suffix="",Pusher.getDefaultStrategy=function(t){return[[":def","ws_options",{hostUnencrypted:t.wsHost+":"+t.wsPort,hostEncrypted:t.wsHost+":"+t.wssPort}],[":def","sockjs_options",{hostUnencrypted:t.httpHost+":"+t.httpPort,hostEncrypted:t.httpHost+":"+t.httpsPort}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:t.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","flash","flash",2,":ws_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","flash_loop",[":sequential",":timeouts",":flash"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],[":best_connected_ever",":ws_loop",[":delayed",2e3,[":sockjs_loop"]]],[":if",[":is_supported",":flash"],[":best_connected_ever",":flash_loop",[":delayed",2e3,[":sockjs_loop"]]],[":sockjs_loop"]]]]]]]}}.call(this),function(){Pusher.getGlobalConfig=function(){return{wsHost:Pusher.host,wsPort:Pusher.ws_port,wssPort:Pusher.wss_port,httpHost:Pusher.sockjs_host,httpPort:Pusher.sockjs_http_port,httpsPort:Pusher.sockjs_https_port,httpPath:Pusher.sockjs_path,statsHost:Pusher.stats_host,authEndpoint:Pusher.channel_auth_endpoint,authTransport:Pusher.channel_auth_transport,activity_timeout:Pusher.activity_timeout,pong_timeout:Pusher.pong_timeout,unavailable_timeout:Pusher.unavailable_timeout}},Pusher.getClusterConfig=function(t){return{wsHost:"ws-"+t+".pusher.com",httpHost:"sockjs-"+t+".pusher.com"}}}.call(this),function(){function t(t){var e=function(e){Error.call(this,e),this.name=t};return Pusher.Util.extend(e.prototype,Error.prototype),e}Pusher.Errors={UnsupportedTransport:t("UnsupportedTransport"),UnsupportedStrategy:t("UnsupportedStrategy"),TransportPriorityTooLow:t("TransportPriorityTooLow"),TransportClosed:t("TransportClosed")}}.call(this),function(){function t(t){this.callbacks=new e,this.global_callbacks=[],this.failThrough=t}function e(){this._callbacks={}}var n=t.prototype;n.bind=function(t,e){return this.callbacks.add(t,e),this},n.bind_all=function(t){return this.global_callbacks.push(t),this},n.unbind=function(t,e){return this.callbacks.remove(t,e),this},n.emit=function(t,e){var n;for(n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](t,e);var i=this.callbacks.get(t);if(i&&i.length>0)for(n=0;n<i.length;n++)i[n](e);else this.failThrough&&this.failThrough(t,e);return this},e.prototype.get=function(t){return this._callbacks[this._prefix(t)]},e.prototype.add=function(t,e){var n=this._prefix(t);this._callbacks[n]=this._callbacks[n]||[],this._callbacks[n].push(e)},e.prototype.remove=function(t,e){if(this.get(t)){var n=Pusher.Util.arrayIndexOf(this.get(t),e);if(-1!==n){var i=this._callbacks[this._prefix(t)].slice(0);i.splice(n,1),this._callbacks[this._prefix(t)]=i}}},e.prototype._prefix=function(t){return"_"+t},Pusher.EventsDispatcher=t}.call(this),function(){function t(t){this.options=t,this.loading={},this.loaded={}}function e(t,e){Pusher.Util.getDocument().addEventListener?t.addEventListener("load",e,!1):t.attachEvent("onreadystatechange",function(){("loaded"===t.readyState||"complete"===t.readyState)&&e()})}function n(t,n){var i=Pusher.Util.getDocument(),r=i.getElementsByTagName("head")[0],s=i.createElement("script");s.setAttribute("src",t),s.setAttribute("type","text/javascript"),s.setAttribute("async",!0),e(s,function(){setTimeout(n,0)}),r.appendChild(s)}var i=t.prototype;i.load=function(t,e){var i=this;return this.loaded[t]?(e(),void 0):(this.loading[t]||(this.loading[t]=[]),this.loading[t].push(e),this.loading[t].length>1||n(this.getPath(t),function(){for(var e=0;e<i.loading[t].length;e++)i.loading[t][e]();delete i.loading[t],i.loaded[t]=!0}),void 0)},i.getRoot=function(t){var e,n=Pusher.Util.getDocumentLocation().protocol;return e=t&&t.encrypted||"https:"===n?this.options.cdn_https:this.options.cdn_http,e.replace(/\/*$/,"")+"/"+this.options.version},i.getPath=function(t,e){return this.getRoot(e)+"/"+t+this.options.suffix+".js"},Pusher.DependencyLoader=t}.call(this),function(){function t(){Pusher.ready()}function e(t){document.body?t():setTimeout(function(){e(t)},0)}function n(){e(t)}Pusher.Dependencies=new Pusher.DependencyLoader({cdn_http:Pusher.cdn_http,cdn_https:Pusher.cdn_https,version:Pusher.VERSION,suffix:Pusher.dependency_suffix}),!window.WebSocket&&window.MozWebSocket&&(window.WebSocket=window.MozWebSocket),window.JSON?n():Pusher.Dependencies.load("json2",n)}(),function(){function t(t,e){var n=this;this.timeout=setTimeout(function(){null!==n.timeout&&(e(),n.timeout=null)},t)}var e=t.prototype;e.isRunning=function(){return null!==this.timeout},e.ensureAborted=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},Pusher.Timer=t}.call(this),function(){for(var t={encode:function(t){return c(a(t))}},e=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={},r=0,s=n.length;s>r;r++)i[n.charAt(r)]=r;var o=function(t){var n=t.charCodeAt(0);return 128>n?t:2048>n?e(192|n>>>6)+e(128|63&n):e(224|15&n>>>12)+e(128|63&n>>>6)+e(128|63&n)},a=function(t){return t.replace(/[^\x00-\x7F]/g,o)},u=function(t){var e=[0,2,1][t.length%3],i=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0),r=[n.charAt(i>>>18),n.charAt(63&i>>>12),e>=2?"=":n.charAt(63&i>>>6),e>=1?"=":n.charAt(63&i)];return r.join("")},c=window.btoa||function(t){return t.replace(/[\s\S]{1,3}/g,u)};Pusher.Base64=t}.call(this),function(){function t(t){this.options=t}function e(t){return Pusher.Util.mapObject(t,function(t){return"object"==typeof t&&(t=JSON.stringify(t)),encodeURIComponent(Pusher.Base64.encode(t.toString()))})}t.send=function(t,e){var n=new Pusher.JSONPRequest({url:t.url,receiver:t.receiverName,tagPrefix:t.tagPrefix}),i=t.receiver.register(function(t,i){n.cleanup(),e(t,i)});return n.send(i,t.data,function(e){var n=t.receiver.unregister(i);n&&n(e)})};var n=t.prototype;n.send=function(t,n,i){if(this.script)return!1;var r=this.options.tagPrefix||"_pusher_jsonp_",s=Pusher.Util.extend({},n,{receiver:this.options.receiver}),o=Pusher.Util.map(Pusher.Util.flatten(e(Pusher.Util.filterObject(s,function(t){return void 0!==t}))),Pusher.Util.method("join","=")).join("&");if(this.script=document.createElement("script"),this.script.id=r+t,this.script.src=this.options.url+"/"+t+"?"+o,this.script.type="text/javascript",this.script.charset="UTF-8",this.script.onerror=this.script.onload=i,void 0===this.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)){var a=this.options.receiver||"Pusher.JSONP.receive";this.errorScript=document.createElement("script"),this.errorScript.text=a+"("+t+", true);",this.script.async=this.errorScript.async=!1}var u=this;this.script.onreadystatechange=function(){u.script&&/loaded|complete/.test(u.script.readyState)&&i(!0)};var c=document.getElementsByTagName("head")[0];return c.insertBefore(this.script,c.firstChild),this.errorScript&&c.insertBefore(this.errorScript,this.script.nextSibling),!0},n.cleanup=function(){this.script&&this.script.parentNode&&(this.script.parentNode.removeChild(this.script),this.script=null),this.errorScript&&this.errorScript.parentNode&&(this.errorScript.parentNode.removeChild(this.errorScript),this.errorScript=null)},Pusher.JSONPRequest=t}.call(this),function(){function t(){this.lastId=0,this.callbacks={}}var e=t.prototype;e.register=function(t){this.lastId++;var e=this.lastId;return this.callbacks[e]=t,e},e.unregister=function(t){if(this.callbacks[t]){var e=this.callbacks[t];return delete this.callbacks[t],e}return null},e.receive=function(t,e,n){var i=this.unregister(t);i&&i(e,n)},Pusher.JSONPReceiver=t,Pusher.JSONP=new t}.call(this),function(){function t(t,e,n){this.key=t,this.session=e,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}var e=t.prototype;t.ERROR=3,t.INFO=6,t.DEBUG=7,e.log=function(t,e){(void 0===this.options.level||t<=this.options.level)&&(this.events.push(Pusher.Util.extend({},e,{timestamp:Pusher.Util.now(),level:t})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},e.error=function(e){this.log(t.ERROR,e)},e.info=function(e){this.log(t.INFO,e)},e.debug=function(e){this.log(t.DEBUG,e)},e.isEmpty=function(){return 0===this.events.length},e.send=function(t,e){var n=this,i={};return 0===this.sent&&(i=Pusher.Util.extend({key:this.key,features:this.options.features,version:this.options.version},this.options.params||{})),i.session=this.session,i.timeline=this.events,i=Pusher.Util.filterObject(i,function(t){return void 0!==t}),this.events=[],t(i,function(t,i){t||n.sent++,e(t,i)}),!0},e.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},Pusher.Timeline=t}.call(this),function(){function t(t,e){this.timeline=t,this.options=e||{}}var e=t.prototype;e.send=function(t){if(!this.timeline.isEmpty()){var e=this.options,n="http"+(this.isEncrypted()?"s":"")+"://",i=function(t,i){return Pusher.JSONPRequest.send({data:t,url:n+e.host+e.path,receiver:Pusher.JSONP},i)};this.timeline.send(i,t)}},e.isEncrypted=function(){return!!this.options.encrypted},Pusher.TimelineSender=t}.call(this),function(){function t(t){this.strategies=t}function e(t,e,n){var r=Pusher.Util.map(t,function(t,i,r,s){return t.connect(e,n(i,s))});return{abort:function(){Pusher.Util.apply(r,i)},forceMinPriority:function(t){Pusher.Util.apply(r,function(e){e.forceMinPriority(t)})}}}function n(t){return Pusher.Util.all(t,function(t){return Boolean(t.error)})}function i(t){t.error||t.aborted||(t.abort(),t.aborted=!0)}var r=t.prototype;r.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))},r.connect=function(t,i){return e(this.strategies,t,function(t,e){return function(r,s){return e[t].error=r,r?(n(e)&&i(!0),void 0):(Pusher.Util.apply(e,function(t){t.forceMinPriority(s.transport.priority)}),i(null,s),void 0)}})},Pusher.BestConnectedEverStrategy=t}.call(this),function(){function t(t,e,n){this.strategy=t,this.transports=e,this.ttl=n.ttl||18e5,this.timeline=n.timeline}function e(){var t=Pusher.Util.getLocalStorage();if(t){var e=t.pusherTransport;if(e)return JSON.parse(t.pusherTransport)}return null}function n(t,e){var n=Pusher.Util.getLocalStorage();if(n)try{n.pusherTransport=JSON.stringify({timestamp:Pusher.Util.now(),transport:t,latency:e})}catch(i){}}function i(){var t=Pusher.Util.getLocalStorage();if(t&&t.pusherTransport)try{delete t.pusherTransport}catch(e){t.pusherTransport=void 0}}var r=t.prototype;r.isSupported=function(){return this.strategy.isSupported()},r.connect=function(t,r){var s=e(),o=[this.strategy];if(s&&s.timestamp+this.ttl>=Pusher.Util.now()){var a=this.transports[s.transport];a&&(this.timeline.info({cached:!0,transport:s.transport}),o.push(new Pusher.SequentialStrategy([a],{timeout:2*s.latency,failFast:!0})))}var u=Pusher.Util.now(),c=o.pop().connect(t,function h(e,s){if(e)i(),o.length>0?(u=Pusher.Util.now(),c=o.pop().connect(t,h)):r(e);else{var a=Pusher.Util.now()-u;n(s.transport.name,a),r(null,s)}});return{abort:function(){c.abort()},forceMinPriority:function(e){t=e,c&&c.forceMinPriority(e)}}},Pusher.CachedStrategy=t}.call(this),function(){function t(t,e){this.strategy=t,this.options={delay:e.delay}}var e=t.prototype;e.isSupported=function(){return this.strategy.isSupported()},e.connect=function(t,e){var n,i=this.strategy,r=new Pusher.Timer(this.options.delay,function(){n=i.connect(t,e)});return{abort:function(){r.ensureAborted(),n&&n.abort()},forceMinPriority:function(e){t=e,n&&n.forceMinPriority(e)}}},Pusher.DelayedStrategy=t}.call(this),function(){function t(t){this.strategy=t}var e=t.prototype;e.isSupported=function(){return this.strategy.isSupported()},e.connect=function(t,e){var n=this.strategy.connect(t,function(t,i){i&&n.abort(),e(t,i)});return n},Pusher.FirstConnectedStrategy=t}.call(this),function(){function t(t,e,n){this.test=t,this.trueBranch=e,this.falseBranch=n}var e=t.prototype;e.isSupported=function(){var t=this.test()?this.trueBranch:this.falseBranch;return t.isSupported()},e.connect=function(t,e){var n=this.test()?this.trueBranch:this.falseBranch;return n.connect(t,e)},Pusher.IfStrategy=t}.call(this),function(){function t(t,e){this.strategies=t,this.loop=Boolean(e.loop),this.failFast=Boolean(e.failFast),this.timeout=e.timeout,this.timeoutLimit=e.timeoutLimit}var e=t.prototype;e.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))},e.connect=function(t,e){var n=this,i=this.strategies,r=0,s=this.timeout,o=null,a=function(u,c){c?e(null,c):(r+=1,n.loop&&(r%=i.length),r<i.length?(s&&(s=2*s,n.timeoutLimit&&(s=Math.min(s,n.timeoutLimit))),o=n.tryStrategy(i[r],t,{timeout:s,failFast:n.failFast},a)):e(!0))};return o=this.tryStrategy(i[r],t,{timeout:s,failFast:this.failFast},a),{abort:function(){o.abort()},forceMinPriority:function(e){t=e,o&&o.forceMinPriority(e)}}},e.tryStrategy=function(t,e,n,i){var r=null,s=null;return s=t.connect(e,function(t,e){t&&r&&r.isRunning()&&!n.failFast||(r&&r.ensureAborted(),i(t,e))}),n.timeout>0&&(r=new Pusher.Timer(n.timeout,function(){s.abort(),i(!0)})),{abort:function(){r&&r.ensureAborted(),s.abort()},forceMinPriority:function(t){s.forceMinPriority(t)}}},Pusher.SequentialStrategy=t}.call(this),function(){function t(t,e,n,i){this.name=t,this.priority=e,this.transport=n,this.options=i||{}}function e(t,e){return new Pusher.Timer(0,function(){e(t)}),{abort:function(){},forceMinPriority:function(){}}}var n=t.prototype;n.isSupported=function(){return this.transport.isSupported({disableFlash:!!this.options.disableFlash})},n.connect=function(t,n){if(!this.transport.isSupported())return e(new Pusher.Errors.UnsupportedStrategy,n);if(this.priority<t)return e(new Pusher.Errors.TransportPriorityTooLow,n);var i=this,r=!1,s=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),o=null,a=function(){s.unbind("initialized",a),s.connect()},u=function(){o=new Pusher.Handshake(s,function(t){r=!0,l(),n(null,t)})},c=function(t){l(),n(t)},h=function(){l(),n(new Pusher.Errors.TransportClosed(s))},l=function(){s.unbind("initialized",a),s.unbind("open",u),s.unbind("error",c),s.unbind("closed",h)};return s.bind("initialized",a),s.bind("open",u),s.bind("error",c),s.bind("closed",h),s.initialize(),{abort:function(){r||(l(),o?o.close():s.close())},forceMinPriority:function(t){r||i.priority<t&&(o?o.close():s.close())}}},Pusher.TransportStrategy=t}.call(this),function(){function t(t,e,n,i){Pusher.EventsDispatcher.call(this),this.name=t,this.priority=e,this.key=n,this.state="new",this.timeline=i.timeline,this.id=this.timeline.generateUniqueID(),this.options={encrypted:Boolean(i.encrypted),hostUnencrypted:i.hostUnencrypted,hostEncrypted:i.hostEncrypted}}var e=t.prototype;Pusher.Util.extend(e,Pusher.EventsDispatcher.prototype),t.isSupported=function(){return!1},e.supportsPing=function(){return!1},e.initialize=function(){this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.encrypted?"s":"")})),this.timeline.debug(this.buildTimelineMessage({method:"initialize"})),this.changeState("initialized")},e.connect=function(){var t=this.getURL(this.key,this.options);if(this.timeline.debug(this.buildTimelineMessage({method:"connect",url:t})),this.socket||"initialized"!==this.state)return!1;try{this.socket=this.createSocket(t)}catch(e){var n=this;return new Pusher.Timer(0,function(){n.onError(e),n.changeState("closed")}),!1}return this.bindListeners(),Pusher.debug("Connecting",{transport:this.name,url:t}),this.changeState("connecting"),!0},e.close=function(){return this.timeline.debug(this.buildTimelineMessage({method:"close"})),this.socket?(this.socket.close(),!0):!1},e.send=function(t){if(this.timeline.debug(this.buildTimelineMessage({method:"send",data:t})),"open"===this.state){var e=this;return setTimeout(function(){e.socket.send(t)},0),!0}return!1},e.requestPing=function(){this.emit("ping_request")},e.onOpen=function(){this.changeState("open"),this.socket.onopen=void 0},e.onError=function(t){this.emit("error",{type:"WebSocketError",error:t}),this.timeline.error(this.buildTimelineMessage({}))},e.onClose=function(t){t?this.changeState("closed",{code:t.code,reason:t.reason,wasClean:t.wasClean}):this.changeState("closed"),this.socket=void 0},e.onMessage=function(t){this.timeline.debug(this.buildTimelineMessage({message:t.data})),this.emit("message",t)},e.bindListeners=function(){var t=this;this.socket.onopen=function(){t.onOpen()},this.socket.onerror=function(e){t.onError(e)},this.socket.onclose=function(e){t.onClose(e)},this.socket.onmessage=function(e){t.onMessage(e)}},e.createSocket=function(){return null},e.getScheme=function(){return this.options.encrypted?"wss":"ws"},e.getBaseURL=function(){var t;return t=this.options.encrypted?this.options.hostEncrypted:this.options.hostUnencrypted,this.getScheme()+"://"+t},e.getPath=function(){return"/app/"+this.key},e.getQueryString=function(){return"?protocol="+Pusher.PROTOCOL+"&client=js&version="+Pusher.VERSION},e.getURL=function(){return this.getBaseURL()+this.getPath()+this.getQueryString()},e.changeState=function(t,e){this.state=t,this.timeline.info(this.buildTimelineMessage({state:t,params:e})),this.emit(t,e)},e.buildTimelineMessage=function(t){return Pusher.Util.extend({cid:this.id},t)},Pusher.AbstractTransport=t}.call(this),function(){function t(t,e,n,i){Pusher.AbstractTransport.call(this,t,e,n,i)}var e=t.prototype;Pusher.Util.extend(e,Pusher.AbstractTransport.prototype),t.createConnection=function(e,n,i,r){return new t(e,n,i,r)},t.isSupported=function(t){if(t&&t.disableFlash)return!1;try{return Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(e){return Boolean(navigator&&navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/x-shockwave-flash"])}},e.initialize=function(){var t=this;this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.encrypted?"s":"")})),this.timeline.debug(this.buildTimelineMessage({method:"initialize"})),this.changeState("initializing"),void 0===window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR&&(window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR=!0),window.WEB_SOCKET_SWF_LOCATION=Pusher.Dependencies.getRoot()+"/WebSocketMain.swf",Pusher.Dependencies.load("flashfallback",function(){t.changeState("initialized")})},e.createSocket=function(t){return new FlashWebSocket(t)},e.getQueryString=function(){return Pusher.AbstractTransport.prototype.getQueryString.call(this)+"&flash=true"},Pusher.FlashTransport=t}.call(this),function(){function t(t,e,n,i){Pusher.AbstractTransport.call(this,t,e,n,i),this.options.ignoreNullOrigin=i.ignoreNullOrigin}var e=t.prototype;Pusher.Util.extend(e,Pusher.AbstractTransport.prototype),t.createConnection=function(e,n,i,r){return new t(e,n,i,r)},t.isSupported=function(){return!0},e.initialize=function(){var t=this;this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.encrypted?"s":"")})),this.timeline.debug(this.buildTimelineMessage({method:"initialize"})),this.changeState("initializing"),Pusher.Dependencies.load("sockjs",function(){t.changeState("initialized")})},e.supportsPing=function(){return!0},e.createSocket=function(t){return new SockJS(t,null,{js_path:Pusher.Dependencies.getPath("sockjs",{encrypted:this.options.encrypted}),ignore_null_origin:this.options.ignoreNullOrigin})},e.getScheme=function(){return this.options.encrypted?"https":"http"},e.getPath=function(){return this.options.httpPath||"/pusher"},e.getQueryString=function(){return""},e.onOpen=function(){this.socket.send(JSON.stringify({path:Pusher.AbstractTransport.prototype.getPath.call(this)+Pusher.AbstractTransport.prototype.getQueryString.call(this)})),this.changeState("open"),this.socket.onopen=void 0},Pusher.SockJSTransport=t}.call(this),function(){function t(t,e,n,i){Pusher.AbstractTransport.call(this,t,e,n,i)}var e=t.prototype;Pusher.Util.extend(e,Pusher.AbstractTransport.prototype),t.createConnection=function(e,n,i,r){return new t(e,n,i,r)},t.isSupported=function(){return void 0!==window.WebSocket||void 0!==window.MozWebSocket},e.createSocket=function(t){var e=window.WebSocket||window.MozWebSocket;return new e(t)},e.getQueryString=function(){return Pusher.AbstractTransport.prototype.getQueryString.call(this)+"&flash=false"},Pusher.WSTransport=t}.call(this),function(){function t(t,e,n){this.manager=t,this.transport=e,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=null}var e=t.prototype;e.createConnection=function(t,e,n,i){var r=this.transport.createConnection(t,e,n,i),s=this,o=null,a=null,u=function(){r.unbind("open",u),o=Pusher.Util.now(),s.pingDelay&&(a=setInterval(function(){a&&r.requestPing()},s.pingDelay)),r.bind("closed",c)},c=function(t){if(r.unbind("closed",c),a&&(clearInterval(a),a=null),1002===t.code||1003===t.code)s.manager.reportDeath();else if(!t.wasClean&&o){var e=Pusher.Util.now()-o;e<2*s.maxPingDelay&&(s.manager.reportDeath(),s.pingDelay=Math.max(e/2,s.minPingDelay))}};return r.bind("open",u),r},e.isSupported=function(t){return this.manager.isAlive()&&this.transport.isSupported(t)},Pusher.AssistantToTheTransportManager=t}.call(this),function(){function t(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}var e=t.prototype;e.getAssistant=function(t){return new Pusher.AssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},e.isAlive=function(){return this.livesLeft>0},e.reportDeath=function(){this.livesLeft-=1},Pusher.TransportManager=t}.call(this),function(){function t(t){return function(e){return[t.apply(this,arguments),e]}}function e(t){return"string"==typeof t&&":"===t.charAt(0)}function n(t,e){return e[t.slice(1)]}function i(t,e){if(0===t.length)return[[],e];var n=o(t[0],e),r=i(t.slice(1),n[1]);return[[n[0]].concat(r[0]),r[1]]}function r(t,i){if(!e(t))return[t,i];var r=n(t,i);if(void 0===r)throw"Undefined symbol "+t;return[r,i]}function s(t,r){if(e(t[0])){var s=n(t[0],r);if(t.length>1){if("function"!=typeof s)throw"Calling non-function "+t[0];var a=[Pusher.Util.extend({},r)].concat(Pusher.Util.map(t.slice(1),function(t){return o(t,Pusher.Util.extend({},r))[0]}));return s.apply(this,a)}return[s,r]}return i(t,r)}function o(t,e){return"string"==typeof t?r(t,e):"object"==typeof t&&t instanceof Array&&t.length>0?s(t,e):[t,e]}var a={build:function(t,e){var n=Pusher.Util.extend({},c,e);return o(t,n)[1].strategy}},u={ws:Pusher.WSTransport,flash:Pusher.FlashTransport,sockjs:Pusher.SockJSTransport},c={def:function(t,e,n){if(void 0!==t[e])throw"Redefining symbol "+e;return t[e]=n,[void 0,t]},def_transport:function(t,e,n,i,r,s){var o=u[n];if(!o)throw new Pusher.Errors.UnsupportedTransport(n);var a=Pusher.Util.extend({},{key:t.key,encrypted:t.encrypted,timeline:t.timeline,disableFlash:t.disableFlash,ignoreNullOrigin:t.ignoreNullOrigin},r);s&&(o=s.getAssistant(o));var c=new Pusher.TransportStrategy(e,i,o,a),h=t.def(t,e,c)[1];return h.transports=t.transports||{},h.transports[e]=c,[void 0,h]},transport_manager:t(function(t,e){return new Pusher.TransportManager(e)}),sequential:t(function(t,e){var n=Array.prototype.slice.call(arguments,2);return new Pusher.SequentialStrategy(n,e)}),cached:t(function(t,e,n){return new Pusher.CachedStrategy(n,t.transports,{ttl:e,timeline:t.timeline})}),first_connected:t(function(t,e){return new Pusher.FirstConnectedStrategy(e)}),best_connected_ever:t(function(){var t=Array.prototype.slice.call(arguments,1);return new Pusher.BestConnectedEverStrategy(t)}),delayed:t(function(t,e,n){return new Pusher.DelayedStrategy(n,{delay:e})}),"if":t(function(t,e,n,i){return new Pusher.IfStrategy(e,n,i)}),is_supported:t(function(t,e){return function(){return e.isSupported()}})};Pusher.StrategyBuilder=a}.call(this),function(){Protocol={},Protocol.decodeMessage=function(t){try{var e=JSON.parse(t.data);if("string"==typeof e.data)try{e.data=JSON.parse(e.data)}catch(n){if(!(n instanceof SyntaxError))throw n}return e}catch(n){throw{type:"MessageParseError",error:n,data:t.data}}},Protocol.encodeMessage=function(t){return JSON.stringify(t)},Protocol.processHandshake=function(t){if(t=this.decodeMessage(t),"pusher:connection_established"===t.event)return{action:"connected",id:t.data.socket_id};if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},Protocol.getCloseAction=function(t){return t.code<4e3?t.code>=1002&&t.code<=1004?"backoff":null:4e3===t.code?"ssl_only":t.code<4100?"refused":t.code<4200?"backoff":t.code<4300?"retry":"refused"},Protocol.getCloseError=function(t){return 1e3!==t.code&&1001!==t.code?{type:"PusherError",data:{code:t.code,message:t.reason||t.message}}:null},Pusher.Protocol=Protocol}.call(this),function(){function t(t,e){Pusher.EventsDispatcher.call(this),this.id=t,this.transport=e,this.bindListeners()}var e=t.prototype;Pusher.Util.extend(e,Pusher.EventsDispatcher.prototype),e.supportsPing=function(){return this.transport.supportsPing()},e.send=function(t){return this.transport.send(t)},e.send_event=function(t,e,n){var i={event:t,data:e};return n&&(i.channel=n),Pusher.debug("Event sent",i),this.send(Pusher.Protocol.encodeMessage(i))},e.close=function(){this.transport.close()},e.bindListeners=function(){var t=this,e=function(e){var n;try{n=Pusher.Protocol.decodeMessage(e)}catch(i){t.emit("error",{type:"MessageParseError",error:i,data:e.data})}if(void 0!==n){switch(Pusher.debug("Event recd",n),n.event){case"pusher:error":t.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":t.emit("ping");break;case"pusher:pong":t.emit("pong")}t.emit("message",n)}},n=function(){t.emit("ping_request")},i=function(e){t.emit("error",{type:"WebSocketError",error:e})},r=function(e){s(),e&&e.code&&t.handleCloseEvent(e),t.transport=null,t.emit("closed")},s=function(){t.transport.unbind("closed",r),t.transport.unbind("error",i),t.transport.unbind("ping_request",n),t.transport.unbind("message",e)};t.transport.bind("message",e),t.transport.bind("ping_request",n),t.transport.bind("error",i),t.transport.bind("closed",r)},e.handleCloseEvent=function(t){var e=Pusher.Protocol.getCloseAction(t),n=Pusher.Protocol.getCloseError(t);
n&&this.emit("error",n),e&&this.emit(e)},Pusher.Connection=t}.call(this),function(){function t(t,e){this.transport=t,this.callback=e,this.bindListeners()}var e=t.prototype;e.close=function(){this.unbindListeners(),this.transport.close()},e.bindListeners=function(){var t=this;t.onMessage=function(e){t.unbindListeners();try{var n=Pusher.Protocol.processHandshake(e);"connected"===n.action?t.finish("connected",{connection:new Pusher.Connection(n.id,t.transport)}):(t.finish(n.action,{error:n.error}),t.transport.close())}catch(i){t.finish("error",{error:i}),t.transport.close()}},t.onClosed=function(e){t.unbindListeners();var n=Pusher.Protocol.getCloseAction(e)||"backoff",i=Pusher.Protocol.getCloseError(e);t.finish(n,{error:i})},t.transport.bind("message",t.onMessage),t.transport.bind("closed",t.onClosed)},e.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},e.finish=function(t,e){this.callback(Pusher.Util.extend({transport:this.transport,action:t},e))},Pusher.Handshake=t}.call(this),function(){function t(t,e){Pusher.EventsDispatcher.call(this),this.key=t,this.options=e||{},this.state="initialized",this.connection=null,this.encrypted=!!e.encrypted,this.timeline=this.options.getTimeline(),this.connectionCallbacks=this.buildConnectionCallbacks(),this.errorCallbacks=this.buildErrorCallbacks(),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var n=this;Pusher.Network.bind("online",function(){n.timeline.info({netinfo:"online"}),"unavailable"===n.state&&n.connect()}),Pusher.Network.bind("offline",function(){n.timeline.info({netinfo:"offline"}),n.shouldRetry()&&(n.disconnect(),n.updateState("unavailable"))});var i=function(){n.timelineSender&&n.timelineSender.send(function(){})};this.bind("connected",i),setInterval(i,6e4),this.updateStrategy()}var e=t.prototype;Pusher.Util.extend(e,Pusher.EventsDispatcher.prototype),e.connect=function(){var t=this;if(!t.connection&&"connecting"!==t.state){if(!t.strategy.isSupported())return t.updateState("failed"),void 0;if(Pusher.Network.isOnline()===!1)return t.updateState("unavailable"),void 0;t.updateState("connecting"),t.timelineSender=t.options.getTimelineSender(t.timeline,{encrypted:t.encrypted},t);var e=function(n,i){n?t.runner=t.strategy.connect(0,e):"error"===i.action?t.timeline.error({handshakeError:i.error}):(t.runner.abort(),t.handshakeCallbacks[i.action](i))};t.runner=t.strategy.connect(0,e),t.setUnavailableTimer()}},e.send=function(t){return this.connection?this.connection.send(t):!1},e.send_event=function(t,e,n){return this.connection?this.connection.send_event(t,e,n):!1},e.disconnect=function(){this.runner&&this.runner.abort(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.stopActivityCheck(),this.updateState("disconnected"),this.connection&&(this.connection.close(),this.abandonConnection())},e.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})},e.retryIn=function(t){var e=this;e.timeline.info({action:"retry",delay:t}),t>0&&e.emit("connecting_in",Math.round(t/1e3)),e.retryTimer=new Pusher.Timer(t||0,function(){e.disconnect(),e.connect()})},e.clearRetryTimer=function(){this.retryTimer&&this.retryTimer.ensureAborted()},e.setUnavailableTimer=function(){var t=this;t.unavailableTimer=new Pusher.Timer(t.options.unavailableTimeout,function(){t.updateState("unavailable")})},e.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},e.resetActivityCheck=function(){if(this.stopActivityCheck(),!this.connection.supportsPing()){var t=this;t.activityTimer=new Pusher.Timer(t.options.activityTimeout,function(){t.send_event("pusher:ping",{}),t.activityTimer=new Pusher.Timer(t.options.pongTimeout,function(){t.connection.close()})})}},e.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},e.buildConnectionCallbacks=function(){var t=this;return{message:function(e){t.resetActivityCheck(),t.emit("message",e)},ping:function(){t.send_event("pusher:pong",{})},ping_request:function(){t.send_event("pusher:ping",{})},error:function(e){t.emit("error",{type:"WebSocketError",error:e})},closed:function(){t.abandonConnection(),t.shouldRetry()&&t.retryIn(1e3)}}},e.buildHandshakeCallbacks=function(t){var e=this;return Pusher.Util.extend({},t,{connected:function(t){e.clearUnavailableTimer(),e.setConnection(t.connection),e.socket_id=e.connection.id,e.updateState("connected")}})},e.buildErrorCallbacks=function(){function t(t){return function(n){n.error&&e.emit("error",{type:"WebSocketError",error:n.error}),t(n)}}var e=this;return{ssl_only:t(function(){e.encrypted=!0,e.updateStrategy(),e.retryIn(0)}),refused:t(function(){e.disconnect()}),backoff:t(function(){e.retryIn(1e3)}),retry:t(function(){e.retryIn(0)})}},e.setConnection=function(t){this.connection=t;for(var e in this.connectionCallbacks)this.connection.bind(e,this.connectionCallbacks[e]);this.resetActivityCheck()},e.abandonConnection=function(){if(this.connection){for(var t in this.connectionCallbacks)this.connection.unbind(t,this.connectionCallbacks[t]);this.connection=null}},e.updateState=function(t,e){var n=this.state;this.state=t,n!==t&&(Pusher.debug("State changed",n+" -> "+t),this.timeline.info({state:t}),this.emit("state_change",{previous:n,current:t}),this.emit(t,e))},e.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},Pusher.ConnectionManager=t}.call(this),function(){function t(){Pusher.EventsDispatcher.call(this);var t=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){t.emit("online")},!1),window.addEventListener("offline",function(){t.emit("offline")},!1))}Pusher.Util.extend(t.prototype,Pusher.EventsDispatcher.prototype);var e=t.prototype;e.isOnline=function(){return void 0===window.navigator.onLine?!0:window.navigator.onLine},Pusher.NetInfo=t,Pusher.Network=new t}.call(this),function(){function t(){this.reset()}var e=t.prototype;e.get=function(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null},e.each=function(t){var e=this;Pusher.Util.objectApply(e.members,function(n,i){t(e.get(i))})},e.setMyID=function(t){this.myID=t},e.onSubscription=function(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)},e.addMember=function(t){return null===this.get(t.user_id)&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)},e.removeMember=function(t){var e=this.get(t.user_id);return e&&(delete this.members[t.user_id],this.count--),e},e.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},Pusher.Members=t}.call(this),function(){function t(t,e){Pusher.EventsDispatcher.call(this,function(e){Pusher.debug("No callbacks on "+t+" for "+e)}),this.name=t,this.pusher=e,this.subscribed=!1}var e=t.prototype;Pusher.Util.extend(e,Pusher.EventsDispatcher.prototype),e.authorize=function(t,e){return e(!1,{})},e.trigger=function(t,e){return this.pusher.send_event(t,e,this.name)},e.disconnect=function(){this.subscribed=!1},e.handleEvent=function(t,e){0===t.indexOf("pusher_internal:")?"pusher_internal:subscription_succeeded"===t&&(this.subscribed=!0,this.emit("pusher:subscription_succeeded",e)):this.emit(t,e)},Pusher.Channel=t}.call(this),function(){function t(t,e){Pusher.Channel.call(this,t,e)}var e=t.prototype;Pusher.Util.extend(e,Pusher.Channel.prototype),e.authorize=function(t,e){var n=new Pusher.Channel.Authorizer(this,this.pusher.config);return n.authorize(t,e)},Pusher.PrivateChannel=t}.call(this),function(){function t(t,e){Pusher.PrivateChannel.call(this,t,e),this.members=new Pusher.Members}var e=t.prototype;Pusher.Util.extend(e,Pusher.PrivateChannel.prototype),e.authorize=function(t,e){var n=Pusher.PrivateChannel.prototype.authorize,i=this;n.call(i,t,function(t,n){if(!t){if(void 0===n.channel_data)return Pusher.warn("Invalid auth response for channel '"+i.name+"', expected 'channel_data' field"),e("Invalid auth response"),void 0;var r=JSON.parse(n.channel_data);i.members.setMyID(r.user_id)}e(t,n)})},e.handleEvent=function(t,e){switch(t){case"pusher_internal:subscription_succeeded":this.members.onSubscription(e),this.subscribed=!0,this.emit("pusher:subscription_succeeded",this.members);break;case"pusher_internal:member_added":var n=this.members.addMember(e);this.emit("pusher:member_added",n);break;case"pusher_internal:member_removed":var i=this.members.removeMember(e);i&&this.emit("pusher:member_removed",i);break;default:Pusher.PrivateChannel.prototype.handleEvent.call(this,t,e)}},e.disconnect=function(){this.members.reset(),Pusher.PrivateChannel.prototype.disconnect.call(this)},Pusher.PresenceChannel=t}.call(this),function(){function t(){this.channels={}}function e(t,e){return 0===t.indexOf("private-")?new Pusher.PrivateChannel(t,e):0===t.indexOf("presence-")?new Pusher.PresenceChannel(t,e):new Pusher.Channel(t,e)}var n=t.prototype;n.add=function(t,n){return this.channels[t]||(this.channels[t]=e(t,n)),this.channels[t]},n.find=function(t){return this.channels[t]},n.remove=function(t){delete this.channels[t]},n.disconnect=function(){Pusher.Util.objectApply(this.channels,function(t){t.disconnect()})},Pusher.Channels=t}.call(this),function(){Pusher.Channel.Authorizer=function(t,e){this.channel=t,this.type=e.authTransport,this.options=e,this.authOptions=(e||{}).auth||{}},Pusher.Channel.Authorizer.prototype={composeQuery:function(t){var e="&socket_id="+encodeURIComponent(t)+"&channel_name="+encodeURIComponent(this.channel.name);for(var n in this.authOptions.params)e+="&"+encodeURIComponent(n)+"="+encodeURIComponent(this.authOptions.params[n]);return e},authorize:function(t,e){return Pusher.authorizers[this.type].call(this,t,e)}};var t=1;Pusher.auth_callbacks={},Pusher.authorizers={ajax:function(t,e){var n,i=this;n=Pusher.XHR?new Pusher.XHR:window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.open("POST",i.options.authEndpoint,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var r in this.authOptions.headers)n.setRequestHeader(r,this.authOptions.headers[r]);return n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status){var t,i=!1;try{t=JSON.parse(n.responseText),i=!0}catch(r){e(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+n.responseText)}i&&e(!1,t)}else Pusher.warn("Couldn't get auth info from your webapp",n.status),e(!0,n.status)},n.send(this.composeQuery(t)),n},jsonp:function(e,n){void 0!==this.authOptions.headers&&Pusher.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var i=t.toString();t++;var r=document.createElement("script");Pusher.auth_callbacks[i]=function(t){n(!1,t)};var s="Pusher.auth_callbacks['"+i+"']";r.src=this.options.authEndpoint+"?callback="+encodeURIComponent(s)+this.composeQuery(e);var o=document.getElementsByTagName("head")[0]||document.documentElement;o.insertBefore(r,o.firstChild)}}}.call(this);var NTC={};NTC.pusher=new Pusher(""),NTC.channel=NTC.pusher.subscribe("global"),function(){jQuery(function(){return $("a[rel=popover]").popover(),$(".tooltip").tooltip(),$("a[rel=tooltip]").tooltip()})}.call(this),NTC.Listener={listenToTweets:function(t,e){NTC.channel.bind("tweet",function(n){var i=NTC.Listener.belongsToHood(n.neighborhood,e);i&&(NTC.Listener.colorHood(i),$(t).prepend(n.body))})},colorHood:function(t){_(t.paths).each(function(t){t.fillColor="blue"})},belongsToHood:function(t,e){return _(e).detect(function(e){return e.slug==t})}},NTC.Loader={loadHoods:function(t){var e=_(t).map(function(t){return this.pathFromSlug(t)},this),n=this.getAll(e),i=$.Deferred();return $.when.apply($,n).done(function(){var t=_(arguments).map(function(t){return t[0]});i.resolve(t)}),i},getAll:function(t){return _(t).map(function(t){return $.getJSON(t)},this)},pathFromSlug:function(t){return"/static/neighborhoods/"+t+".json"}},NTC.Renderer={getMinPointFromPoints:function(t){var e=_.min(t,function(t){return t[0]})[0],n=_.min(t,function(t){return-t[1]})[1];return[e,n]},getMinPointFromGeom:function(t){var e=t.coordinates,n=99999999,i=0;return _(e).each(function(t){var e=this.getMinPointFromPoints(t[0]);n>e[0]&&(n=e[0]),i<e[1]&&(i=e[1])},this),[n,i]},getMinPointForAll:function(t){var e=_(t).map(function(t){return this.getMinPointFromGeom(t)},this);return this.getMinPointFromPoints(e)},drawRing:function(scope,points,minPoint){var scaledPoints=_(points).map(function(t){var e=[t[0]-minPoint[0],minPoint[1]-t[1]];return[e[0]/40,e[1]/40]});with(scope){var pathFromArray=new Path({segments:scaledPoints,selected:!1,closed:!0});return pathFromArray.strokeColor="white",pathFromArray.fillColor="black",pathFromArray}},drawHood:function(t,e,n){var i=e.coordinates;return n=n||this.getMinPointFromGeom(e),_(i).map(function(e){return this.drawRing(t,e[0],n)},this)},drawHoods:function(t,e){var n=paper.setup(e),i=_(t).map(function(t){return t.geometry}),r=this.getMinPointForAll(i);_(t).each(function(t){t.paths=this.drawHood(n,t.geometry,r)},this),window.onresize=function(){var t=$("#"+e).width(),i=$("#"+e).height();console.log("resizing",e,t,i),t&&(n.view.viewSize=[t,i],n.view.draw())},n.view.onFrame=function(){_(n.project.layers[0]._children).each(function(t){0!=t.fillColor.blue&&(t.fillColor.blue-=.005)})},n.view.draw()}};